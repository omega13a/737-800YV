function tmgAdsInit(){try{tmgAdsEvent("tmggpt-init:start"),tmgAds.log=tmgAds.log||[],tmgAds.ads={},tmgAds.adslots={},tmgAds.errors=[],tmgAds.data={metatags:{}},tmgAds.performance={},tmgAds.refreshTimers={},tmgAds.plugins={gpt:{networkid:6582,servername:"ad.doubleclick.net",async:!0,enableSingleRequest:!1,enableAsyncRendering:!0,collapseEmptyDivs:!0,setLocation:!1,vastOutputVersion:"xml_vast3",url:"https://www.googletagservices.com/tag/js/gpt.js",ooyalaCMSID:5694,geoapi:{precision:2e4,watching:!1,test:"string"}},blockdomain:["chase.telegraph.co.uk","cms1.aem-dev1.awspreprod.telegraph.co.uk","cms1.aem-dev2.awspreprod.telegraph.co.uk","cms1.aem-dev3.awspreprod.telegraph.co.uk","cms1.aem-dev4.awspreprod.telegraph.co.uk","cms1.aem-dev5.awspreprod.telegraph.co.uk","cms1.aem-dev6.awspreprod.telegraph.co.uk","cms1.aem-dev7.awspreprod.telegraph.co.uk","cms1.aem-dev8.awspreprod.telegraph.co.uk","cms1.aem-dev9.awspreprod.telegraph.co.uk","cms1.aem-dev10.awspreprod.telegraph.co.uk","cms1.aem-dev11.awspreprod.telegraph.co.uk","cms1.aem-dev12.awspreprod.telegraph.co.uk","cms1.aem-test1.awspreprod.telegraph.co.uk","cms1.aem-test2.awspreprod.telegraph.co.uk","cms1.aem-test3.awspreprod.telegraph.co.uk","cms1.aem-test4.awspreprod.telegraph.co.uk","cms1.aem-test5.awspreprod.telegraph.co.uk","cms1.aem-test6.awspreprod.telegraph.co.uk","cms1.aem-editorial1.awspreprod.telegraph.co.uk","cms1.aem-editorial2.awspreprod.telegraph.co.uk","cms1.aem-nitro1.awspreprod.telegraph.co.uk","cms1.aem-demo.awspreprod.telegraph.co.uk","cms1.aem-perf1.awspreprod.telegraph.co.uk","cms1.aem-perf2.awspreprod.telegraph.co.uk"],test:{active:!1,status:!1,async:!1,url:"//adtools.telegraph.co.uk/tools/delay/?delay=4&type=js"},refurl:{active:!0},scrollspeed:!1,sizemapping:{x:{size:[1368,768],ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60],[1,1],"fluid"],bin:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],bbt:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],bbb:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],myb:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],mpu:[[300,600],[300,250],[1,1],"fluid"],sky:[[300,600],[300,250],[160,600],[120,600],[1,1],"fluid"],hpg:[[300,600],[300,250],[160,600],[120,600],[1,1],"fluid"],mob:[[300,250],[320,100],[320,50],[300,50],[1,1],"fluid"],dyn:[[300,250],[320,50],[300,50],[1,1],"fluid"],nat:[[1,1],"fluid"],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],opt:[1,1],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"},l:{size:[1008,768],ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60],[1,1],"fluid"],bin:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],bbt:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],bbb:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],myb:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],mpu:[[300,600],[300,250],[1,1],"fluid"],sky:[[300,600],[300,250],[160,600],[120,600],[1,1],"fluid"],hpg:[[300,600],[300,250],[160,600],[120,600],[1,1],"fluid"],mob:[[300,250],[320,100],[320,50],[300,50],[1,1],"fluid"],dyn:[[300,250],[320,50],[300,50],[1,1],"fluid"],nat:[[1,1],"fluid"],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],opt:[1,1],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"},m:{size:[730,480],ban:[[728,90],[468,60],[1,1],"fluid"],bin:[[728,90],[468,60],[1,1],"fluid"],bbt:[[728,90],[468,60],[1,1],"fluid"],bbb:[[728,90],[468,60],[1,1],"fluid"],myb:[[728,90],[468,60],[1,1],"fluid"],mpu:[[300,250],[1,1],"fluid"],hpg:[[300,250],[1,1],"fluid"],sky:[[300,250],[1,1],"fluid"],mob:[[300,250],[320,100],[320,50],[300,50],[1,1],"fluid"],dyn:[[300,250],[320,50],[300,50],[1,1],"fluid"],nat:[[1,1],"fluid"],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],opt:[1,1],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"},s:{size:[480,320],ban:[[300,250],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],bin:[[300,250],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],bbt:[[300,250],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],bbb:[[300,250],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],myb:[[300,250],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],mpu:[[300,250],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],sky:[[300,250],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],hpg:[[300,250],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],mob:[[300,250],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],dyn:[[300,250],[320,50],[300,50],[1,1],"fluid"],nat:[[1,1],"fluid"],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],opt:[1,1],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"300x235"},xs:{size:[0,0],ban:[[300,250],[320,100],[320,50],[300,50],[1,1],"fluid"],bin:[[300,250],[320,100],[320,50],[300,50],[1,1],"fluid"],bbt:[[300,250],[320,100],[320,50],[300,50],[1,1],"fluid"],bbb:[[300,250],[320,100],[320,50],[300,50],[1,1],"fluid"],myb:[[300,250],[320,100],[320,50],[300,50],[1,1],"fluid"],mpu:[[300,250],[320,100],[320,50],[300,50],[1,1],"fluid"],sky:[[300,250],[320,100],[320,50],[300,50],[1,1],"fluid"],hpg:[[300,250],[320,100],[320,50],[300,50],[1,1],"fluid"],mob:[[300,250],[320,100],[320,50],[300,50],[1,1],"fluid"],dyn:[[300,250],[320,50],[300,50],[1,1],"fluid"],nat:[[1,1],"fluid"],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],opt:[1,1],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"300x235"},default:{size:[0,0],ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60],[1,1],"fluid"],bin:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60],[1,1],"fluid"],bbt:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60],[1,1],"fluid"],bbb:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60],[1,1],"fluid"],mpu:[[300,600],[300,250],[1,1],"fluid"],sky:[[300,600],[300,250],[160,600],[120,600],[1,1],"fluid"],hpg:[[300,600],[300,250],[160,600],[120,600],[1,1],"fluid"],mob:[[300,250],[320,100],[320,50],[300,50],[1,1],"fluid"],dyn:[[300,250],[320,50],[300,50],[1,1],"fluid"],nat:[[1,1],"fluid"],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],opt:[1,1],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"}},adiesticky:tmgAdsGetURLParam("adiesticky",window.location.search),adtest:tmgAdsGetURLParam("adtest",window.location.search),adteston:tmgAdsGetURLParam("adteston",window.location.search),adconsole:tmgAdsGetURLParam("adconsole",window.location.search),adsafe:tmgAdsGetURLParam("adsafe",window.location.search),adkill:tmgAdsGetURLParam("adkill",window.location.search),adprebid:tmgAdsGetURLParam("adprebid",window.location.search),adscroll:tmgAdsGetURLParam("adscroll",window.location.search),adixtest:tmgAdsGetURLParam("adixtest",window.location.search),adviewability:tmgAdsGetURLParam("adviewability",window.location.search),advast4:tmgAdsGetURLParam("advast4",window.location.search),adscrollon:tmgAdsGetURLParam("adscrollon",window.location.search),adscrolloff:tmgAdsGetURLParam("adscrolloff",window.location.search),adgrapeshoton:tmgAdsGetURLParam("adgrapeshoton",window.location.search),adgrapeshotoff:tmgAdsGetURLParam("adgrapeshotoff",window.location.search),adbeemrayon:tmgAdsGetURLParam("adbeemrayon",window.location.search),adbeemrayoff:tmgAdsGetURLParam("adbeemrayoff",window.location.search),adbeemraytest:tmgAdsGetURLParam("adbeemraytest",window.location.search),adheaderbidon:tmgAdsGetURLParam("adheaderbidon",window.location.search),adheaderbidoff:tmgAdsGetURLParam("adheaderbidoff",window.location.search),adprebidon:tmgAdsGetURLParam("adprebidon",window.location.search),adprebidoff:tmgAdsGetURLParam("adprebidoff",window.location.search),adindexon:tmgAdsGetURLParam("adindexvidon",window.location.search),adindexoff:tmgAdsGetURLParam("adindexvidoff",window.location.search),adindexvidon:tmgAdsGetURLParam("adindexvidon",window.location.search),adindexvidoff:tmgAdsGetURLParam("adindexvidoff",window.location.search),adamazona9on:tmgAdsGetURLParam("adamazona9on",window.location.search),adamazona9off:tmgAdsGetURLParam("adamazona9off",window.location.search),admytoff:tmgAdsGetURLParam("admytoff",window.location.search),adstickyon:tmgAdsGetURLParam("adstickyon",window.location.search),adstickyoff:tmgAdsGetURLParam("adstickyoff",window.location.search),adnativeon:tmgAdsGetURLParam("adnativeon",window.location.search),adnativeoff:tmgAdsGetURLParam("adnativeoff",window.location.search),dnt:{active:!0,state:tmgAdsGetDoNotTrack()},counters:20,tmgcookies:{active:!0},performance:{active:!0,supported:"unknown"},chartbeat:{active:!1},quantcast:{active:!0,maxSegs:10},mytelegraph:{isActive:!0,isApplied:!1,isPlatform:"unknown",active:function(){return void 0!==tmgAds.mytelegraph&&tmgAds.mytelegraph},exempt:["sponsored","commerce","about-us","events","financial-services","promotions"],refreshPeriod:20,refreshLimit:2e3,refreshCount:0},adobe:{active:!0},adomik:{active:!0,getAdGroup:function(){var e=Math.random();switch(!1){case!(e<.09):return"ad_ex"+Math.floor(100*e);case!(e<.1):return"ad_bc";default:return"ad_opt"}}},adSlotRefresh:{active:!0,retryPeriod:200,retryLimit:60,retryCount:0,exemptAdSlots:["nat","bbt","bbb","dyn","tmg","inr","opt","ftr"],pagetypes:["index","topic","story","live","video","gallery"]},dynad:{active:!0,viewports:["xs","s","m"]},oopunits:["tmg","inr","int","opt","ftr"],beemray:{name:"beemray",active:!0,status:"init",id:"5e463430-b036-4755-ac9a-233b7a357002",url:"https://telegraph.sdk.beemray.com/content/websdk/5e463430-b036-4755-ac9a-233b7a357002?source="+btoa(location.href),testurl:"https://stage.sdk.beemray.com/content/websdk/5e463430-b036-4755-ac9a-233b7a357002?source="+btoa(location.href),dfp:[],segments:[],timeout:800,preload:function(){tmgAds.plugins.beemray.dfp.push(tmgAds.plugins.beemray.status),window.addEventListener("br_sdkload",function(){tmgAds.plugins.beemray.dfp=[],tmgAds.plugins.beemray.status="received",tmgAds.plugins.beemray.dfp.push(tmgAds.plugins.beemray.status),beemray.EventApi.create("WebSDK","/rest/event/web/plain").send(function(e){if(tmgAds.plugins.beemray.dfp=[],null===e)return tmgAds.plugins.beemray.status="received-null",void tmgAds.plugins.beemray.dfp.push(tmgAds.plugins.beemray.status);for(var t in tmgAds.plugins.beemray.response=e,tmgAds.plugins.beemray.status="received-segments",tmgAds.plugins.beemray.dfp.push(tmgAds.plugins.beemray.status),e.list)tmgAds.plugins.beemray.dfp.push(e.list[t].id),tmgAds.plugins.beemray.dfp.push(e.list[t].place.id);e.hasOwnProperty("stand")&&e.stand.hasOwnProperty("userPlaceInfo")&&e.stand.userPlaceInfo.hasOwnProperty("state")&&tmgAds.plugins.beemray.dfp.push(e.stand.userPlaceInfo.state)},tmgAds.plugins.beemray.timeout)})},callback:function(){tmgAdsLog("tmgAds.plugins.beemray.callback()")}},scroll:{name:"scroll",active:!1,status:"init",url:"https://static.scroll.com/js/scroll.js",preload:function(){tmgAdsLog("tmgAds.plugins.scroll.preload()"),function(e,t,s,d){if(!e[t]){var i=e[t]={};i._q=[],i.do=function(e){i._q.push(e)}}}(window,"Scroll"),Scroll.config={detected:-1<document.cookie.indexOf("scroll0=")}},callback:function(){tmgAdsLog("tmgAds.plugins.scroll.callback()")}},grapeshot:{name:"grapeshot",active:!0,status:"init",maxSegs:20,retryPeriod:200,retryLimit:10,retryCount:0,loadStatus:!1,url:"https://telegraph.grapeshot.co.uk/main/channels.cgi?url="+location.protocol+"//"+location.host+location.pathname,preload:function(){tmgAdsLog("tmgAds.plugins.grapeshot.preload()")},callback:function(){tmgAdsLog("tmgAds.plugins.grapeshot.callback()"),tmgAds.grapeshot={raw:null,dfp:[]},void 0!==window.gs_channels?(tmgAds.grapeshot={raw:window.gs_channels,dfp:window.gs_channels.split(",")},tmgAdsLog("GRAPESHOT: window.gs_channels exists :: Num of channls ="+tmgAds.grapeshot.dfp.length+" :: Content = "+tmgAds.grapeshot.dfp.toString())):tmgAdsLog("GRAPESHOT: window.gs_channels does not exist:"),tmgAdsInitData(),tmgAdsInitDFP()}},lazyLoad:{xs:{active:!0,offset:-250,delayCall:150,geo:[],channels:[],lazy:["myb","nat","bin","dyn"],exempt:["advert_tmg_nat_story_outbrain"]},s:{active:!0,offset:-250,delayCall:150,geo:[],channels:[],lazy:["myb","nat","bin","dyn"],exempt:["advert_tmg_nat_story_outbrain"]},m:{active:!0,offset:-250,delayCall:150,geo:[],channels:[],lazy:["myb","nat","bin"],exempt:["advert_tmg_nat_story_outbrain"]},l:{active:!0,offset:-750,delayCall:150,geo:[],channels:[],lazy:["myb","nat","bin","bbt","bbb"],exempt:["advert_tmg_nat_story_outbrain"]},x:{active:!0,offset:-750,delayCall:150,geo:[],channels:[],lazy:["myb","nat","bin","bbt","bbb"],exempt:["advert_tmg_nat_story_outbrain"]}},nativeads:{active:!0,counters:{},config:{name:"Native advert configuration",version:"1.2",date:"2018-07-25",active:!0,exclude:["subscriptions","rewards"],pagetype:{index:{adverts:[{id:"nat_index_sidebar",active:!0,include:[],exclude:[],selector:".article__sidebar .social-follow",position:"after",poscount:0,viewports:["l","x"]},{id:"nat_index_logo",active:!1,include:[],exclude:[],selector:".header-breadcrumbs__list",position:"after",poscount:0,viewports:["xs","s","m","l","x"]},{id:"nat_index_mob_portal_newsfeed",active:!0,include:[],exclude:[],selector:".splitter__slot .splitter__slot--2",position:"after",poscount:0,viewports:["xs","s"]},{id:"nat_index_firstlist_mob",active:!0,include:[],exclude:["sport","opinion","fashion","luxury","portal"],selector:".js-list-of-entities__container",position:"after",poscount:0,viewports:["xs","s"]},{id:"nat_index_multilist_mob",active:!1,include:[],exclude:[],selector:".js-list-of-entities__container",list:{position:5,repeat:!0},viewports:["xs","s","m"]},{id:"nat_index_sponsored_list_item",active:!0,include:["portal"],exclude:[],selector:".sponsored-list-item",position:"replace",poscount:0,viewports:["xs","s","m","l","x"]},{id:"nat_index_sparkbrain_1",active:!0,include:[],exclude:[],selector:".curatedList.version-6.version-6--sponsored.section",position:"replace",poscount:0,viewports:["xs","s","m","l","x"]},{id:"nat_index_sparkbrain_2",active:!0,include:[],exclude:[],selector:".curatedList.version-6.version-6--sponsored.section",position:"replace",poscount:1,viewports:["xs","s","m","l","x"]}]},story:{adverts:[{id:"nat_story_logo",active:!1,include:[],exclude:[],selector:".header-breadcrumbs__list",position:"after",poscount:0,viewports:["xs","s","m","l","x"]},{id:"nat_story_sidebar",active:!0,include:[],exclude:[],selector:".article__sidebar .social-follow",position:"before",poscount:0,viewports:["l","x"]},{id:"nat_story_top",active:!0,include:[],exclude:[],selector:".hero-area-wrapper",position:"after",poscount:0,viewports:["xs","s","m","l","x"]},{id:"nat_story_sparkbrain_1",active:!0,include:[],exclude:[],selector:".article__spark #polar-ad-article-bottom",position:"before",poscount:0,viewports:["xs","s","m","l","x"]},{id:"nat_story_outbrain",active:!0,include:[],exclude:[],selector:".article__spark #polar-ad-article-bottom",position:"before",poscount:0,viewports:["xs","s","m","l","x"]},{id:"nat_story_sparkbrain_2",active:!0,include:[],exclude:[],selector:".article__spark #polar-ad-article-bottom",position:"after",poscount:0,viewports:["xs","s","m","l","x"]},{id:"bbt_story_latest_top",active:!1,include:[],exclude:[],selector:".snippet-onward-journey",position:"before",poscount:0,viewports:["l","x"]},{id:"bbb_story_latest_bottom",active:!0,include:[],exclude:[],selector:".snippet-onward-journey",position:"after",poscount:0,viewports:["l","x"]},{id:"nat_story_list_onward_mob",active:!0,include:[],exclude:[],selector:".article__related .list:last-child .list-of-entities__container",list:{position:6,repeat:!0},viewports:["xs","s"]}]},gallery:{adverts:[{id:"nat_story_sparkbrain_1",active:!0,include:[],exclude:[],selector:".article__spark #polar-ad-article-bottom",position:"before",poscount:0,viewports:["xs","s","m","l","x"]},{id:"nat_story_outbrain",active:!0,include:[],exclude:[],selector:".article__spark #polar-ad-article-bottom",position:"before",poscount:0,viewports:["xs","s","m","l","x"]},{id:"nat_story_sparkbrain_2",active:!0,include:[],exclude:[],selector:".article__spark #polar-ad-article-bottom",position:"after",poscount:0,viewports:["xs","s","m","l","x"]}]}}}},models:{story:[{viewport:"x",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]}],live:[{viewport:"x",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]}],video:[{viewport:"x",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]}],"video-play":[{viewport:"x",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]}],index:[{viewport:"x",ruleName:"Default",model:"ban",minHeight:900,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin"]},{viewport:"l",ruleName:"Default",model:"ban",minHeight:900,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin"]}],topic:[{viewport:"x",ruleName:"Default",model:"ban",minHeight:900,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin"]},{viewport:"l",ruleName:"Default",model:"ban",minHeight:900,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin"]}],"video-index":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],gallery:[{viewport:"x",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","mpu"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","mpu"]}],"travel-product":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],"travel-product-listing":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],"travel-destinations":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],"travel-review":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],"rewards-offers-detail":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],bare:[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],unset:[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],default:[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}]}},tmgAds.layout={viewport:"u",viewportWidth:"",getBreakpoint:function(e){var t="xs";return e>=tmgAds.plugins.sizemapping.s.size[0]&&(t="s"),e>=tmgAds.plugins.sizemapping.m.size[0]&&(t="m"),e>=tmgAds.plugins.sizemapping.l.size[0]&&(t="l"),e>=tmgAds.plugins.sizemapping.x.size[0]&&(t="x"),tmgAdsLog("tmgAds.layout.getBreakpoint -> width:"+tmgAds.layout.viewportWidth+" height:"+tmgAds.layout.viewportHeight+" size:"+tmgAds.layout.viewport),t},getViewportWidth:function(){return 0<=document.documentElement.clientWidth?document.documentElement.clientWidth:document.body&&0<=document.body.clientWidth?document.body.clientWidth:0<=window.innerWidth?window.innerWidth:0},getViewportHeight:function(){return 0<=document.documentElement.clientHeight?document.documentElement.clientHeight:document.body&&0<=document.body.clientHeight?document.body.clientHeight:0<=window.innerHeight?window.innerHeight:0},onresize:function(){tmgAds.layout.viewportHeight=tmgAds.layout.getViewportHeight(),tmgAds.layout.viewportWidth=tmgAds.layout.getViewportWidth(),tmgAds.layout.viewport=tmgAds.layout.getBreakpoint(tmgAds.layout.viewportWidth),"xs"==tmgAds.layout.viewport||"s"==tmgAds.layout.viewport||"m"==tmgAds.layout.viewport?tmgAds.layout.platform="mobile":tmgAds.layout.platform="desktop"},addEvent:function(e,t,s){null!==e&&"undefined"!=e&&(e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent?e.attachEvent("on"+t,s):e["on"+t]=s)}},tmgAds.page=tmgAdsGetPageData(),tmgAds.layout.onresize(),tmgAdsLog("Current viewport now: "+tmgAds.layout.viewport),tmgAdsLog("Creating an event handler for dealing with page layout changes ie; viewport change"),tmgAds.layout.addEvent(window,"resize",tmgAds.layout.onresize),tmgAds.plugins.headerBidders={active:!0,delayed:0,timeout:2e3,checkFreq:10,zones:[],amendprice:function(e){var t=100*parseFloat(e);return((1<=t&&t<=299?t:300<=t&&t<=2e3?5*Math.floor(t/5):2001<=t?100*Math.floor(t/100):0)/100).toFixed(2)},ix:{name:"ix",active:!0,bidstatus:"config",local:!1,async:!1,jsloc:function(){return!1},jsprod:"https://js-sec.indexww.com/ht/p/184224-249976729910975.js",jstest:"https://js-sec.indexww.com/ht/p/184224-249976729910975-stage.js",jsurl:"",loc:"head",exempt:["nat","tmg","inr","ftr"],siteId:888888,timeout:800,timeoutCount:0,video:{active:!1,url:"https://as-sec.casalemedia.com/playlist?ix_id=%5Bindex_epr%5D&ix_v=8&ix_s=208024&ix_ms=208154&ix_vt="},partners:{INDX:{targetingType:"slot",timeout:150}},preload:function(){tmgAds.plugins.headerBidders.ix.bidstatus="sent",tmgAdsPerf("mark",["ix_preload"]),window.headertag={},window.headertagconfig={siteId:tmgAds.plugins.headerBidders.ix.siteId,timeout:tmgAds.plugins.headerBidders.ix.timeout,partners:{INDX:{targetingType:tmgAds.plugins.headerBidders.ix.partners.INDX.targetingType,timeout:tmgAds.plugins.headerBidders.ix.partners.INDX.timeout}},callbackFn:tmgAds.plugins.headerBidders.ix.callback}},callback:function(){"timeout"!=tmgAds.plugins.headerBidders.ix.bidstatus&&(tmgAds.plugins.headerBidders.ix.bidstatus="received"),tmgAdsPerf("mark",["ix_callback"]),tmgAds.performance.ix.bidsReceived=Math.round(tmgAdsTimer()),tmgAds.performance.ix.timeToLoad=Math.round(tmgAds.performance.ix.bidsReceived-tmgAds.performance.ix.requested),tmgAdsLog("IX: headerbidding bids returned"),void 0!==typeof window.headertag&&!0===window.headertag.apiReady||(window.headertag=googletag,tmgAdsLog("IX: SUCCESS: window.headertag.apiReady is true - headertag object exists"))}},prebid:{name:"prebid",active:!0,debug:!1,version:"2",bidstatus:"config",local:!0,async:!1,jsloc:function(){return!1},jsprod:"https://static.telegraph.co.uk/telegraph-advertising/prebid/prebid1.16.0.s2s.appnexus.openx.js",jstest:"https://static.telegraph.co.uk/telegraph-advertising/prebid/prebid.js",jsurl:"",loc:"head",s2s:!1,zerorated:["appnexusgmsmprm","appnexusgmsmstd"],exempt:["nat","tmg","inr","ftr"],keynames:["hb_data","hb_pid"],timeout:1e3,timeoutCount:0,preload:function(){tmgAds.plugins.headerBidders.prebid.bidstatus="sent",tmgAdsPerf("mark",["prebid_preload"]),window.pbjs={},window.pbjs.cmd=[],window.pbjs.que=[],window.PREBID_TIMEOUT=tmgAds.plugins.headerBidders.prebid.timeout,tmgAds.performance.prebid={},pbjs.que.push(function(){pbjs.setConfig({debug:tmgAds.plugins.headerBidders.prebid.debug})}),tmgAds.plugins.headerBidders.prebid.s2s&&pbjs.que.push(function(){pbjs.setConfig({priceGranularity:"high",enableSendAllBids:!0,s2sConfig:{accountId:"1",enabled:tmgAds.plugins.headerBidders.prebid.s2s,bidders:["appnexus","openx"],timeout:tmgAds.plugins.headerBidders.prebid.timeout,adapter:"prebidServer",is_debug:tmgAds.plugins.headerBidders.prebid.debug,endpoint:"https://elb.the-ozone-project.com/openrtb2/auction",syncEndpoint:"https://elb.the-ozone-project.com/cookie_sync",cookieSet:!0,cookiesetUrl:"https://acdn.adnxs.com/cookieset/cs.js"},userSync:{iframeEnabled:!0}})}),pbjs.que.push(function(){pbjs.onEvent("auctionInit",function(){tmgAdsPerf("mark",["prebid_auctionInit"])}),pbjs.onEvent("auctionEnd",function(){tmgAdsPerf("mark",["prebid_auctionEnd"])}),pbjs.onEvent("bidAdjustment",function(){tmgAdsPerf("mark",["prebid_bidAdjustment"])}),pbjs.onEvent("bidTimeout",function(){tmgAdsPerf("mark",["prebid_bidTimeout"])}),pbjs.onEvent("bidRequested",function(){tmgAdsPerf("mark",["prebid_bidRequested"])}),pbjs.onEvent("bidResponse",function(){tmgAdsPerf("mark",["prebid_bidResponse"])}),pbjs.onEvent("bidWon",function(){tmgAdsPerf("mark",["prebid_bidWon"])}),pbjs.onEvent("setTargeting",function(){tmgAdsPerf("mark",["prebid_setTargeting"])}),pbjs.onEvent("requestBids",function(){tmgAdsPerf("mark",["prebid_requestBids"])})}),pbjs.que.push(function(){tmgAds.plugins.headerBidders.prebid.bids=tmgAdsPrebidReturnAdUnits(),pbjs.addAdUnits(tmgAds.plugins.headerBidders.prebid.bids),pbjs.aliasBidder("appnexus","appnexusclient"),pbjs.aliasBidder("appnexus","appnexusgmsmprm"),pbjs.aliasBidder("appnexus","appnexusgmsmstd"),pbjs.aliasBidder("openx","openxclient"),pbjs.requestBids(tmgAds.plugins.headerBidders.prebid.bidsBackHandler)})},bidsBackHandler:{bidsBackHandler:function(e){tmgAds.performance.prebid.bidsReceived=tmgAdsTimer();var t=[];for(var s in e){if(1!=e[s].bids[0].getStatusCode())switch(e[s].bids[0].adserverTargeting=e[s].bids[0].adserverTargeting||{hb_adid:"",hb_pb:""},e[s].bids[0].adserverTargeting.hb_adid="none",e[s].bids[0].getStatusCode()){case 0:e[s].bids[0].adserverTargeting.hb_pb="pending";break;case 2:e[s].bids[0].adserverTargeting.hb_pb="nobid";break;case 3:e[s].bids[0].adserverTargeting.hb_pb="timeout"}"s2s"==e[s].bids[0].source?e[s].bids[0].adBidder=e[s].bids[0].bidder+e[s].bids[0].source:e[s].bids[0].adBidder=e[s].bids[0].bidderCode;var d=s.split("-");e[s].bids[0].adserverTargeting.hb_pborigin=e[s].bids[0].adserverTargeting.hb_pb,e[s].bids[0].adserverTargeting.hb_pb=tmgAds.plugins.headerBidders.amendprice(e[s].bids[0].adserverTargeting.hb_pb),-1<tmgAds.plugins.headerBidders.prebid.zerorated.indexOf(e[s].bids[0].adBidder)&&(e[s].bids[0].adserverTargeting.hb_pb=0),e[s].bids[0].adSlot=d[0],e[s].bids[0].adType=d[0].split("_")[2],e[s].bids[0].placementId=d[1],tmgAds.performance.prebid["timeToRespond_"+e[s].bids[0].adSlot+"_"+e[s].bids[0].adBidder+"_"+e[s].bids[0].placementId]=e[s].bids[0].timeToRespond,e[s].bids[0].adData=e[s].bids[0].adBidder+"_"+e[s].bids[0].adserverTargeting.hb_pb+"_"+e[s].bids[0].size+"_"+e[s].bids[0].adType+"_"+e[s].bids[0].adserverTargeting.hb_adid+"_"+e[s].bids[0].placementId+"_"+e[s].bids[0].timeToRespond,t[e[s].bids[0].adSlot]=t[e[s].bids[0].adSlot]||{bids:[]},t[e[s].bids[0].adSlot].bids.push(e[s].bids[0])}tmgAds.plugins.headerBidders.prebid.bidResponse=t,"timeout"!=tmgAds.plugins.headerBidders.prebid.bidstatus&&(tmgAds.plugins.headerBidders.prebid.bidstatus="received"),tmgAdsPerf("mark",["prebid_callback"]),tmgAds.performance.prebid.bidsReceived=Math.round(tmgAdsTimer()),tmgAds.performance.prebid.timeToLoad=Math.round(tmgAds.performance.prebid.bidsReceived-tmgAds.performance.prebid.requested),tmgAds.plugins.headerBidders.prebid.callback(e)}},callback:function(){}},amazon:{name:"amazon",active:!0,bidstatus:"config",local:!1,async:!1,jsloc:function(){return!1},jsprod:"https://c.amazon-adsystem.com/aax2/apstag.js",jstest:"http://adtools.telegraph.co.uk/tmg/gpt/prebid/prebid-test.js",jsurl:"",loc:"head",exempt:["nat","tmg","inr","ftr"],adserver:"googletag",siteId:3461,keynames:["amznbid","amzniid","amznp","amznsz","amznresp"],timeout:2e3,timeoutCount:0,ssp:{"1yj0n4":"amazon","1yu87wg":"pubmatic","210wzk":"openx",jsaxhc:"rubicon"},preload:function(){tmgAds.plugins.headerBidders.amazon.bidstatus="sent",tmgAdsPerf("mark",["amazon_preload"]),window.amznads={},window.amznads.asyncParams={id:tmgAds.plugins.headerBidders.amazon.siteId,callbackFn:tmgAds.plugins.headerBidders.amazon.callback}},callback:function(){apstag.init({pubID:tmgAds.plugins.headerBidders.amazon.siteId,adServer:tmgAds.plugins.headerBidders.amazon.adserver}),tmgAds.plugins.headerBidders.amazon.fetchBids()},fetchBids:function(){apstag.fetchBids(tmgAdsGetAmazonSlots(tmgAds),function(e){"timeout"!=tmgAds.plugins.headerBidders.amazon.bidstatus&&(tmgAds.plugins.headerBidders.amazon.bidstatus="received"),tmgAdsPerf("mark",["amazon_callback"]),tmgAds.performance.amazon.bidsReceived=tmgAdsTimer(),tmgAds.performance.amazon.timeToLoad=tmgAds.performance.amazon.bidsReceived-tmgAds.performance.amazon.requested,tmgAds.plugins.headerBidders.amazon.bids=e;for(var t=0;t<e.length;t++)tmgAdsLog("AMAZON: Bid-Response: ",results[t])})}}},tmgAdsLog("TMG-GPT-"+tmgAds.about.version+" - "+tmgAds.about.date),tmgAdsLog("SUCCESS: tmgAdsInit() initialisation"),tmgAdsLog("##################################################################################################################"),tmgAdsEvent("tmggpt-init:end")}catch(e){tmgAdsLog("ERROR: tmgAdsInit() failed -> error="+e.message,tmgAds)}}function tmgAdsPerf(e,t){if(void 0!==window.RUM){if(tmgAdsLog("SUCCESS: RUM installed.... go go go go! - "+e+" - "+t[0]),"now"==e)return RUM.now();if("mark"==e)return tmgAds.metrics[t[0]]=tmgAdsTimer(),RUM.mark(t[0]);if("measure"==e)return RUM.measure(t[0],t[1],t[2])}else if(void 0!==window.performance){if(tmgAdsLog("WARNING: RUM NOT installed.... using window.performance API instead! - "+e+" - "+t[0]),tmgAds.log.push("Performance: RUM Not installed, using performance API - "+e+" - "+t[0]),"now"==e)return window.performance.now();if("mark"==e)return tmgAds.metrics[t[0]]=tmgAdsTimer(),window.performance.mark(t[0]);if("measure"==e)return window.performance.measure(t[0],t[1],t[2])}else{if(tmgAdsLog("WARNING: RUM NOT installed AND window.performance not supported... - "+e+" - "+t[0]),tmgAds.log.push("Performance: No RUM, No perrformance API - "+e+" - "+t[0]),"now"==e)return RUM.now();if("mark"==e)return void(tmgAds.metrics[t[0]]=tmgAdsTimer());if("measure"==e)return}}function tmgAdsGetObj(e){return window[e]}function tmgAdsInitConfig(){try{tmgAdsEvent("tmggpt-init-conf:start"),tmgAds.config={viewportstatus:!0,refurl:!0,adsizematrix_:tmgAds.plugins.sizemapping.default,model:tmgAds.plugins.model},tmgAds.config.deliveryModels=tmgAds.model,tmgAdsLog("SUCCESS: tmgAdsInitConfig() initialisation"),tmgAdsLog("##################################################################################################################"),tmgAdsEvent("tmggpt-init-conf:end")}catch(e){tmgAdsLog("ERROR: tmgAdsInitConfig() failed -> error="+e.message),tmgAdsEvent("tmggpt-init-conf:end")}}function tmgAdsInitData(){for(var e in tmgAdsEvent("tmggpt-init-data:start"),tmgAds.counters={},tmgAds.metatags={},tmgAds.page=tmgAdsGetPageData(),tmgAds.tmg=tmgAdsGetTMGUserData(),tmgAds.google=tmgAdsGetGoogleData(),tmgAds.adobe=tmgAdsGetAdobe(),tmgAds.browser=tmgAdsGetBrowserData(),tmgAds.flash=tmgAdsFlashDetect(),tmgAds.cookies={all:document.cookie},tmgAds.cookies.adops=tmgAdsGetTMGCookies("adops"),tmgAds.adsafe=tmgAdsGetAdsafeBlocks(),tmgAds.page.cms=tmgAdsGetCMS(),tmgAds.plugins.blockdomain)tmgAds.plugins.blockdomain.hasOwnProperty(e)&&tmgAds.page.domain==tmgAds.plugins.blockdomain[e]&&(tmgAds.plugins.adkill=!0,tmgAdsLog("tmgAdsInitConfig: This page is being viewed through one of our AEM preview instances, turning ads off in: "+tmgAds.plugins.blockdomain[e]));void 0===window.optimize?(tmgAdsLog("OPTIMIZELY: WARNING -> window.optimize is not defined, creating empty obj"),window.optimize=window.optimize||{activeExperiments:[]}):tmgAdsLog("OPTIMIZELY: window.optimize is defined"),tmgAds.optimizely=window.optimize.activeExperiments,tmgAdsLog("SUCCESS: tmgAdsInitData() initialisation"),tmgAdsLog("##################################################################################################################"),tmgAdsEvent("tmggpt-init-data:end")}function tmgAdsInitDFP(){tmgAdsEvent("tmggpt-init-dfp:start"),tmgAds.dfp=tmgAdsGetDFPData(),tmgAds.dfp.customvars=tmgAdsGetGPTCustomVars(),tmgAds.dfp.gpt=tmgAdsGetGPTSetup(tmgAds.dfp.gpt),tmgAds.dfp.adunit="/"+tmgAds.dfp.networkid+"/"+tmgAds.dfp.sitezone,tmgAdsLog("AdUnit set to: "+tmgAds.dfp.adunit),tmgAds.geo=tmgAdsGetGeoAPI(),tmgAdsAdjustSizeMapping(),tmgAds.adCount=0,tmgAds.dynCount=0,tmgAdsEvent("tmggpt-init-dfp:end")}function tmgAdsInitEventHandlers(){tmgAdsLog("Called: tmgAdsInitEventHandlers()");try{var e=document.addEventListener||document.attachEvent,t=(document.removeEventListener||document.detachEvent,document.addEventListener?"DOMContentLoaded":"onreadystatechange");e.call(document,t,function(){("DOMContentLoaded"===t||"onreadystatechange"===t&&"complete"===document.readyState)&&(tmgAdsLog("SUCCESS: DOMContentLoaded/onreadystatechange = complete: Page has loaded, DOM ready."),tmgAdsOnPageLoad(tmgAds))}),googletag.cmd.push(function(){googletag.pubads().addEventListener("slotRenderEnded",function(e){tmgAdsActionEventHandler("slotRenderEnded",e)}),googletag.pubads().addEventListener("impressionViewable",function(e){tmgAdsActionEventHandler("impressionViewable",e)}),googletag.pubads().addEventListener("slotVisibilityChanged",function(e){tmgAdsActionEventHandler("slotVisibilityChanged",e)})}),document.addEventListener("tmg:init-ads",function(e){for(var t in tmgAdsEvent("tmggpt-init-ads:start"),tmgAdsInitData(),tmgAdsInitDFP(tmgAds),tmgAds.ads)tmgAds.ads.hasOwnProperty(t)&&(googletag.destroySlots([tmgAds.ads[t].adslot]),googletag.cmd.push(tmgAdsBuildAd(tmgAds.ads[t].div,"","").display()));tmgAdsEvent("tmggpt-init-ads:end")}),document.addEventListener("tmgAds:tmggpt-revertStickyBanner",function(e){tmgAdsActionEventHandler("tmgAds_tmggpt-revertStickyBanner")}),document.addEventListener("tmgAds:tmggpt-collapseStickyAdslot",function(e){tmgAdsActionEventHandler("tmgAds_tmggpt-collapseStickyAdslot")}),document.addEventListener("tmgAds:tmggpt:initstart",function(e){tmgAdsPerf("mark",["adverts_tmggpt_start"])}),document.addEventListener("tmgAds:tmggpt:initend",function(e){tmgAdsPerf("mark",["adverts_tmggpt_end"]),tmgAdsPerf("measure",["adverts_tmggpt_loadtime","adverts_tmggpt_start","adverts_tmggpt_end"])}),document.addEventListener("tmgAds:tmggpt:pageload",function(e){tmgAdsPerf("mark",["adverts_tmggpt_pageload"]),tmgAdsPerf("mark",["adverts_page_end"])}),document.addEventListener("tmgAds:headerbid:reload",function(e){tmgAdsPerf("mark",["adverts_headerbid_reload"]),tmgAdsInitHeaderBidders(tmgAds)})}catch(e){tmgAdsLog("ERROR: tmgAdsInitEventHandlers() - failed -> error="+e.message)}}function tmgAdsActionEventHandler(e,t){try{switch(e){case"tmgAds_tmggpt-revertStickyBanner":tmgAdsLog("tmgAds_tmggpt-revertStickyBanner: removing is-sticky class from advert_tmg_ban"),document.getElementById("advert_tmg_ban").parentNode.classList.remove("is-sticky"),tmgAds.plugins.mytelegraph.isApplied&&(document.getElementsByClassName("my-telegraph")[0].style.top="0px");break;case"tmgAds_tmggpt-collapseStickyAdslot":tmgAdsLog("We will now close down the sticky ad for the this adunit: "+tmgAds.config.deliveryModel.model),document.getElementById("advert_tmg_"+tmgAds.config.deliveryModel.model).style.height="0px",setTimeout(function(){document.getElementsByClassName("is-sticky")[0].style.height="0px"},1e3);break;case"slotRenderEnded":var s={timestamp:tmgAdsTimer(),advertiserId:t.advertiserId,campaignId:t.campaignId,lineItemId:t.lineItemId,creativeId:t.creativeId,esid:null,epid:null,optimisely:null,moat:"https://z.moatads.com/telegraphdfp799172313855/moatad.js#moatClientLevel1="+t.advertiserId+"&moatClientLevel2="+t.camapignId+"&moatClientLevel3="+t.lineItemId+"&moatClientLevel4="+t.creativeId+"&moatClientSlicer1=null&moatClientSlicer2=null&zMoatPS="+t.slot.getTargeting("at")+"&zMoatSZ="+t.size[0]+"x"+t.size[1]+"&zMoatPT="+t.slot.getTargeting("pt")+"&zMoatVP="+t.slot.getTargeting("vp")+"&zMoatOP=null&zMoatST="+t.slot.getTargeting("sc"),sz:t.size[0]+"x"+t.size[1],natid:t.slot.getTargeting("natid"),nattype:t.slot.getTargeting("nattype"),div:t.slot.getTargeting("div"),pos:t.slot.getTargeting("pos"),at:t.slot.getTargeting("at"),pt:t.slot.getTargeting("pt"),vp:t.slot.getTargeting("vp"),sc:t.slot.getTargeting("sc")};tmgAdsLog("EVENT: "+e+" lineItemId:"+t.lineItemId+"  -  creativeId:"+t.creativeId+" - size:"+t.size+" - isEmpty:"+t.isEmpty+" - slotContentChanged:"+t.slotContentChanged,t),void 0===tmgAds.metrics.tmggptAdFirstAdRendered&&(tmgAdsLog("tmgAds.metrics.tmggptAdFirstAdRendered is not defined, setting this now"),tmgAdsPerf("mark",["adverts_metrics_firstadloaded"]),tmgAds.metrics.tmggptAdFirstAdRendered=s.timestamp,tmgAds.metrics.metricTimeToRenderFirstAd=tmgAds.metrics.tmggptAdFirstAdRendered),tmgAdsPerf("mark",["adverts_loaded_"+s.at]),tmgAds.metrics.tmggptAdLastAdRendered=s.timestamp,tmgAds.metrics.metricTimeToRenderAllAds=tmgAds.metrics.tmggptAdLastAdRendered-tmgAds.metrics.tmggptAdFirstAdQueued;var d=document.getElementById(s.div);if(t.isEmpty)d.classList.add("is-empty"),d.classList.remove("is-loaded"),d.style.height=0,d.style.opacity=0,tmgAdsLog("Ad is EMPTY we have nothing to transition - "+s.div);else{if(d.classList.add("is-loaded"),d.classList.remove("is-empty"),"nat"==s.at?(tmgAds.plugins.adamazona9on&&console.log("ADTYPE: ",s),"nat_story_list_onward_mob"==s.natid&&(tmgAdsLog("NATIVE: list component - setting marginTop/marginBottom = -16px"),d.style.marginTop="-16px",d.style.marginBottom="-16px"),"nat_story_sparkbrain_1"!=s.natid&&"nat_story_sparkbrain_2"!=s.natid&&"nat_story_outbrain"!=s.natid||(("x"==s.vp||"l"==s.vp||"m"==s.vp)&&(s.marginBottom="0px"),("xs"==s.vp||"s"==s.vp)&&(s.marginBottom="0px"),d.style.marginBottom=s.marginBottom,tmgAdsLog("NATIVE:: "+s.natid+" :: vp="+s.vp+" :: setting marginBottom = "+s.marginBottom)),d.style.height="auto"):d.style.height=t.size[1]+"px",d.style.backgroundColor="#FFFFFF",d.style.opacity=1,"mpu"!=s.at&&"hpg"!=s.at||"x"!=s.vp&&"l"!=s.vp||(d.style.width=t.size[0]+"px"),"mytelegraph"==tmgAds.page.businessseg&&("x"==s.vp||"l"==s.vp||"m"==s.vp?d.style.height=t.size[1]+15+"px":(d.style.height=t.size[1]+30+"px",d.style.paddingTop="15px")),tmgAds.plugins.mytelegraph.isApplied&&"desktop"==tmgAds.plugins.mytelegraph.isPlatform&&("ban"==s.at||"mpu"==s.at)){if("mpu"==s.at&&("story"==tmgAds.page.pagetype||"live"==tmgAds.page.pagetype||"video"==tmgAds.page.pagetype)){d.style.paddingTop="25px",d.style.height=t.size[1]+25+"px"}"ban"!=s.at||"index"!=tmgAds.page.pagetype&&"topic"!=tmgAds.page.pagetype||(document.getElementById("advert_tmg_ban").style.backgroundColor="#FFFFFF",document.getElementById("advert_tmg_ban").parentNode.style.backgroundColor="#FFFFFF","m"!=tmgAds.layout.viewport&&"ban"==tmgAds.config.deliveryModel.activityStatus&&(document.getElementsByClassName("my-telegraph")[0].style.top=t.size[1]+16+"px"))}tmgAdsLog("Ad is rendered, transition height/opacity")}void 0!==tmgAds.metrics.ads[s.at]&&(tmgAds.metrics.ads[s.at].rendered=tmgAdsTimer(),tmgAds.metrics.ads[s.at].rendertime=Number((tmgAds.metrics.ads[s.at].rendered-tmgAds.metrics.ads[s.at].queued).toFixed(3))),tmgAds.plugins.adviewability&&(console.log("VIEWABILITY: we are testing non-creative-wrapper delivered "),tmgAdsLoadJS("moat-"+s.div,s.moat,{},function(){console.log("VIEWABILITY: Moat")}),tmgAdsLoadJS("ias-"+s.div,s.ias,{},function(){console.log("VIEWABILITY: IAS")}));break;case"impressionViewable":tmgAds.metrics.ads[t.slot.getTargeting("at")].viewable=!0;break;case"slotVisibilityChanged":tmgAdsLog("EVENT: "+e+" lineItemId:"+t.lineItemId+"  -  creativeId:"+t.creativeId+" - size:"+t.size+" - isEmpty:"+t.isEmpty+" - slotContentChanged:"+t.slotContentChanged,t),tmgAds.metrics.ads[t.slot.getTargeting("at")].viewability=t.inViewPercentage,tmgAds.metrics.ads[t.slot.getTargeting("at")].creativeId=t.creativeId,t.inViewPercentage<100&&tmgAds.config.deliveryModel.sticky&&t.slot.getTargeting("at")==tmgAds.config.deliveryModel.model&&(tmgAds.config.viewportstatus=!1,tmgAdsLog("EVENT: Viewability Changed - "+t.inViewPercentage),tmgAdsLog("PAUSE ad due to viewability < 100% - ["+t.inViewPercentage+"]")),100==t.inViewPercentage&&tmgAds.config.deliveryModel.sticky&&t.slot.getTargeting("at")==tmgAds.config.deliveryModel.model&&(tmgAds.config.viewportstatus=!0,tmgAdsLog("EVENT: Viewability Changed - "+t.inViewPercentage),tmgAdsLog("START ad has returned to 100%"));break;case"impressionViewable":tmgAdsLog("EVENT: "+e+" lineItemId:"+t.lineItemId+"  -  creativeId:"+t.creativeId+" - size:"+t.size+" - isEmpty:"+t.isEmpty+" - slotContentChanged:"+t.slotContentChanged,t)}}catch(e){tmgAdsLog("ERROR: tmgAdsActionEventHandler() - failed -> error="+e.message,t)}}function tmgAdsInitGeoAPIStatus(){try{void 0!==window.googletag?tmgAds.plugins.gpt.setLocation?(tmgAdsLog("tmgAdsGeoAPIStatus: obj.plugins.gpt.setLocation is ACTIVATED for this site - now lets check if the browsers currently supports the Geo-API feature"),1==tmgAds.geo.supported?(tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.supported IS supported - now lets check if the browser supports this feature"),1==tmgAds.geo.available?(tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.available IS available - setting the following: googletag.setLocation("+tmgAds.geo.api.longitude+", "+tmgAds.geo.api.latitude+", "+tmgAds.geo.api.accuracy+") [longitude,latitude,accuracy]"),googletag.cmd.push(function(){googletag.setLocation(tmgAds.geo.api.longitude,tmgAds.geo.api.latitude,tmgAds.geo.api.accuracy)})):tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.available IS NOT available")):tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.supported IS NOT supported.")):tmgAdsLog("tmgAdsGeoAPIStatus: obj.plugins.gpt.setLocation is NOT ACTIVATED for this site."):tmgAdsLog("tmgAdsGeoAPIStatus: WARNING: googletag obj does not exist")}catch(e){tmgAdsLog("ERROR: tmgAdsInitGeoAPIStatus() - failed -> error="+e.message,event)}}function tmgAdsGetSizeMatrix(){tmgAdsLog("Called");return{ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60]],mpu:[[300,1050],[300,600],[300,250]],sky:[[300,1050],[300,600],[300,250],[160,600],[120,600]],hpg:[[300,1050],[300,600],[300,250],[160,600],[120,600]],mob:[[300,250],[320,100],[320,50],[300,50]],nat:"fluid",com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"}}function tmgAdsGetDFPData(){var e={pos:0,tile:0,adserver:tmgAds.plugins.gpt.servername,networkid:tmgAds.plugins.gpt.networkid,site:tmgAds.page.site,sitename:"tmg.telegraph."+tmgAds.page.site,zonename:tmgAds.page.zone.substr(0,100),sitezone:"tmg.telegraph."+tmgAds.page.site+"/"+tmgAds.page.zone.substr(0,100),ord:Number(new Date)};return tmgAds.plugins.adteston&&(console.log("tmgAdsGetDFPData: adteston has been declared, we now change adunits to tmg.telegraph.test/test"),e.site="test",e.sitename="tmg.telegraph.test",e.zonename="tmg.telegraph.test/test",e.sitezone="tmg.telegraph.test/test"),tmgAdsLog("tmgads.dfp.site     = "+e.site),tmgAdsLog("tmgads.dfp.sitename = "+e.sitename),tmgAdsLog("tmgads.dfp.zonename = "+e.zonename),tmgAdsLog("tmgads.dfp.sitezone = "+e.sitezone),e}function tmgAdsAdjustSizeMapping(){tmgAdsLog("Called"),"puzzles"==tmgAds.dfp.site&&(tmgAdsLog("ALERT: site is not covered by default sizeing values, we are resetting these now -> at=ban -> site="+tmgAds.dfp.site),tmgAds.config.adsizematrix.ban=[[468,60],[728,90],[900,250],[940,250]],tmgAds.plugins.sizemapping.x.ban=[[468,60],[728,90],[900,250],[940,250]],tmgAds.plugins.sizemapping.l.ban=[[468,60],[728,90],[900,250],[940,250]],tmgAds.plugins.sizemapping.m.ban=[[468,60],[728,90],[900,250],[940,250]],tmgAds.plugins.sizemapping.s.ban=[[468,60],[728,90],[900,250],[940,250]],tmgAds.plugins.sizemapping.xs.ban=[[468,60],[728,90],[900,250],[940,250]]),"fantasyfootball"==tmgAds.dfp.site&&(tmgAdsLog("ALERT: site is not covered by default sizing values, we are resetting these now -> site="+tmgAds.dfp.site),tmgAds.config.adsizematrix.ban=[728,90],tmgAds.plugins.sizemapping.x.ban=[728,90],tmgAds.plugins.sizemapping.l.ban=[728,90],tmgAds.plugins.sizemapping.m.ban=[728,90],tmgAds.plugins.sizemapping.s.ban=[320,50],tmgAds.plugins.sizemapping.xs.ban=[320,50],tmgAds.config.adsizematrix.mpu=[[300,250],[300,600]],tmgAds.plugins.sizemapping.x.mpu=[[300,250],[300,600]],tmgAds.plugins.sizemapping.l.mpu=[[300,250],[300,600]],tmgAds.plugins.sizemapping.m.mpu=[[300,250],[300,600]],tmgAds.plugins.sizemapping.s.mpu=[300,250],tmgAds.plugins.sizemapping.xs.mpu=[300,250]),"courses"!=tmgAds.dfp.site&&"clearing"!=tmgAds.dfp.site||(tmgAds.config.adsizematrix.mpu=[300,250],tmgAds.plugins.sizemapping.x.mpu=[300,250],tmgAds.plugins.sizemapping.l.mpu=[300,250],tmgAds.plugins.sizemapping.m.mpu=[300,250],tmgAds.plugins.sizemapping.s.mpu=[300,250],tmgAds.plugins.sizemapping.xs.mpu=[300,250])}function tmgAdsGetCMS(){tmgAdsLog("Called:");var e="unknown";return tmgAdsLog("ascertaining which CMS is being used"),tmgAdsLog("tmgAds.page.businessseg="+tmgAds.page.businessseg),null===tmgAds.page.businessseg||void 0===tmgAds.page.businessseg?(tmgAdsLog("would appear we are using eScenic"),e="escenic"):(tmgAdsLog("would appear we are using AEM"),e="aem"),tmgAdsLog("returning the following values cms="+e),e}function tmgAdsGetAdobe(){var e={amcv:"unavailable",aam_uuid:"unavailable"};return void 0!==window._satellite?(e.amcv=window._satellite.getVisitorId().getMarketingCloudVisitorID(),e.aam_uuid=tmgAdsGetCookie("aam_uuid")):tmgAdsLog("WARNING:: Adobe _satellite object no available...."),e}function tmgAdsGetGoogleData(){tmgAdsLog("Called:");return{}}function tmgAdsGetTMGUserData(){tmgAdsLog("Called:");var e={premt:tmgAdsGetMetaTag("DCSext.pd"),premo:tmgAds.page.dataLayer.premiumOverride,premc:tmgAds.page.dataLayer.premiumContent,session:tmgAdsGetCookie("tmg_session"),rem:tmgAdsGetCookie("tmg_rem"),pid:tmgAdsGetCookie("tmg_pid"),p13n:tmgAdsGetCookie("tmg_p13n"),tmg_subs_referer:tmgAdsGetCookie("tmg_subs_referer"),tmg_authz_session:tmgAdsGetCookie("tmg_authz_session"),tmg_meter_count:tmgAdsCsvToObj(tmgAdsGetCookie("tmg_meter_count"),",",":"),tmg_web_trends:tmgAdsCsvToObj(tmgAdsGetCookie("tmg_web_trends"),",",":")};return"object"==typeof window.tmg?tmg.hasOwnProperty("user")?(tmg.user.hasOwnProperty("isSubscriber")&&(e.isSubscriber=tmg.user.isSubscriber()),tmg.user.hasOwnProperty("isRegistered")&&(e.isRegistered=tmg.user.isRegistered()),tmg.user.hasOwnProperty("isLoggedIn")&&(e.isLoggedIn=tmg.user.isLoggedIn())):(e.isSubscriber=null,e.isRegistered=null,e.isLoggedIn=null,e.profile=null):("mytelegraph"==tmgAds.page.businessseg?(e.isSubscriber="unknown",e.isRegistered=!0,e.isLoggedIn=!0):(e.isSubscriber="unknown",e.isRegistered="unknown",e.isLoggedIn="unknown"),e.profile={}),0==e.premt?e.premt=!0:e.premt=!1,window.JSON&&void 0!==e.tmg_subs_referer?(tmgAdsLog("window.JSON supported AND tmg_subs_referer cookie exists"),"undefined"!=e.tmg_subs_referer&&(e.tmg_subs_referer=JSON.parse(e.tmg_subs_referer),tmgAdsLog("JSON.parse(tmp.tmg_subs_referer)="+e.tmg_subs_referer))):tmgAdsLog("either window.JSON not supported or no tmg_subs_referer cookie"),e}function tmgAdsGetGPTSetup(e){tmgAdsLog("Called:");var t=e||{};if(t.setTargeting=[],t.setTargetingStr=[],t.customvarstr="",void 0!==tmgAds.dfp.customvars)for(var s in tmgAdsLog("tmgAds.dfp.customvars exists - iterating through tmgAds.dfp.customvars"),tmgAds.dfp.customvars)tmgAds.dfp.customvars.hasOwnProperty(s)&&""!==tmgAds.dfp.customvars[s]&&(tmgAds.dfp.customvars[s]instanceof Array?(tmgAdsLog("adding tmgAds.dfp.customvars["+s+"] as Array()"),t.setTargeting.push(".setTargeting('"+s+"',tmgAds.dfp.customvars['"+s+"'])"),t.setTargetingStr+=".setTargeting('"+s+"',tmgAds.dfp.customvars['"+s+"'])"):null!==tmgAds.dfp.customvars[s]?(tmgAdsLog("adding tmgAds.dfp.customvars["+s+"]="+tmgAds.dfp.customvars[s]),t.setTargeting.push(".setTargeting('"+s+"','"+tmgAds.dfp.customvars[s]+"')"),t.setTargetingStr+=".setTargeting('"+s+"','"+tmgAds.dfp.customvars[s]+"')"):tmgAdsLog("tmgAds.dfp.customvars["+s+"] is null, omitting from tag"),t.customvarstr+="&"+s+"="+tmgAds.dfp.customvars[s]);else tmgAdsLog("tmgAds.dfp.customvars does not exist");return t.customvarstr=t.customvarstr.substring(1),t}function tmgAdsGetGPTCustomVars(){function e(e){var t="unknown";return!0===e&&(t="yes"),!1===e&&(t="no"),t}var t={};return void 0!==tmgAds.about.version&&(t.ver=tmgAds.about.version),void 0!==tmgAds.page.section&&(t.sc=tmgAds.page.section),void 0!==tmgAds.page.pagetype&&(t.pt=tmgAds.page.pagetype),void 0!==tmgAds.page.level&&(t.lvl=tmgAds.page.level),void 0!==tmgAds.browser.biw&&(t.biw=tmgAds.browser.biw),void 0!==tmgAds.browser.bih&&(t.bih=tmgAds.browser.bih),void 0!==tmgAds.browser.language&&(t.lang=tmgAds.browser.language.toLowerCase()),void 0!==tmgAds.flash.versionMaj&&(t.fv=tmgAds.flash.versionMaj),void 0!==tmgAds.plugins.dnt.active&&(t.dnt=tmgAds.plugins.dnt.state),void 0!==tmgAds.page.protocol&&(t.protocol=tmgAds.page.protocol.substring(0,tmgAds.page.protocol.length-1)),void 0!==tmgAds.page.domain&&(t.rd=tmgAds.page.domain),void 0!==tmgAds.page.cms&&(t.cms=tmgAds.page.cms),void 0!==tmgAds.page.keywords&&(t.kw=tmgAds.page.keywords),void 0!==tmgAds.page.geo&&(t.geo=tmgAds.page.geo),void 0!==tmgAds.page.editorschoice&&(t.ec=tmgAds.page.editorschoice),void 0!==tmgAds.page.mostviewed&&(t.mv=tmgAds.page.mostviewed),void 0!==tmgAds.page.mostshared&&(t.ms=tmgAds.page.mostshared),void 0!==tmgAds.page.videosrc&&(t.vidsrc=tmgAds.page.videosrc),void 0!==tmgAds.page.articleid&&(t.pg=tmgAds.page.articleid),void 0!==tmgAds.page.gamp&&(t.gamp=tmgAds.page.gamp),void 0!==tmgAds.page.refresh?t.refresh=tmgAds.page.refresh:t.refresh=0,void 0!==tmgAds.page.docdom&&(t.docdom=tmgAds.page.docdom),void 0!==tmgAds.grapeshot&&(t.gs=tmgAds.grapeshot.dfp),void 0!==tmgAds.layout.platform&&(t.platform=tmgAds.layout.platform),void 0!==tmgAds.layout.viewport&&(t.vp=tmgAds.layout.viewport),void 0!==tmgAds.page.keywords&&(t.kw=tmgAds.page.keywords),void 0!==tmgAds.adsafe.blocked&&(t.adsafe=tmgAds.adsafe.blocked),tmgAds.page.dataLayer.premiumContent?t.premc=tmgAds.page.dataLayer.premiumContent:t.premc="false",tmgAds.page.dataLayer.premiumOverride?t.premo=tmgAds.page.dataLayer.premiumOverride:t.premo="false",tmgAds.tmg.premt?t.premt=tmgAds.tmg.premt:t.premt="false",void 0!==tmgAds.tmg.tmg_meter_count?t.tmgmvc=tmgAds.tmg.tmg_meter_count.vars.meter_viewed_count:t.tmgmvc="none",void 0!==tmgAds.tmg.tmg_meter_count?t.tmgmu=tmgAds.tmg.tmg_meter_count.vars.meter_user_viewed:t.tmgmu="none",null!==typeof tmgAds.tmg.isSubscriber&&(t.tmgsub=e(tmgAds.tmg.isSubscriber)),null!==typeof tmgAds.tmg.isRegistered&&(t.tmgreg=e(tmgAds.tmg.isRegistered)),null!==typeof tmgAds.tmg.isLoggedIn&&(t.tmglin=e(tmgAds.tmg.isLoggedIn)),void 0!==tmgAds.plugins.beemray.dfp?t.beemray=tmgAds.plugins.beemray.dfp:t.beemray="none",void 0!==tmgAds.adobe.amcv?t.amcv=tmgAds.adobe.amcv:t.amcv="none",void 0!==tmgAds.adobe.aam_uuid?t.aam=tmgAds.adobe.aam_uuid:t.aam="none",!1!==typeof tmgAds.plugins.adtest&&(t.test=tmgAds.plugins.adtest),tmgAds.plugins.adtest&&(t.test=tmgAds.plugins.adtest),tmgAds.plugins.refurl?t.refurl=tmgAds.page.url:t.refurl="inactive",tmgAds.plugins.donottrack?t.dnt=tmgAds.plugins.donottrack:t.dnt="inactive",t.admodel=tmgAds.config.deliveryModel.activityStatus+"-"+tmgAds.config.deliveryModel.minHeight+"-"+tmgAds.config.deliveryModel.refreshRate+"-"+tmgAds.config.deliveryModel.refreshCycle,t.sticky=0,"default"!==tmgAds.config.deliveryModel.activityStatus&&"none"!==tmgAds.config.deliveryModel.activityStatus&&(t.sticky=1),void 0!==tmgAds.optimizely?0<tmgAds.optimizely.length?(tmgAdsLog("OPTIMIZELY: activeExperiments found, adding to the CustVars: "+tmgAds.optimizely),t.optimizely=tmgAds.optimizely):tmgAdsLog("OPTIMIZELY: No activeExperiments found."):tmgAdsLog("OPTIMIZELY: tmgAds.optimizely not defined."),t}function tmgAdsGetAdsafeBlocks(){var e={};return 1==tmgAds.config.adsafe?(tmgAdsLog("tmgAds.config.adsafe = ON"),void 0!==window.tmgAdsafe?(tmgAdsLog("window.tmgAdsafe exists"),void 0!==window.tmgAdsafe.blocked?(tmgAdsLog("window.tmgAdsafe.blocked exists"),tmgAdsLog("adding tmgAdsafe data"),e.blocked=window.tmgAdsafe.blocked):tmgAdsLog("window.tmgAdsafe.blocked does not exists")):tmgAdsLog("window.tmgAdsafe does NOT exist")):tmgAdsLog("tmgAds.config.adsafe = OFF"),e}function tmgAdsLog(e,t){if("undefined"!=typeof tmgAds&&void 0!==tmgAds.plugins&&void 0!==tmgAds.plugins.adconsole&&!0===tmgAds.plugins.adconsole){var s={time:("00"+(tmgAdsTimer()/1e3).toFixed(5)).slice(-9),callee:null,extra:t,styling:"",css:{none:"background: #FFFFFF; color: #000000",alert:"background: #D4A6A6; color: #000000",success:"background: #B2D8B2; color: #000000",error:"background: #FFB2B2; color: #000000",warning:"background: #FFE4B2; color: #000000",optimizely:"background: #FFDD37: color: #000000",event:"background: #C0CEDC; color: #000000"},msg:e};arguments.callee.caller&&(s.callee=arguments.callee.caller.name),s.msg="%c[TMG-GPT]["+s.time+"]["+(s.callee+"                         ").substr(0,25)+"]: "+s.msg,s.styling=s.css.none,"ALERT"==e.substr(0,5)&&(s.styling=s.css.alert),"OPTIMIZELY"==e.substr(0,10)&&(s.styling=s.css.optimizely),"SUCCESS"==e.substr(0,7)&&(s.styling=s.css.success),"ERROR"==e.substr(0,5)&&(s.styling=s.css.error),"WARNING"==e.substr(0,7)&&(s.styling=s.css.warning),"EVENT"==e.substr(0,5)&&(s.styling=s.css.event),"INFO"==e.substr(0,4)&&(s.styling=s.css.info),tmgAds.log.push(s.msg),console.log(s.msg,s.styling)}}function tmgAdsGetObjSize(e){for(var t=[],s=[e],d=0;s.length;){var i=s.pop();if("boolean"==typeof i)d+=4;else if("string"==typeof i)d+=2*i.length;else if("number"==typeof i)d+=8;else if("object"==typeof i&&-1===t.indexOf(i))for(var a in t.push(i),i)s.push(i[a])}return d/1024}function tmgAdsGetGeoAPI(){tmgAdsLog("Called:");var t={available:0,supported:0,api:{},position:{}};return tmgAds.plugins.gpt.setLocation?(navigator.geolocation.getCurrentPosition(function(e){t.api=e.coords,t.position=e.coords,t.available=1,t.supported=1,tmgAdsLog("GeoAPI success -> position.coords="+e.coords)},function(e){t.available=0,t.supported=-1,tmgAdsLog("GeoAPI failed: "+e)}),tmgAdsLog("navigator.geolocation supported in this browser")):tmgAdsLog("navigator.geolocation not supported in this browser"),t}function tmgAdsGetMetaTag(t){try{var e=null;if(null!==document.getElementsByName(t)[0]&&void 0!==document.getElementsByName(t)[0]){if(tmgAdsLog("tmgAdsGetMetaTag("+t+"): document.getElementsByName('"+t+"')[0] exists"),0<document.getElementsByName(t)[0].content.length&&(e=document.getElementsByName(t)[0].content.toLowerCase(),tmgAdsLog("tmgAdsGetMetaTag("+t+'): "'+(e="tmgads.articleid"==t?decodeURIComponent(document.getElementsByName(t)[0].content):decodeURIComponent(document.getElementsByName(t)[0].content.toLowerCase()))+'"')),"tmgads.keywords"==t)if(null!==e){e=e.split(",");for(var s=0;s<e.length;s++)String.prototype.trim?e[s]=e[s].trim():null!==typeof e[s]?e[s]=e[s].replace(/^\s\s*/,"").replace(/\s\s*$/,""):tmgAdsLog("tmgAdsGetMetaTag("+t+'): tmp[i] is null -> "'+e[s]+'"'),tmgAdsLog("tmgAdsGetMetaTag("+t+'): tmgads.keywords -> "'+e[s]+'"')}else tmgAdsLog("tmgAdsGetMetaTag("+t+"): tmgads.keywords -> tmgads.keywords content is not set")}else tmgAdsLog("tmgAdsGetMetaTag("+t+"): document.getElementsByName('"+t+"')[0] does not exist -> "+e);return tmgAds.data.metatags[t]=e}catch(e){tmgAdsLog("ERROR: tmgAdsGetMetTag("+t+") failed -> error="+e.message)}}function tmgAdsGetPageData(){try{tmgAdsLog("Called:");var e={zone:"unknown",url:location.protocol+"//"+location.host+location.pathname,url_full:location.href,referrer:document.referrer,docdom:document.domain,domain:location.hostname,protocol:location.protocol,search:location.search,gamp:"0",environment:"-"};return"refresh"===tmgAdsGetURLParam("source",window.location.href)?(e.refresh=1,tmgAdsLog("tmgAdsGetPageData: page is a refreshed page")):tmgAdsLog("tmgAdsGetPageData: page is not refreshed"),"mobile"==tmgAdsGetMetaTag("DCSext.Platform")?e.platform="mobile":e.platform="desktop",tmgAdsLog("tmgAdsGetPageData: platform is: "+e.platform),"mobile"==e.platform?e.pagetype=tmgAdsGetMetaTag("DCSext.Content_Type"):e.pagetype=tmgAdsGetMetaTag("tmgads.pagetype"),tmgAdsLog("tmgAdsGetPageData: pagetype is: "+e.pagetype),"mobile"==e.platform?e.articleid=tmgAdsGetMetaTag("DCSext.articleId"):e.articleid=tmgAdsGetMetaTag("tmgads.articleid"),tmgAdsLog("tmgAdsGetPageData: articleid is: "+e.articleid),"mobile"==e.platform?e.geo=tmgAdsGetMetaTag("DCSext.akamaigeo"):e.geo=tmgAdsGetMetaTag("tmgads.geo"),tmgAdsLog("tmgAdsGetPageData; geo is: "+e.geo),null===e.pagetype&&(e.pagetype="unset"),"mobile"==e.platform?e.zone=tmgAdsGetMetaTag("DCSext.MLC").substring(1,tmgAdsGetMetaTag("DCSext.MLC").length):e.zone=tmgAdsGetMetaTag("tmgads.zone"),null!==typeof e.zone?e.zone=e.zone.replace(/\//g,".").replace(/-/g,"").replace(/_/g,""):(e.zone="unknown",tmgAdsLog("WARNING:::: tmgAdsGetPageData: zone is null, setting to unknown")),tmgAdsLog("tmgAdsGetPageData: zone is: "+e.zone),e.businessseg=tmgAdsGetMetaTag("tmgads.businessSegment"),tmgAdsLog("tmgAdsGetPageData: bsuinessSeg is: "+e.businesssegm),tmgAdsLog("tmgAdsGetMetaTag: Fixing broken classifications"),"lifestyle/puzzles"==e.zone&&(e.zone="puzzles",tmgAdsLog("tmgAdsGetPageData: changed lifestlye/puzzles to puzzles")),null===e.businessseg?tmgAdsLog("tmgAdsGetMetaTag: tmp.businessseg is null, use the zone data in it's entirety, NB: we set businesssseg to the site value after this script."):(tmgAdsLog("tmgAdsGetMetaTag: tmp.businessseg not null, work out if we need to prepend the businessSeg value to the start of the zone value (only do this if the businessSeg is different from th first zone array value: "),tmgAdsLog("tmgAdsGetMetaTag: tmp.businessseg = "+e.businessseg),tmgAdsLog("tmgAdsGetMetaTag; tmp.zone = "+e.zone),e.businessseg==e.zone.split(".")[0]?tmgAdsLog("tmgAdsGetMetaTag: tmp.zone first element is same as the businessseg so don't do anything to the zone:"):(tmgAdsLog("tmgAdsGetMetaTag: tmp.zone first element is different from businessseg so prepend this to the zone:"),e.zone=e.businessseg+"."+e.zone),tmgAdsLog("tmgAdsGetMetaTag: tmp.zone value: "+e.zone)),e.zonedata=e.zone.split("."),e.level=e.zonedata.length,e.section=e.zone.replace(/\./g,"-").replace(/_/g,""),e.site=e.zonedata[0],e.businessseg,e.site,e.otherdata="",e.keywords=tmgAdsGetMetaTag("tmgads.keywords"),e.mostshared=tmgAdsGetMetaTag("tmgads.mostshared"),e.mostviewed=tmgAdsGetMetaTag("tmgads.mostviewed"),e.parentid=tmgAdsGetMetaTag("tmgads.parentid"),e.product=tmgAdsGetMetaTag("tmgads.product"),e.sensitive=tmgAdsGetMetaTag("tmgads.sensitive"),e.videosrc=tmgAdsGetMetaTag("tmgads.videosrc"),e.sponsor=tmgAdsGetMetaTag("tmgads.sponsor"),tmgAdsLog("tmgAdsGetMetaTag: Fixing bad page classifications/taxonomies"),("ece_frontpage"==e.section||"ecefrontpage"==e.section)&&(e.section="portal"),("food_and_drink"==e.section||"food-and-drink"==e.section)&&(e.section="foodanddrink"),("food_and_drink"==e.site||"food-and-drink"==e.site)&&(e.site="foodanddrink"),e.dataLayer=window.dataLayer||["UNSET"],e.pageData=window.pageData||["UNSET"],e}catch(e){tmgAdsLog("ERROR: tmgAdsGetPageData() failed -> error="+e.message)}}function tmgAdsGetURLParam(e,t){tmgAdsLog('Called: tmgAdsGetUrlParam("'+e+'","'+t+'")');var s=!1;return"adtest"==e?tmgAdsLog("Setting ADTEST to: "+(s=decodeURI((RegExp(e+"=(.+?)(&|$)").exec(t)||[,null])[1]))):s=0<window.location.search.indexOf(e),tmgAdsLog("Checking for url-switch ["+e+"] :"+s),s}function tmgAdsGetTMGCookies(e){tmgAdsLog("Called:"),tmgAdsLog("tmgAds.plugins.tmgcookies.active = "+tmgAds.plugins.tmgcookies.active);var t,s="";if(tmgAds.plugins.tmgcookies.active){tmgAdsLog("Adding any tmgcookies");for(var d=document.cookie.split("; "),i=0;i<d.length;i++)d[i].hasOwnProperty(i)&&"tmgads_"===(t=d[i].split("="))[0].substr(0,7)&&0<t[0].length&&(s+=";ck_"+t[0].substr(7,t[0].length-7)+"="+t[1])}return s}function tmgAdsLoadJS(t,e,s){var d={name:t,status:"init",type:"text/javascript",url:e,performance:{init:Math.round(tmgAdsTimer()),requested:0,received:0,latency:-1}};tmgAdsEvent(t+":"+d.status);var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.onload=function(){for(var e in d.status="received",tmgAdsEvent(t+":"+d.status),d.performance.received=Math.round(tmgAdsTimer()),d.performance.latency=Math.round(parseFloat((d.performance.received-d.performance.init).toFixed(3))),tmgAds.performance[t]={},d.performance)tmgAds.performance[t][e]=d.performance[e];"function"==typeof s&&s()},d.performance.requested=Math.round(tmgAdsTimer()),d.status="requested",tmgAdsEvent(t+":"+d.status),i.src=d.url;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(i,a)}function tmgAdsGetBrowserData(){tmgAdsLog("Called:");var e,t={};for(var s in navigator)if(navigator.hasOwnProperty(s)){var d=navigator[s];"object"!=typeof d&&(t[s]=d)}return document.all?(tmgAdsLog("document.all exists"),t.biw=document.documentElement.offsetWidth,t.bih=document.documentElement.offsetHeight):(tmgAdsLog("document.all does not exists"),t.biw=window.innerWidth,t.bih=window.innerHeight),t.isIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var d=e.indexOf("Edge/");return 0<d&&parseInt(e.substring(d+5,e.indexOf(".",d)),10)}(),t.chromeVer=!!(e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./))&&parseInt(e[2],10),t.chromeVer?t.isChrome=!0:t.isChrome=!1,t}function tmgAdsFlashDetect(){tmgAdsLog("Called:");return FlashDetect=new function(){var p=this;p.installed=!1,p.raw="",p.major=-1,p.minor=-1,p.revision=-1,p.revisionStr="";var u=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(e){return s(e)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(e){var t="6,0,21";try{e.AllowScriptAccess="always",t=s(e)}catch(e){}return t}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(e){return s(e)}}],s=function(e){var t=-1;try{t=e.GetVariable("$version")}catch(e){}return t},c=function(e){var t=-1;try{t=new ActiveXObject(e)}catch(e){t={activeXError:!0}}return t},A=function(e){return parseInt(e.replace(/[a-zA-Z]/g,""),10)||p.revision};p.majorAtLeast=function(e){return p.major>=e},p.minorAtLeast=function(e){return p.minor>=e},p.revisionAtLeast=function(e){return p.revision>=e},p.versionAtLeast=function(e){var t=[p.major,p.minor,p.revision],s=Math.min(t.length,arguments.length);for(i=0;i<s;i++){if(t[i]>=arguments[i]){if(i+1<s&&t[i]==arguments[i])continue;return!0}return!1}},p.FlashDetect=function(){if(navigator.plugins&&0<navigator.plugins.length){var e="application/x-shockwave-flash",t=navigator.mimeTypes;if(t&&t[e]&&t[e].enabledPlugin&&t[e].enabledPlugin.description){var s=t[e].enabledPlugin.description,d=(g=(n=s).split(/ +/),m=g[2].split(/\./),l=g[3],{raw:n,major:parseInt(m[0],10),minor:parseInt(m[1],10),revisionStr:l,revision:A(l)});p.raw=d.raw,p.major=d.major,p.minor=d.minor,p.revisionStr=d.revisionStr,p.revision=d.revision,p.installed=!0}}else if(-1==navigator.appVersion.indexOf("Mac")&&window.execScript){s=-1;for(var i=0;i<u.length&&-1==s;i++){var a=c(u[i].name);if(!a.activeXError&&(p.installed=!0,-1!=(s=u[i].version(a)))){d=(r=void 0,r=(o=s).split(","),{raw:o,major:parseInt(r[0].split(" ")[1],10),minor:parseInt(r[1],10),revision:parseInt(r[2],10),revisionStr:r[2]});p.raw=d.raw,p.major=d.major,p.minor=d.minor,p.revision=d.revision,p.revisionStr=d.revisionStr}}}var o,r,n,g,m,l}()},FlashDetect.installed?{versionMaj:FlashDetect.major,versionMin:FlashDetect.minor,versionRev:FlashDetect.revision,versionRaw:FlashDetect.raw}:{versionMaj:0,versionMin:0,versionRev:0,versionRaw:"none"}}function tmgAdsGetCookie(e){tmgAdsLog("Called: tmgAdsGetCookie("+e+"): Called");var t,s,d,i,a=document.cookie.split(";");for(s=0;s<a.length;s++)d=a[s].substr(0,a[s].indexOf("=")),i=a[s].substr(a[s].indexOf("=")+1),(d=d.replace(/^\s+|\s+$/g,""))==e&&(t=decodeURIComponent(i));return t}function tmgAdsSetCookie(e,t,s,d){tmgAdsLog('Called: tmgAdsSetCookie("'+e+'","'+t+'","'+s+'","'+d+'"): Called');var i,a,o,r,n=e+"="+encodeURIComponent(t);s?(a=(i=new Date).getTime(),a+=3600*s*1e3,i.setTime(a),o=";expires="+i.toGMTString()):o="",r=n+o+";path=/"+(void 0===d?"":";domain="+d),document.cookie=r}function tmgAdsTimer(){var e=!1;return e=void 0!==window.RUM&&void 0!==window.RUM.now?window.RUM.now():void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),parseFloat(e.toFixed(3))}function tmgAdsGetDoNotTrack(){var e;return tmgAdsLog("Called:"),"unspecified"!=navigator.doNotTrack&&1!=navigator.doNotTrack&&"yes"!=navigator.doNotTrack||(tmgAdsLog("using the navigator.doNotTrack method"),e=navigator.doNotTrack),navigator.msDoNotTrack&&(tmgAdsLog("using the navigator.msDoNotTrack method"),e=navigator.msDoNotTrack),void 0===e&&(e="0"),"unspecified"==e&&(e="0"),"inactive"==e&&(e="0"),"no"==e&&(e="0"),"yes"==e&&(e="1"),e}function tmgAdsCsvToObj(e,t,s){var d;if(tmgAdsLog('Called: data="'+e+'" delimiter="'+t+'" assignment='+s),s=s||"=",void 0!==e)for(var i in(d={dfplegacy:"",raw:e,vars:{}}).data=e.split(t),d.data)if(0<d.data[i].length&&"string"==typeof d.data[i]){var a=d.data[i].split(s);d.vars[a[0]]=a[1],d.dfplegacy+="&"+a[0]+"="+a[1],tmgAdsLog("extra custVars set in function call, creating them now -> "+a[0]+s+a[1])}return d}function tmgAdsBuildAd(e,t,s){tmgAdsLog("#####################################################################################"),tmgAdsLog('### tmgAdsBuildAd("'+e+'","'+t+'","'+s+'")'),++tmgAds.dfp.tile;var d={adunit:tmgAds.dfp.adunit,altsizes:s,outofpage:!1,arguments:arguments,slot:e.split("_"),size:[],slotid:e,prebid:{hb_data:[],hb_adid:[],hb_size:[],hb_pb:[],hb_rid:[],hb_ttr:[],hb_pid:[]},customvars:tmgAds.dfp.customvars,customvarstr:"",refreshable:!1,dynmpu:!1,block:!1,div:e,vidid:null,pos:tmgAds.dfp.tile,tile:tmgAds.dfp.tile,ord:Number(new Date),extra:tmgAdsCsvToObj(t,";")};for(var i in"none"!=tmgAds.config.deliveryModel.activityStatus?d.adcount=1:d.adcount=0,tmgAds.ads[d.pos]={},d.adloc=d.slot[1],d.adtype=d.slot[2],d.slot[3]&&(d.adpos=d.slot[3],d.dynid=d.adpos),"nat"==d.adtype&&(d.natid=document.getElementById(d.div).getAttribute("data-adtype"),"nat_articlelist_"==d.natid.substring(0,16)&&"nat"==d.at?d.nattype=d.customvars.nattype="articlelist":d.nattype="unclassified",d.customvars.nattype=d.nattype),(-1<tmgAds.plugins.oopunits.indexOf(d.adtype)||"oop"==d.adpos)&&(d.outofpage=!0),void 0===tmgAds.metrics.tmggptAdFirstAdQueued&&(tmgAdsLog("TMG-ADTECH: First Ad Requested"),tmgAds.metrics.tmggptAdFirstAdQueued=tmgAdsTimer(),tmgAds.metrics.metricTimeToQueueFirstAd=tmgAds.metrics.tmggptAdFirstAdQueued),tmgAds.metrics.tmggptAdLastAdQueued=tmgAdsTimer(),!(tmgAds.metrics.ads[d.adtype]={queued:tmgAds.metrics.tmggptAdLastAdQueued,viewable:!1,archive:[]})!==typeof tmgAds.plugins.adomik.active&&(d.customvars.ad_group=tmgAds.plugins.adomik.getAdGroup(),d.customvars.ad_h=(new Date).getUTCHours()),d.customvars)d.customvars.hasOwnProperty(i)&&(d.customvarstr+="&"+i+"="+d.customvars[i],tmgAdsLog("KVPs: "+i+"="+d.customvars[i]));if(0<d.altsizes.length){for(tmgAdsLog("Altsizes have been chosen - over-riding the defaults and setting them to: "+d.altsizes),d.oldsizes=d.altsizes.split(","),tmgAdsLog("Altsizes set: "),d.newsizes=[],i=0;i<d.oldsizes.length;i++)""!==d.oldsizes[i]&&3<=d.oldsizes[i].length?(tmgAdsLog("Altsizes: using this value "+d.oldsizes[i]),d.newsizes.push(d.oldsizes[i])):tmgAdsLog('Altsizes: not using this value "'+d.oldsizes[i]+'"');for(i in d.sizes=d.newsizes,tmgAdsLog("Altsizes set: "),d.sizes)d.sizes.hasOwnProperty(i)&&d.size.push([Number(d.sizes[i].split("x")[0]),Number(d.sizes[i].split("x")[1])])}else d.size=tmgAds.plugins.sizemapping[tmgAds.layout.viewport][d.adtype],tmgAdsLog("default sizes have been chosen - sizes are:"+d.size),d.sizemapping=googletag.cmd.push(function(){googletag.sizeMapping().addSize(tmgAds.plugins.sizemapping.x.size,tmgAds.plugins.sizemapping.x[d.adtype]).addSize(tmgAds.plugins.sizemapping.l.size,tmgAds.plugins.sizemapping.l[d.adtype]).addSize(tmgAds.plugins.sizemapping.m.size,tmgAds.plugins.sizemapping.m[d.adtype]).addSize(tmgAds.plugins.sizemapping.s.size,tmgAds.plugins.sizemapping.s[d.adtype]).addSize(tmgAds.plugins.sizemapping.xs.size,tmgAds.plugins.sizemapping.xs[d.adtype]).build()});if("vid"==d.adtype||"ins"==d.adtype||"int"==d.adtype)return"vid"==d.adtype&&(d.tmpsize=tmgAds.plugins.sizemapping[tmgAds.layout.viewport].vid,d.vidslot=d.slotid+"_"+d.pos,tmgAds.plugins.advast4&&(tmgAds.plugins.gpt.vastOutputVersion="xml_vast4"),d.url="https://securepubads.g.doubleclick.net/gampad/ads?env=vp&sz="+d.tmpsize+"&cmsid="+tmgAds.plugins.gpt.ooyalaCMSID+"&vid="+d.vidid+"&gdfp_req=1&impl=s&unviewed_position_start=1&output="+tmgAds.plugins.gpt.vastOutputVersion+"&iu="+d.adunit+"&hl=en&cust_params="+encodeURIComponent(d.customvarstr+"&vidslot="+d.vidslot+"&at="+d.adtype+"&pos="+d.pos+"&adcount="+d.adcount+d.extra.dfplegacy)+"&description_url="+encodeURIComponent(tmgAds.page.url)+"&url="+encodeURIComponent(tmgAds.page.url)+"&ciu_szs=&scp=&scor="+d.pos+"&correlator="+tmgAds.dfp.ord,tmgAds.plugins.headerBidders.ix.active&&tmgAds.plugins.headerBidders.ix.video.active||tmgAds.plugins.adindexvidon?(tmgAds.plugins.adindexvidon&&console.log("VIDEO:: adindexvidon has been turned on via the url"),tmgAds.plugins.adindexvidon&&console.log("VIDEO:: IndexExchange HeaderBidding turned ON"),tmgAds.plugins.adindexvidon&&console.log("VIDEO:: initial ad-request - "+d.url),d.url=tmgAds.plugins.headerBidders.ix.video.url+encodeURIComponent(d.url),tmgAds.plugins.adindexvidon&&console.log("VIDEO:: amended ad-request - "+d.url)):tmgAds.plugins.adindexvidon&&console.log("VIDEO::  IndexExchange HeaderBidding turned OFF"),tmgAdsLog("VIDEO:: AD-URL - "+d.url)),"ins"==d.adtype&&(d.tmpsize=d.size[0][0]+"x"+d.size[0][1],d.url="https://securepubads.g.doubleclick.net/gampad/adx?sz="+d.tmpsize+"&iu="+tmgAds.dfp.adunit+"&url="+encodeURIComponent(tmgAds.page.url)+"&t="+encodeURIComponent(d.customvarstr+"&at="+d.thisad+"&pos="+d.pos+"&acount="+d.adcount)+"&m=application/javascript&tile="+d.pos+"&c="+tmgAds.dfp.ord,tmgAdsLog("InSkin Ad Request - URL="+d.url)),"int"==d.adtype&&(d.tmpsize=d.size[0][0]+"x"+d.size[0][1],d.url="https://securepubads.g.doubleclick.net/gampad/adx?sz="+d.tmpsize+"&iu="+tmgAds.dfp.adunit+"&url="+encodeURIComponent(tmgAds.page.url)+"&t="+encodeURIComponent(d.customvarstr+"&at="+d.thisad+"&pos="+d.pos+"&acount="+d.adcount)+"&m=application/javascript&tile="+d.pos+"&c="+tmgAds.dfp.ord,tmgAdsLog("Luxury Interstitial Ad Request - URL="+d.url)),d.fetchUrl=function(){return tmgAds.plugins.adkill?(tmgAdsLog('ALERT: .fetchURL() "adkill" has been selectedi'),""):(tmgAdsLog(".fetchUrl() called for: "+d.slotid+" -> "+d.url),d.url)},d.display=function(){d.fetchUrl()},d;if("m"!=tmgAds.layout.viewport&&"s"!=tmgAds.layout.viewport&&"xs"!=tmgAds.layout.viewport||"story"!=tmgAds.page.pagetype&&"video"!=tmgAds.page.pagetype&&"live"!=tmgAds.page.pagetype||"mpu"!=d.adtype?d.block=!1:d.block=!0,-1<tmgAds.plugins.adSlotRefresh.exemptAdSlots.indexOf(d.adtype)||tmgAds.config.deliveryModel.activityStatus==d.adtype||"none"==tmgAds.config.deliveryModel.activityStatus||-1<tmgAds.config.deliveryModel.exempt.indexOf(d.adtype)){if("dyn"==d.adtype&&tmgAds.plugins.dynad.active&&-1==tmgAds.plugins.dynad.viewports.indexOf(tmgAds.layout.viewport))return tmgAdsLog("ALERT: Dynamic MPU slot not rendered as has not met criteria: adpos="+d.pos+" - adtype="+d.adtype+" - viewport="+tmgAds.layout.viewport+" - tmgAds.plugins.dynad.viewports.indexOf(tmgAds.layout.viewport)="+tmgAds.plugins.dynad.viewports.indexOf(tmgAds.layout.viewport)),d.refresh=function(){return d},d.display=function(){return d},d.fetchUrl=function(){return d},d;for("ban"==tmgAds.config.deliveryModel.activityStatus&&"ban"==d.adtype&&(tmgAds.layout.viewportHeight<tmgAds.config.deliveryModel.minHeight&&(d.size=[[970,90],[970,66],[728,90],[468,60]]),"m"==tmgAds.layout.viewport&&(d.size=[728,90]),"s"==tmgAds.layout.viewport&&(d.size=[[300,50],[320,50]]),"xs"==tmgAds.layout.viewport&&(d.size=[[300,50],[320,50]])),"mpu"==tmgAds.config.deliveryModel.activityStatus&&"mpu"==d.adtype&&("x"==tmgAds.layout.viewport&&(d.size=[[300,250],[300,600]]),"l"==tmgAds.layout.viewport&&(d.size=[[300,250],[300,600]]),tmgAds.layout.viewportHeight<tmgAds.config.deliveryModel.minHeight&&(tmgAdsLog("tmgAds.layout.viewportHeight is less thean the minHeight for certain sticky ads/mpus on this page, restricting to only 300x250"),d.size=[300,250])),d.rawsizes=[],i=0;i<d.size.length;i++)d.rawsizes.push(d.size[i][0]+"x"+d.size[i][1]);return googletag.cmd.push(function(){var e;for(e in!0===d.outofpage?(tmgAdsLog("OutOfPage unit chosen for: "+d.slotid),d.adslot=googletag.defineOutOfPageSlot(d.adunit,d.div).addService(googletag.pubads())):(tmgAdsLog("Standard Display unit chosen for: "+d.slotid+" sizes: "+d.size),d.adslot=googletag.defineSlot(d.adunit,d.size,d.div).addService(googletag.pubads())),"dyn"==d.adtype&&d.adslot.setTargeting("dynid",d.dynid),"nat"==d.adtype&&d.adslot.setTargeting("natid",d.natid),d.adslot.setTargeting("div",d.div),d.adslot.setTargeting("at",d.adtype),d.adslot.setTargeting("pos",d.pos),d.adslot.setTargeting("adcount",String(d.adcount)),d=tmgAdsUpdateHeaderBidderData(d),tmgAds.dfp.customvars)null!==typeof tmgAds.dfp.customvars[e]&&d.adslot.setTargeting(e,tmgAds.dfp.customvars[e]);for(e in d.extras)null!==typeof d.extras[e]&&d.adslot.setTargeting(e,d.extras[e]);for(e in d.extra.vars)tmgAdsLog('extra vars have been set, itterating through them now. Adding extra vars: ["'+e+'","'+d.extra.vars[e]+'"]'),d.adslot.setTargeting(e,d.extra.vars[e]);1==tmgAds.plugins.gpt.collapseEmptyDivs&&(tmgAdsLog("setCollapseEmptyDiv is active for: "+d.slotid),d.adslot.setCollapseEmptyDiv(!0)),googletag.enableServices()}),(tmgAds.ads[d.pos]=d).display=function(){return tmgAdsLog(".display() called for: "+d.slotid),googletag.cmd.push(function(){"vid"!==d.adtype?tmgAds.plugins.headerBidders.active&&"vid"!==d.adtype&&void 0!==window.headertag?tmgAds.plugins.headerBidders.ix.active&&void 0!==window.headertag&&!0===window.headertag.apiReady?(tmgAdsLog("headertag.display exists:"),headertag.display(d.slotid)):(tmgAdsLog("headertag.display does not yet exist... reverting to googletag.display()"),googletag.display(d.slotid),tmgAds.errors.push("INDEX-EXCHANGE: headertag.apiReady = false: "+e)):(googletag.display(d.slotid),tmgAds.plugins.headerBidders.active&&tmgAds.plugins.headerBidders.ix.active&&void 0===window.headertag&&console.log("::::WARNING:::: headertag not defined!")):tmgAdsLog('.display() method called on "vid" adtype... ignoring')}),d},d.refresh=function(){console.log(".refresh() called for slotid :"+d.slotid),googletag.cmd.push(function(){tmgAds.plugins.headerBidders.active?tmgAds.plugins.headerBidders.ix.active?headertag.pubads().refresh([d.adslot]):googletag.pubads().refresh([d.adslot]):googletag.display(d.slotid)})},tmgAds.adslots[d.slotid]=d,!0===tmgAds.plugins.adkill&&(tmgAdsLog('ALERT: "adkill" has been selected, so bailing here and not sending you an ad...'),d.refresh=function(){return d},d.display=function(){return d},d.fetchUrl=function(){return d}),d}return tmgAds.config.deliveryModel.activityStatus!=d.adtype&&tmgAdsLog("ALERT: not matched - tmgAds.config.deliveryModel.activityStatus="+tmgAds.config.deliveryModel.activityStatus+"  --\x3e  tmp.adtype="+d.adtype+" so we did not call this ad."),tmgAds.plugins.dynad.active&&-1==tmgAds.plugins.dynad.viewports.indexOf(tmgAds.layout.viewport)&&tmgAdsLog("ALERT: Dynmic MPU not called - not matched viewport"),d.refresh=function(){return d},d.display=function(){return d},d.fetchUrl=function(){return d},d}function tmgAdsBuildAdTag(e,t,s,d,i,a,o){tmgAdsLog("-=-=-=--=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-="),tmgAdsLog('WARNING: DEPRECATED tmgAdsBuildAdTag("'+e+'","'+t+'","'+s+'","'+d+'","'+i+'")');var r={tile:(++tmgAds.dfp.tile,tmgAds.dfp.tile),adslot:e.split(","),sizes:t.split(","),thisad:e.split(",")[0].substr(0,3),sz:[],type:s,extra:{data:d,vars:{},dfp:""},style:i,refresh:a,refreshtime:o};if("mob"==r.thisad&&(r.thisad="ban"),r.id_div="tmgads_legacy_"+r.thisad+"_"+r.tile,0<r.extra.data.length)for(var n in r.extra.tmp=r.extra.data.split(";"),r.extra.tmp)if(0<r.extra.tmp[n].length){var g=r.extra.tmp[n].split("=");r.extra.vars[g[0]]=g[1],r.extra.dfp+="&"+g[0]+"="+g[1],tmgAdsLog("extra custVars set in function call, creating them now -> "+g[0]+"="+g[1])}return"ins"!=r.thisad&&"vid"!=r.thisad&&"int"!=r.thisad?r.output='<div id="'+r.id_div+'"><script type="text/javascript">tmgAds.cmd.push(function(){var '+r.id_div+' = tmgAdsBuildAd("'+r.id_div+'","'+r.extra.data+'","'+t+'","0").display();});<\/script></div>\n':r.output=googletag.cmd.push(tmgAdsBuildAd(r.id_div,r.extra.data,t,0).fetchUrl()),--tmgAds.dfp.tile,r.output}function tmgAdsUpdateHeaderBidderData(e){if((tmgAds.plugins.headerBidders.amazon.active||tmgAds.plugins.amazonon)&&!tmgAds.plugins.amazonoff)if(tmgAdsLog("AMAZON: Active"),-1<tmgAds.plugins.headerBidders.amazon.exempt.indexOf(e.adtype))tmgAdsLog("AMAZON: This adtype is NOT supported (exempted): "+e.adtype);else{for(s=0;s<=tmgAds.plugins.headerBidders.amazon.keynames.length-1;s++)tmgAdsLog("Deleting tmgAds.plugins.headerBidders.amazon.keynames["+tmgAds.plugins.headerBidders.amazon.keynames[s]+"] - was = "+e.adslot.getTargeting(tmgAds.plugins.headerBidders.amazon.keynames[s])),e.adslot.clearTargeting(tmgAds.plugins.headerBidders.amazon.keynames[s]);if(tmgAds.plugins.headerBidders.amazon.hasOwnProperty("bids"))if(0<tmgAds.plugins.headerBidders.amazon.bids.length)for(s=0;s<tmgAds.plugins.headerBidders.amazon.bids.length;s++)tmgAds.plugins.headerBidders.amazon.status="Bids returned",e.div==tmgAds.plugins.headerBidders.amazon.bids[s].slotID&&-1<e.rawsizes.indexOf(tmgAds.plugins.headerBidders.amazon.bids[s].size)&&(e.adslot.setTargeting("amznbid",tmgAds.plugins.headerBidders.amazon.bids[s].amznbid),e.adslot.setTargeting("amzniid",tmgAds.plugins.headerBidders.amazon.bids[s].amzniid),e.adslot.setTargeting("amznp",tmgAds.plugins.headerBidders.amazon.bids[s].amznp),e.adslot.setTargeting("amznsz",tmgAds.plugins.headerBidders.amazon.bids[s].size),e.adslot.setTargeting("amznresp","bids"));else tmgAds.plugins.headerBidders.amazon.status="No bids returned",e.adslot.setTargeting("amznresp","nobids"),console.log("AMAZON: WARNING - Auction completed but Bids array is empty -> "+e.div);else tmgAds.plugins.headerBidders.amazon.status="Failed to return bids in time",e.adslot.setTargeting("amznresp","fail"),console.log("AMAZON: WARNING - Bids array does not exist, auction may not have returned in time -> "+e.div)}if((tmgAds.plugins.headerBidders.prebid.active||tmgAds.plugins.adprebidon)&&!tmgAds.plugins.adprebidoff&&-1==tmgAds.plugins.headerBidders.prebid.exempt.indexOf(e.adtype)){e.adslot.setTargeting("hb_bidder","appnexusGMSM"),e.adslot.setTargeting("hb_status",tmgAds.plugins.headerBidders.prebid.bidstatus);var t=tmgAds.plugins.headerBidders.prebid.bidResponse;for(a=0;a<=tmgAds.plugins.headerBidders.prebid.keynames.length-1;a++){e.prebid[tmgAds.plugins.headerBidders.prebid.keynames[a]];e.prebid[tmgAds.plugins.headerBidders.prebid.keynames[a]]=[]}if(1<=tmgAdsObjSz(t)){for(var s in t)if(e.div==s)for(var d in t[s].bids)"1"==t[s].bids[d].getStatusCode()?0<=e.rawsizes.indexOf(t[s].bids[d].getSize())&&(e.prebid.hasAds=!0,e.prebid.datastr=t[s].bids[d].adData,e.prebid.hb_data.push(e.prebid.datastr),e.prebid.hb_size.push(t[s].bids[d].adserverTargeting.hb_size),e.prebid.hb_adid.push(t[s].bids[d].adserverTargeting.hb_adid),e.prebid.hb_pb.push(t[s].bids[d].adserverTargeting.hb_pb),e.prebid.hb_rid.push(t[s].bids[d].requestId),e.prebid.hb_ttr.push(t[s].bids[d].timeToRespond),e.prebid.hb_pid.push(t[s].bids[d].placementId+"_bids")):e.prebid.hb_pid.push(t[s].bids[d].placementId+"_nobids")}else console.log("PREBID: No bids received ",t[s]);for(e.adslot.setTargeting("hb_bidder","appnexusGMSM"),e.adslot.setTargeting("hb_status",tmgAds.plugins.headerBidders.prebid.bidstatus),s=0;s<=tmgAds.plugins.headerBidders.prebid.keynames.length-1;s++)e.adslot.setTargeting(tmgAds.plugins.headerBidders.prebid.keynames[s],e.prebid[tmgAds.plugins.headerBidders.prebid.keynames[s]])}return e}function tmgAdsRefreshAd(t){t.slot=tmgAdsUpdateHeaderBidderData(t.slot);var s={};tmgAdsLog("Called: Refreshing ad["+t.adID+"]: "+t.slot.adtype),tmgAds.ads[t.adID].hasOwnProperty("adslot")?(tmgAdsLog("Refreshing ad: googletag.pubads().refresh(["+t.slot+"]);"),googletag.cmd.push(function(){for(var e in tmgAdsLog("Updating setTargeting values:"),t.slot.adslot.setTargeting("adcount",[tmgAds.refreshTimers[t.slot.adtype].adcount]),tmgAdsLog("Updating setTargeting values-> adcount="+tmgAds.refreshTimers[t.slot.adtype].adcount),tmgAds.dfp.customvars)null!==typeof tmgAds.dfp.customvars[e]&&(t.slot.adslot.setTargeting(e,tmgAds.dfp.customvars[e]),tmgAdsLog("Updating setTargeting values -> "+e+"="+tmgAds.dfp.customvars[e]));for(e in tmgAds.metrics.ads[t.slot.adtype])"object"!=typeof tmgAds.metrics.ads[t.slot.adtype][e]&&(s[e]=tmgAds.metrics.ads[t.slot.adtype][e],delete tmgAds.metrics.ads[t.slot.adtype][e]);tmgAds.metrics.ads[t.slot.adtype].archive.push(s),tmgAds.metrics.ads[t.slot.adtype].queued=tmgAdsTimer(),tmgAds.plugins.headerBidders.active?(tmgAdsLog("tmgAds.plugins.headerBidders.active is ON"),tmgAds.plugins.headerBidders.ix.active?headertag.pubads().refresh([t.slot.adslot]):googletag.pubads().refresh([t.slot.adslot])):(tmgAdsLog("tmgAds.plugins.headerBidders.active is OFF"),googletag.pubads().refresh([t.slot.adslot]))})):tmgAdsLog("adslot does not exist: googletag.pubads().refresh(["+t.slot.adslot+"]);")}function tmgAdsCountdown(e){0<tmgAds.refreshTimers[e.adtype].currentCount?!0===tmgAds.config.viewportstatus?(tmgAdsLog("Countdown not finished, reducing countdown by 1s :: adtype:"+e.adtype+"  viewportstatus:"+tmgAds.config.viewportstatus+"  countdownID:"+tmgAds.refreshTimers[e.adtype].countdownID+"  timeOutstanding:"+tmgAds.refreshTimers[e.adtype].currentCount+"  adcount:"+tmgAds.refreshTimers[e.adtype].adcount),2==tmgAds.refreshTimers[e.adtype].currentCount&&tmgAdsEvent("headerbid:reload"),--tmgAds.refreshTimers[e.adtype].currentCount):tmgAdsLog("tmgAds.config.viewportstatus="+tmgAds.config.viewportstatus+" - window is not active, so countdown remains at "+tmgAds.refreshTimers[e.adtype].currentCount+"s"):tmgAdsLog("Countdown finished, - ad is ready to refresh - waiting for the user to interact with the page before we refresh ads.")}function tmgAdsScheduleRefreshableAds(t){function s(e){0===tmgAds.refreshTimers[t.adtype].currentCount&&!1===tmgAds.refreshTimers[t.adtype].refreshStatus?(tmgAds.refreshTimers[t.adtype].refreshStatus=!0,tmgAdsLog("REFRESH: Refreshing: "+t.div),(0===tmgAds.config.deliveryModel.refreshCycle||tmgAds.config.deliveryModel.refreshCycle>tmgAds.refreshTimers[t.adtype].adcount)&&(document.getElementById(t.div).style.opacity="0"),setTimeout(function(){tmgAdsLog("User has interacted with page and therefore is now active - event.type="+e.type+"  -  count is 0... lets refrsh some ads:"),tmgAdsLog("Firstly, lets remove the existing countdownID: "+tmgAds.refreshTimers[t.adtype].countdownID),window.clearInterval(tmgAds.refreshTimers[t.adtype].countdownID),0===tmgAds.config.deliveryModel.refreshCycle||tmgAds.config.deliveryModel.refreshCycle>tmgAds.refreshTimers[t.adtype].adcount?(tmgAdsLog("SUCCESS: We can refresh this ad as there is either no limit on number of refreshed ads or we have delivered less than the current limit"),tmgAdsLog("tmgAds.config.deliveryModel.refreshCycle = "+tmgAds.config.deliveryModel.refreshCycle),++tmgAds.refreshTimers[t.adtype].adcount,tmgAdsLog("Incrementing tmgAds.refreshTimers["+t.adtype+"].adcount to: "+tmgAds.refreshTimers[t.adtype].adcount),tmgAdsLog("Creating a new countdownID"),tmgAds.refreshTimers[t.adtype].countdownID=setInterval(function(){tmgAdsCountdown(t)},1e3),tmgAdsLog("CSS transitions fadeout - Countdown has reached 1s to go... we need to start transitioning the look/feel of this unit by fading out the ad..."),tmgAdsLog("Resetting the countdown"),tmgAds.refreshTimers[t.adtype].currentCount=tmgAds.config.deliveryModel.refreshRate/1e3,tmgAdsLog("Requesting Ad refresh - adtype:"+t.adtype+" countdownID:"+tmgAds.refreshTimers[t.adtype].countdownID+" ad.adID="+t.adID),tmgAds.refreshTimers[t.adtype].refreshStatus=!1,"click"!=e.type?(tmgAdsLog("Event is NOT a click event, so we can happily refresh this ad now."),tmgAdsRefreshAd(tmgAds.refreshTimers[t.adtype])):tmgAdsLog("Event is a CLICK event, we do not refresh based on these as they can overinflate delivery attempts.")):(tmgAdsLog("ALERT: tmgAds.config.deliveryModel.refreshCycle has been met."),tmgAdsLog("ALERT: tmgAds.config.deliveryModel.refreshCycle = "+tmgAds.config.deliveryModel.refreshCycle),tmgAdsLog("ALERT: tmgAds.refreshTimers["+t.adtype+"].adcount = "+tmgAds.refreshTimers[t.adtype].adcount),"ban"==t.adtype&&"index"==tmgAds.page.pagetype?tmgAdsEvent("tmggpt-revertStickyBanner"):tmgAdsEvent("tmggpt-collapseStickyad"))},1e3)):0==tmgAds.refreshTimers[t.adtype].currentCount?tmgAdsLog("User has interacted with page: event.type="+e.type+" : tmgAds.refreshTimers[ad.adtype].currentCount="+tmgAds.refreshTimers[t.adtype].currentCount+"  -  BUT sticky-ad refresh has now been disabled due to hitting refreshlimits"):tmgAdsLog("User has interacted with page: event.type="+e.type+" : tmgAds.refreshTimers[ad.adtype].currentCount="+tmgAds.refreshTimers[t.adtype].currentCount+"s")}tmgAds.refreshTimers[t.adtype]={adID:t.adID,slot:tmgAds.ads[t.adID],duration:tmgAds.config.deliveryModel.refreshRate/1e3,currentCount:tmgAds.config.deliveryModel.refreshRate/1e3,refreshStatus:!1,adcount:1,countdownID:setInterval(function(){tmgAdsCountdown(t)},1e3)},document.addEventListener("focus",function(e){s(e)}),document.addEventListener("orientationchange",function(e){s(e)}),document.addEventListener("keydown",function(e){s(e)}),document.addEventListener("scroll",function(e){s(e)}),document.addEventListener("resize",function(e){s(e)}),document.addEventListener("mousemove",function(e){s(e)}),document.addEventListener("mousewheel",function(e){s(e)}),document.addEventListener("DOMMouseScroll",function(e){s(e)})}function tmgAdsSetAdSlotToRefresh(e){if(tmgAds.counters=tmgAds.counters||{},tmgAds.counters.hasOwnProperty(e)||(tmgAds.counters[e]=0),0<Object.keys(tmgAds.ads).length&&tmgAds.plugins.adSlotRefresh.active&&tmgAds.plugins.adSlotRefresh.retryCount<=tmgAds.plugins.adSlotRefresh.retryLimit){tmgAdsLog("SUCCESS: Ads seem to have been defined AND retryCount <= retryLimit: tmgAds.plugins.stadSlotRefresh.retryCount="+tmgAds.plugins.adSlotRefresh.retryCount+"   tmgAds.plugins.adSlotRefresh.retryLimit="+tmgAds.plugins.adSlotRefresh.retryLimit);var t="none";for(var s in tmgAds.ads)if(tmgAds.ads.hasOwnProperty(s)){if(tmgAds.ads[s].adtype==e){tmgAdsLog("SUCCESS: tmgads.ads["+s+"].adtype = "+e),tmgAds.ads[s].adID=t=s;break}tmgAdsLog("FAILURE: tmgads.ads["+s+"].adtype != "+e)}else tmgAdsLog("FAILURE: tmgads.hasOwnProperty("+s+") - no hasOwnProperty exixts");"none"==t?(tmgAdsLog("Ad not found ["+e+"] perhaps its not beeing created yet. Number of times this script has been run for this ad -> "+tmgAds.counters[e]),tmgAds.counters[e]<tmgAds.plugins.counters?(++tmgAds.counters[e],console.log("REFRESH: Refresh count limit not hit lets call this script again"),window.setTimeout(function(){tmgAdsSetAdSlotToRefresh(e)},tmgAds.plugins.adSlotRefresh.retryPeriod)):console.log("REFRESH: Refresh count limit hit, stop trying to fill this slot and stop running this script.")):tmgAds.ads[t].adtype==e&&("object"==typeof tmgAds.ads[t].adslot?(tmgAdsLog("SUCCESS: calling tmgAdsScheduleRefreshableAds("+e+")"),tmgAdsScheduleRefreshableAds(tmgAds.ads[t])):(tmgAdsLog("ALERT: delaying implementing refreshables until the adslots are available - recalling tmgAdsSetAdSlotToRefresh("+e+") in "+tmgAds.plugins.adSlotRefresh.retryPeriod+"ms - retryCount:"+tmgAds.plugins.adSlotRefresh.retryCount+" of "+tmgAds.plugins.adSlotRefresh.retryLimit),tmgAds.plugins.adSlotRefresh.retryCount<=tmgAds.plugins.adSlotRefresh.retryLimit?(++tmgAds.plugins.adSlotRefresh.retryCount,window.setTimeout(function(){tmgAdsSetAdSlotToRefresh(e)},tmgAds.plugins.adSlotRefresh.retryPeriod)):tmgAdsLog("ALERT: tmgAdsSetAdSlotToRefresh request limit hit")))}else++tmgAds.plugins.adSlotRefresh.retryCount,tmgAdsLog("ALERT: the tmgAds.ads object does not exist or is empty, ads have not been created yet - recalling tmgAdsSetAdSlotToRefresh("+e+") in "+tmgAds.plugins.adSlotRefresh.retryPeriod+"ms - incrementing count to: "+tmgAds.plugins.adSlotRefresh.retryCount),tmgAds.plugins.adSlotRefresh.retryCount<=tmgAds.plugins.adSlotRefresh.retryLimit&&window.setTimeout(function(){tmgAdsSetAdSlotToRefresh(e)},tmgAds.plugins.adSlotRefresh.retryPeriod)}function tmgAdsOnPageLoad(e){if(tmgAdsEvent("tmggpt:pageload"),tmgAdsLog("##################################################################################################################"),tmgAdsLog("P A G E   L  O A D E D "),tmgAdsLog("##################################################################################################################"),window.addEventListener("focus",function(){e.config.viewportstatus=!0,tmgAdsLog("AutoRefresh Event: window.onfocus - tmgAds.config.viewportstatus="+e.config.viewportstatus)}),window.addEventListener("blur",function(){e.config.viewportstatus=!1,tmgAdsLog("AutoRefresh Event: window.onblur - tmgAds.config.viewportstatus="+e.config.viewportstatus)}),e.plugins.scrollspeed){tmgAdsLog("We have turned on scrollspeed assessment");var t=function(e){var t,s,d,i,a=(e=e||{}).delay||50;function o(){t=null,i=0}return o(),function(){return s=window.scrollY,null!==t&&(i=s-t),t=s,clearTimeout(d),d=setTimeout(o,a),i}}();window.onscroll=function(){console.log("ScrollSpeed: "+t())}}for(tmgAdsLog("Executing tmgAds.cmd queue:"),tmgAdsEvent("tmggpt:commandqueue");0<tmgAds.cmd.length;)tmgAdsLog("Executing tmgAds.cmd queue: "+tmgAds.cmd.slice(0,1)),tmgAds.cmd.shift()();return!0}function tmgAdsEvent(e,t){var s=new CustomEvent("tmgAds:"+e);document.dispatchEvent(s)}function tmgAdsInitDeliveryModel(){try{if(tmgAdsLog("Called tmgAdsInitDeliveryModel"),tmgAds.config.deliveryModel=tmgAds.plugins.models.default,tmgAds.config.deliveryModel.matched=!1,tmgAds.plugins.adstickyon&&(tmgAds.sticky=!0),tmgAds.plugins.adstickyoff&&(tmgAds.sticky=!1),tmgAds.plugins.mytelegraph.isActive&&!tmgAds.plugins.admytoff&&-1==tmgAds.plugins.mytelegraph.exempt.indexOf(tmgAds.page.businessseg)&&("xs"==tmgAds.layout.viewport||"s"==tmgAds.layout.viewport?(tmgAds.tmg.isRegistered||!document.getElementById("advert_tmg_ban")||"story"!=tmgAds.page.pagetype&&"live"!=tmgAds.page.pagetype&&"video"!=tmgAds.page.pagetype?document.getElementById("advert_tmg_ban")&&(document.getElementById("advert_tmg_ban").outerHTML="\x3c!--// advert_tmg_ban has been removed due to the MyTelegraph rules on Mobile that requires no banner slots to show  - user is registered//--\x3e"):document.getElementById("advert_tmg_ban").outerHTML+="\x3c!--// advert_tmg_ban has been retained //--\x3e",tmgAds.tmg.isRegistered?"story"!=tmgAds.page.pagetype&&"live"!=tmgAds.page.pagetype&&"video"!=tmgAds.page.pagetype&&"index"!=tmgAds.page.pagetype&&"topic"!=tmgAds.page.pagetype||(tmgAds.sticky=!1,tmgAds.plugins.mytelegraph.isApplied=!0,tmgAds.plugins.mytelegraph.isPlatform="mobile"):"index"!=tmgAds.page.pagetype&&"topic"!=tmgAds.page.pagetype||(tmgAds.sticky=!1)):(tmgAds.plugins.mytelegraph.isApplied=!0,tmgAds.plugins.mytelegraph.isPlatform="desktop")),tmgAds.sticky){for(var e in tmgAdsLog("tmgAdsInitDeliveryModel: tmgAds.sticky is TRUE"),tmgAds.plugins.models)if(tmgAds.plugins.models.hasOwnProperty(e)&&tmgAds.page.pagetype==e)for(var t in tmgAdsLog("tmgAdsInitDeliveryModel: matched pagetype -> "+e),tmgAds.plugins.models[e])tmgAds.plugins.models[e][t].hasOwnProperty("viewport")&&tmgAds.plugins.models[e][t].viewport==tmgAds.layout.viewport&&(tmgAds.config.deliveryModel=tmgAds.plugins.models[e][t],tmgAds.config.deliveryModel.matched=!0,tmgAdsLog("tmgAdsInitDeliveryModel: matched viewport -> "+tmgAds.plugins.models[e][t].viewport),"none"!=tmgAds.config.deliveryModel.model?-1<tmgAds.plugins.adSlotRefresh.pagetypes.indexOf(tmgAds.page.pagetype)?"ban"==tmgAds.config.deliveryModel.model&&tmgAds.browser.isIE&&!tmgAds.plugins.adiesticky?tmgAds.config.deliveryModel.activityStatus="none":"ban"==tmgAds.config.deliveryModel.model&&tmgAds.browser.isChrome&&tmgAds.browser.chromeVer<=55?tmgAds.config.deliveryModel.activityStatus="none":(tmgAdsLog("tmgAdsInitDeliveryModel: page is sutiable for sticky ad model, setting vars now."),tmgAds.config.deliveryModel.ruleName=tmgAds.page.pagetype+"-"+tmgAds.config.deliveryModel.model+"-"+tmgAds.config.deliveryModel.minHeight+"-"+tmgAds.config.deliveryModel.refreshRate+"-"+tmgAds.config.deliveryModel.refreshCycle,tmgAds.config.deliveryModel.sticky=!0,tmgAds.config.deliveryModel.activityStatus=tmgAds.config.deliveryModel.model,tmgAdsSetAdSlotToRefresh(tmgAds.config.deliveryModel.activityStatus)):(tmgAdsLog('ALERT: tmgAdsInitDeliveryModel: page is exempted from sticky ads in the tmgAds.config.models. tmgAds.plugins.adSlotRefresh.pagetypes.indexOf("'+tmgAds.page.pagetype+'");'),tmgAds.config.deliveryModel.activityStatus="none"):(tmgAdsLog("ALERT: tmgAdsInitDeliveryModel: tmgAds.page.pagetype is not suitable for sticky ads -> setting tmgAds.config.deliveryModel.activityStatus = none"),tmgAds.config.deliveryModel.activityStatus="none"))}else tmgAds.config.deliveryModel={activityStatus:"none",exempt:[]}}catch(e){tmgAdsLog("ERROR: tmgAdsInitDeliveryModel failed -> error="+e.message,tmgAds)}tmgAdsLog("tmgAdsInitDeliveryModel = ",tmgAds.config.deliveryModel)}function tmgAdsInitHeaderBidders(){tmgAdsEvent("headerbid:start"),!tmgAds.plugins.headerBidders.active&&!tmgAds.plugins.adheaderbidon||tmgAds.plugins.adheaderbidoff?tmgAds.plugins.adheaderbidoff?console.log("HEADERBIDDING: Turned off by url-param"):console.log("HEADERBIDDING: Inactive"):(!tmgAds.plugins.headerBidders.ix.active&&!tmgAds.plugins.adindexon||tmgAds.plugins.adindexoff?tmgAds.plugins.adindexoff?console.log("IX: Turned off by url-param"):console.log("IX: Inactive"):(tmgAds.plugins.adindexon&&console.log("IX: has been manually turned on"),"config"==tmgAds.plugins.headerBidders.ix.bidstatus&&(-1==window.location.search.indexOf("adixtest")?tmgAds.plugins.headerBidders.ix.jsurl=tmgAds.plugins.headerBidders.ix.jsprod:tmgAds.plugins.headerBidders.ix.jsurl=tmgAds.plugins.headerBidders.ix.jstest,tmgAds.plugins.headerBidders.ix.bidstatus,tmgAds.plugins.headerBidders.ix.preload(),tmgAdsLoadJS(tmgAds.plugins.headerBidders.ix.name,tmgAds.plugins.headerBidders.ix.jsurl,tmgAds.plugins.headerBidders.ix.callback))),!tmgAds.plugins.headerBidders.amazon.active&&!tmgAds.plugins.adamazonon||tmgAds.plugins.adamazonoff?tmgAds.plugins.adamazonff?console.log("AMAZON: Turned off by url-param"):console.log("AMAZON: Inactive"):(tmgAds.plugins.adamazonon&&console.log("AMAZON: A9 has been manually turned on"),"config"==tmgAds.plugins.headerBidders.amazon.bidstatus?(-1==window.location.search.indexOf("adamzntest")?tmgAds.plugins.headerBidders.amazon.jsurl=tmgAds.plugins.headerBidders.amazon.jsprod:tmgAds.plugins.headerBidders.amazon.jsurl=tmgAds.plugins.headerBidders.amazon.jstest,tmgAds.plugins.headerBidders.amazon.bidstatus,tmgAds.plugins.headerBidders.amazon.preload(),tmgAdsLoadJS(tmgAds.plugins.headerBidders.amazon.name,tmgAds.plugins.headerBidders.amazon.jsurl,window.amznads.asyncParams.callbackFn)):tmgAds.plugins.headerBidders.amazon.fetchBids()),!tmgAds.plugins.headerBidders.prebid.active&&!tmgAds.plugins.adprebidon||tmgAds.plugins.adprebidoff?tmgAds.plugins.adprebidoff?console.log("PREBID: Turned of by url-param"):console.log("PREBID: Inactive"):(tmgAds.plugins.adamazonon&&console.log("PREBID: Has been manually turned on"),"config"==tmgAds.plugins.headerBidders.prebid.bidstatus?(-1==window.location.search.indexOf("prebidtest")?tmgAds.plugins.headerBidders.prebid.jsurl=tmgAds.plugins.headerBidders.prebid.jsprod:tmgAds.plugins.headerBidders.prebid.jsurl=tmgAds.plugins.headerBidders.prebid.jstest,tmgAds.plugins.headerBidders.prebid.bidstatus,tmgAds.plugins.headerBidders.prebid.preload(),tmgAdsLoadJS(tmgAds.plugins.headerBidders.prebid.name,tmgAds.plugins.headerBidders.prebid.jsurl,tmgAds.plugins.headerBidders.prebid.callback)):pbjs.requestBids(tmgAds.plugins.headerBidders.prebid.bidsBackHandler))),tmgAdsEvent("headerbid:end")}function tmgAdsPrebidReturnAdUnits(){var e={adUnits:[]};if("x"!=tmgAds.layout.viewport&&"l"!=tmgAds.layout.viewport||("index"==tmgAds.page.pagetype?(e.adUnits.push({code:"advert_tmg_ban-12618727",sizes:[[970,250]],bids:[{bidder:"appnexusgmsmprm",params:{placementId:"12618727"}}]}),e.adUnits.push({code:"advert_tmg_mpu-12427874",sizes:[[300,600]],bids:[{bidder:"appnexusgmsmprm",params:{placementId:"12427874"}}]}),e.adUnits.push({code:"advert_tmg_ban-12536288",sizes:[[728,90]],bids:[{bidder:"appnexusgmsmstd",params:{placementId:"12536288"}}]})):e.adUnits.push({code:"advert_tmg_mpu-12427874",sizes:[[300,600]],bids:[{bidder:"appnexusgmsmprm",params:{placementId:"12427874"}}]}),e.adUnits.push({code:"advert_tmg_mpu-12536287",sizes:[[300,250]],bids:[{bidder:"appnexusgmsmstd",params:{placementId:"12536287"}}]})),"m"==tmgAds.layout.viewport&&("index"==tmgAds.page.pagetype?e.adUnits.push({code:"advert_tmg_mpu-12674818",sizes:[[300,250]],bids:[{bidder:"appnexusgmsmprm",params:{placementId:"12674818"}}]}):e.adUnits.push({code:"advert_tmg_dyn_0-12674818",sizes:[[300,250]],bids:[{bidder:"appnexusgmsmprm",params:{placementId:"12674818"}}]})),"xs"!=tmgAds.layout.viewport&&"s"!=tmgAds.layout.viewport||("index"==tmgAds.page.pagetype?e.adUnits.push({code:"advert_tmg_mpu-12674818",sizes:[[300,250]],bids:[{bidder:"appnexusgmsmprm",params:{placementId:"12674818"}}]}):e.adUnits.push({code:"advert_tmg_dyn_0-12427875",sizes:[[300,250]],bids:[{bidder:"appnexusgmsmprm",params:{placementId:"12427875"}}]})),("l"==tmgAds.layout.viewport||"x"==tmgAds.layout.viewport)&&tmgAds.layout.viewportHeight<tmgAds.config.deliveryModel.minHeight)for(i in e.adUnits)if(0==e.adUnits[i].code.indexOf("advert_tmg_ban"))if(1==e.adUnits[i].sizes.length)90<e.adUnits[i].sizes[0][1]&&e.adUnits.splice(i,1);else for(n in e.adUnits[i].sizes)90<e.adUnits[i].sizes[n][1]&&e.adUnits[i].sizes.splice(n,1);return e.adUnits}function tmgAdsGetAmazonSlots(){var e={viewport:tmgAds.layout.viewport,sizemap:tmgAds.plugins.sizemapping[tmgAds.layout.viewport],adunit:tmgAds.dfp.adunit};"index"==tmgAds.page.pagetype||"topic"==tmgAds.page.pagetype||"video-index"==tmgAds.page.pagetype?e.slots={x:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg"],l:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg"],m:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg"],s:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg","advert_tmg_dyn_0","advert_tmg_dyn_1","advert_tmg_dyn_2"],xs:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg","advert_tmg_dyn_0","advert_tmg_dyn_1","advert_tmg_dyn_2"]}:"story"==tmgAds.page.pagetype||"live"==tmgAds.page.pagetype||"video"==tmgAds.page.pagetype||"gallery"==tmgAds.page.pagetype?e.slots={x:["advert_tmg_mpu"],l:["advert_tmg_mpu"],m:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg"],s:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg","advert_tmg_dyn_0","advert_tmg_dyn_1","advert_tmg_dyn_2"],xs:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg","advert_tmg_dyn_0","advert_tmg_dyn_1","advert_tmg_dyn_2"]}:e.slots={x:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg"],l:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg"],m:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg"],s:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg","advert_tmg_dyn_0","advert_tmg_dyn_1","advert_tmg_dyn_2"],xs:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg","advert_tmg_dyn_0","advert_tmg_dyn_1","advert_tmg_dyn_2"]},e.adslots=e.slots[e.viewport],e.outputArray=[];for(var t=0;t<e.adslots.length;t++){tmgAdsLog("Adding this slot to the bids requested from Amazon: "+e.adslots[t]);var s=e.adslots[t].split("_")[2];e.item={slotID:e.adslots[t],slotName:e.adunit,sizes:e.sizemap[s]},e.outputArray.push(e.item)}return e.output={slots:e.outputArray},e.output}function tmgAdsThrottle(d,i){var a,o;return i=i||tmgAds.plugins.lazyLoad.delayCall,function(){var e=this,t=+new Date,s=arguments;a&&t<a+i?(clearTimeout(o),o=setTimeout(function(){a=t,d.apply(e,s)},i)):(a=t,d.apply(e,s))}}function tmgAdsElementIsInView(e,t){var s=[{left:0,right:0,top:0,bottom:0},t].reduce(function(t,s){return Object.keys(s).forEach(function(e){t[e]=s[e]}),t},{}),d=e.getBoundingClientRect(),i=window.innerHeight,a=window.innerWidth,o=d.top+s.top,r=d.bottom-s.bottom,n=d.left-s.left,g=d.right+s.right;return o<i&&0<r&&(n<a&&0<g)}function tmgAdsElementInView(e,t,s){var d=e.id.split("_"),i="unknown";i="dyn"==d[2]?d[2]+d[3]:d[2];var a=!1;tmgAdsElementIsInView(e,s)&&!a&&(a=!0,"dyn"==d[2]&&0<d[3]&&(googletag.pubads().updateCorrelator(),console.log("tmgAdsElementInView: UPDATE CORRELATOR: "+i)),googletag.cmd.push(tmgAdsBuildAd(e.id,"lazy=true","").display()),tmgAdsPerf("mark",["adverts_create_"+i])),t.addEventListener("scroll",tmgAdsThrottle(function(){tmgAdsElementIsInView(e,s)&&!a&&(a=!0,"dyn"==d[2]&&0<d[3]&&(googletag.pubads().updateCorrelator(),console.log("tmgAdsElementInView: UPDATE CORRELATOR: "+i)),googletag.cmd.push(tmgAdsBuildAd(e.id,"","").display()),tmgAdsPerf("mark",["adverts_create_"+i]))},tmgAds.plugins.lazyLoad.delayCall))}function createAdvert(e,t,s){var d;return(d=document.createElement("div")).classList.add("js-advert","advert"),d.id=void 0!==t?"advert_tmg_"+e+"_"+t:"advert_tmg_"+e,d.id=void 0!==s&&s?d.id+"_"+s:d.id,d.setAttribute("data-adtype",e),d}function tmgAdsGetTitleForInjected(e){var t;return traverse()?t=e:tmgAdsGetTitleForInjected(e.parentNode),t.parentNode.querySelector(".component-heading").childNodes[0].textContent.trim().replace(/ /g,"_").toLowerCase()}function traverse(e){return e.parentNode.classList.contains("list-of-entities")}function tmgAdsNativeInject(e,t,s,d,i){void 0!==i?i.multiList&&void 0!==i.multiList?document.querySelectorAll(e).forEach(function(e,t){tmgAdsInjectList(e,i,d,t)}):tmgAdsInjectList(document.querySelector(e),i,d):(void 0===s&&(s=0),tmgAdsInjectAdvert(document.querySelectorAll(e)[s],t,d))}function tmgAdsInjectList(s,e,d,i){var a,o,r,n=s.children.length,t=[];i=i;tmgSetAdvertPositions(e.repeat,t,e,n),t.forEach(function(e,t){r=createAdvert(d,t,i),(a=document.createElement("li")).classList.add("list-of-entities__item"),a.appendChild(r),o=e<=n?e:n,tmgAdsCreateItem(s.children[o-1],a,n<=o?"afterend":"beforebegin",r.id,"list")},i)}function tmgSetAdvertPositions(e,t,s,d){if(e)for(var i=0<Math.floor(d/s.position)?Math.floor(d/s.position):1,a=1;a<=i;a++)1<a?t.push(s.position*a-(a-1)):t.push(s.position*a);else t.push(s.position)}function tmgAdsInjectAdvert(e,t,s){var d=createAdvert(s,void 0),i="before"===t?"beforebegin":"afterend";"before"===t&&(i="beforebegin"),"after"===t&&(i="afterend"),"replace"===t&&(i="replace"),tmgAdsCreateItem(e,d,i,d.id,"std")}function tmgAdsCreateItem(e,t,s,d,i){requestAnimationFrame(function(){"beforebegin"==s||"afterend"==s?e.insertAdjacentHTML(s,t.outerHTML):"object"==typeof e?(e.innerHTML="",e.appendChild(t)):console.warn("WARNING: native ad placement selector not found ["+d+"]")})}function tmgAdsCreateNativeSlots(n){var g={vp:n.layout.viewport,pt:n.page.pagetype,data:n.plugins.nativeads.config};("live"!==g.pt&&"video"!==g.pt||(g.pt="story"),-1===n.plugins.nativeads.config.exclude.indexOf(n.page.businessseg))?(tmgAdsLog("tmgAdsCreateNativeSlots: Channel/BusinessSeg supported - "+n.page.businessseg),g.data.pagetype[g.pt]?g.data.pagetype[g.pt].adverts.forEach(function(e){if(e.active)if(-1===e.exclude.indexOf(n.page.businessseg)&&0<=e.include.indexOf(n.page.businessseg)||0==e.exclude.length&&0==e.include){tmgAdsLog("tmgAdsCreateNativeSlots: "+e.id+" - MATCHED");var t=e.id,s=e.selector,d=e.position,i=e.poscount,a=e.list,o=e.viewports,r=document.querySelector(s);o.forEach(function(e){e===g.vp&&document.body.contains(r)&&tmgAdsNativeInject(s,d,i,t,a)})}else tmgAdsLog("tmgAdsCreateNativeSlots: "+e.id+" - BLOCKED due to businessSegment over-ride ["+n.page.businessseg+"]");else tmgAdsLog("tmgAdsCreateNativeSlots: "+e.id+" - inactive")}):tmgAdsLog("tmgAdsCreateNativeSlots: Page template not supported - "+n.page.pagetype)):tmgAdsLog("tmgAdsCreateNativeSlots: Channel/BusinessSegment NOT supported - "+n.page.businessseg)}function tmgAdsCreate(e,t){if((tmgAds.plugins.headerBidders.ix.active||tmgAds.plugins.adixon)&&!tmgAds.plugins.adixoff){if("received"!=tmgAds.plugins.headerBidders.ix.bidstatus&&"timeout"!=tmgAds.plugins.headerBidders.ix.bidstatus)return void(tmgAds.plugins.headerBidders.ix.timeoutCount<=tmgAds.plugins.headerBidders.ix.timeout&&setTimeout(function(){tmgAds.plugins.headerBidders.ix.timeoutCount+=10,tmgAdsCreate(e,"tmgAds.plugins.headerBidders.ix.bidstatus not received ["+tmgAds.plugins.headerBidders.ix.bidstatus+"] retrying -> "+tmgAds.plugins.headerBidders.ix.timeoutCount)},tmgAds.plugins.headerBidders.checkFreq));tmgAds.plugins.headerBidders.ix.bidstatus}if((tmgAds.plugins.headerBidders.prebid.active||tmgAds.plugins.adprebidon)&&!tmgAds.plugins.adprebidoff){if("received"!=tmgAds.plugins.headerBidders.prebid.bidstatus&&"timeout"!=tmgAds.plugins.headerBidders.prebid.bidstatus)return void(tmgAds.plugins.headerBidders.prebid.timeoutCount<=tmgAds.plugins.headerBidders.prebid.timeout&&setTimeout(function(){tmgAds.plugins.headerBidders.prebid.timeoutCount+=10,tmgAdsCreate(e,"tmgAds.plugins.headerBidders.prebid.bidstatus not received ["+tmgAds.plugins.headerBidders.prebid.bidstatus+"] retrying -> "+tmgAds.plugins.headerBidders.prebid.timeoutCount)},tmgAds.plugins.headerBidders.checkFreq));tmgAds.plugins.headerBidders.prebid.bidstatus}if((tmgAds.plugins.headerBidders.amazon.active||tmgAds.plugins.adamazonon)&&!tmgAds.plugins.adamazonoff){if("received"!=tmgAds.plugins.headerBidders.amazon.bidstatus&&"timeout"!=tmgAds.plugins.headerBidders.amazon.bidstatus)return void(tmgAds.plugins.headerBidders.amazon.timeoutCount<=tmgAds.plugins.headerBidders.amazon.timeout&&setTimeout(function(){tmgAds.plugins.headerBidders.amazon.timeoutCount+=10,tmgAdsCreate(e,"tmgAds.plugins.headerBidders.amazon.bidstatus not received ["+tmgAds.plugins.headerBidders.amazon.bidstatus+"] retrying -> "+tmgAds.plugins.headerBidders.amazon.timeoutCount)},tmgAds.plugins.headerBidders.checkFreq));tmgAds.plugins.headerBidders.amazon.bidstatus}tmgAds.plugins.adprebidoff&&console.log("PREBID: Prebid.js turned off via url-param"),tmgAds.plugins.adamazona9off&&console.log("AMAZON: Amazon A9 turned off via url-param"),tmgAds.plugins.adindexhboff&&console.log("INDEXCH: IndexExchange turned off via url-param");var s={};if(document.querySelector(".advert-banner")&&document.querySelector(".container-fluid")&&0==e.sticky){var d=document.querySelector(".advert-banner"),i=document.querySelector(".container-fluid");i.parentNode.insertBefore(d,i.nextSibling),d.style.paddingBottom="10px",d.style.borderBottom=0}if(tmgAds.sticky&&("ban"==tmgAds.config.deliveryModel.activityStatus||"mpu"==tmgAds.config.deliveryModel.activityStatus?("ban"==tmgAds.config.deliveryModel.activityStatus&&document.getElementsByClassName("js-advert-banner")[0].classList.add("is-sticky"),"mpu"==tmgAds.config.deliveryModel.activityStatus&&(document.getElementsByClassName("js-advert-banner")[0]&&(document.getElementsByClassName("js-advert-banner")[0].style.display="none"),"gallery"==tmgAds.page.pagetype?document.getElementsByClassName("article__sidebar-inner")[0]?document.getElementsByClassName("article__sidebar-inner")[0].classList.add("is-sticky"):document.getElementsByClassName("gallery__sidebar")[0].classList.add("is-sticky"):document.getElementsByClassName("js-sidebar")[0]&&document.getElementsByClassName("js-sidebar")[0].classList.add("is-sticky"))):console.log("NO MODEL TO SET ON THIS PAGE")),s.isLazyLoad=function(e,t){return tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].active?(tmgAdsLog("LazyLoad-Check: PASS: viewport -> "+tmgAds.layout.viewport),null!==typeof tmgAds.dfp.customvars.geo&&(-1<tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].geo.indexOf(tmgAds.dfp.customvars.geo)||0==tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].geo.length)?(tmgAdsLog("LazyLoad-Check: PASS: geo -> "+tmgAds.dfp.customvars.geo),-1<tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].channels.indexOf(tmgAds.dfp.site)||0==tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].channels.length?(tmgAdsLog("LazyLoad-Check: PASS: site -> "+tmgAds.dfp.site),-1<tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].lazy.indexOf(e)?(tmgAdsLog("LazyLoad-Check: PASS: adtype -> "+e),!(-1<tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].exempt.indexOf(t))):(tmgAdsLog("LazyLoad-Check: FAIL: adtype -> "+e),!1)):(tmgAdsLog("LazyLoad-Check: FAIL: site -> "+tmgAds.dfp.site,tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].channels.indexOf(tmgAds.dfp.site)),!1)):(tmgAdsLog("LazyLoad-Check: FAIL: geo -> "+tmgAds.dfp.customvars.geo),!1)):(tmgAdsLog("LazyLoad-Check: FAIL: viewport -> "+tmgAds.layout.viewport),!1)},s.adverts=document.querySelectorAll(".js-advert:not(.is-loaded)"),document.hasFocus())requestAnimationFrame(function(){for(var e=0;e<s.adverts.length;++e)s.adtype=s.adverts[e].id.split("_")[2],s.isLazyLoad(s.adtype,s.adverts[e].id)?(tmgAdsLog("tmgAdsCreate: LAZY: "+s.adverts[e].id),tmgAdsElementInView(s.adverts[e],window,{top:tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].offset})):(tmgAdsLog("tmgAdsCreate: NON-LAZY: "+s.adverts[e].id),googletag.cmd.push(tmgAdsBuildAd(s.adverts[e].id,"","").display()))});else{console.log("tmgAdsCreate: NO FOCUS");for(var a=0;a<s.adverts.length;++a)s.adtype=s.adverts[a].id.split("_")[2],s.isLazyLoad(s.adtype,s.adverts[a].id)?(tmgAdsLog("tmgAdsCreate: LAZY: "+s.adverts[a].id),tmgAdsElementInView(s.adverts[a],window,{top:tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].offset})):(tmgAdsLog("tmgAdsCreate: NON-LAZY: "+s.adverts[a].id),googletag.cmd.push(tmgAdsBuildAd(s.adverts[a].id,"","").display()))}}function tmgAdsObjSz(e){var t=0;if("object"==typeof e)if(Object.keys)t=Object.keys(e).length;else if(window._)t=_.keys(e).length;else if(window.$)t=$.map(e,function(){return 1}).length;else for(var s in e)e.hasOwnProperty(s)&&t++;return t}window.tmgAds=window.tmgAds||{},window.tmgAds.cmd=window.tmgAds.cmd||[],window.tmgAds.log=window.tmgAds.log||[],window.tmgAds.sticky=window.tmgAds.sticky||!1,window.tmgAds.metrics=window.tmgAds.metrics||{ads:{}},window.tmgAds.about={version:"5.7.0",date:"2018-07-31",company:"Telegraph Media Group",author:"Sean Dillon - sean@telegraph.co.uk"},window.tmgAds.mytelegraph=window.tmgAds.mytelegraph||null,window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],function(){if("function"==typeof window.CustomEvent)return;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var s=document.createEvent("CustomEvent");return s.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),s}e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(e){tmgAdsLog("##############################################################################"),tmgAdsLog("#                        TMG-GPT.JS  INITIALISATION                          #"),tmgAdsLog("##############################################################################"),tmgAdsInitEventHandlers(),tmgAdsEvent("tmggpt:initstart"),tmgAdsInit(),tmgAdsInitConfig(),tmgAdsInitGeoAPIStatus(),tmgAdsInitData(),tmgAdsInitDeliveryModel(),tmgAdsInitHeaderBidders(),tmgAdsInitDFP(),tmgAdsLoadJS("gptjs",e.plugins.gpt.url,function(){}),e.plugins.adgrapeshotoff?console.log("GRAPESHOT: Turned off by url-param."):e.plugins.grapeshot.active||e.plugins.adgrapeshoton?(e.plugins.adgrapeshoton&&console.log("GRAPESHOT: Turned on by url-param"),e.plugins.grapeshot.preload(),tmgAdsLoadJS("grapeshot",e.plugins.grapeshot.url,e.plugins.grapeshot.callback)):tmgAdsLog("GRAPESHOT: Not active"),e.plugins.adbeemrayoff?console.log("BEEMRAY: Turned off by url-param."):e.plugins.beemray.active||e.plugins.adbeemrayon?(e.plugins.adbeemrayon&&console.log("BEEMRAY: Turned on by url-param"),e.plugins.beemray.preload(),e.plugins.adbeemraytest?(console.log("BEEMRAY: loading staging version of the SDK"),tmgAdsLoadJS("beemray",e.plugins.beemray.testurl,e.plugins.beemray.callback)):tmgAdsLoadJS("beemray",e.plugins.beemray.url,e.plugins.beemray.callback)):tmgAdsLog("BEEMRAY: Not active"),e.plugins.adscrolloff?console.log("SCROLL: Turned off by url-param."):e.plugins.scroll.active||e.plugins.adscrollon?(e.plugins.adscrollon&&console.log("SCROLL: Turned on by url-param"),e.plugins.scroll.preload(),tmgAdsLoadJS("scroll",e.plugins.scroll.url,e.plugins.scroll.callback)):tmgAdsLog("SCROLL: Not active"),tmgAdsEvent("tmggpt:initend"),"interactive"==document.readyState||"complete"==document.readyState?(tmgAdsLog("Page/DOM has already loaded - running tmgAdsCreate()"),(e.plugins.nativeads.active||e.plugins.adnativeon)&&tmgAdsCreateNativeSlots(e),requestAnimationFrame(function(){tmgAdsCreate(e,"document.readyState")})):document.addEventListener("DOMContentLoaded",function(){tmgAdsLog("DOMContentLoaded event -> Page/DOM has now loaded - running tmgAdsCreate()"),(e.plugins.nativeads.active||e.plugins.adnativeon)&&tmgAdsCreateNativeSlots(e),requestAnimationFrame(function(){tmgAdsCreate(e,"DOMContentLoaded")})})}(tmgAds);
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(1),a=r(i),o=n(2),s=r(o),l=n(3),u=r(l),d=n(24),c=r(d),f=n(11),p=r(f),g=n(29),m=r(g);c.default.addExtension("fb6cjraf9cejut2a",{run:function(){u.default.inventory.collect=!1;for(var e=[{name:"pageType",selector:"meta[name='tmgads.pagetype']",type:"attribute",attribute:"content"},{name:"businessSegment",selector:"meta[name='tmgads.businessSegment']",type:"attribute",attribute:"content"},{name:"channel",selector:"meta[name='DCSext.Channel']",type:"attribute",attribute:"content"},{name:"keywords",type:"varArray",variable:"window.liftIgniterPageKeywords"},{name:"premiumState",selector:"meta[name='tmg.premium.state']",type:"attribute",attribute:"content"},{name:"displayDate",selector:"meta[name='DCSext.articleFirstPublished']",type:"attribute",attribute:"content"},{name:"published_time",selector:"meta[itemprop='datePublished']",type:"attribute",attribute:"content"}],t=p.default.scrapeOpenGraph(),n=0;n<e.length;n++){var r=e[n],i=p.default.scrapeFeature(r);i&&i.length>0&&(t[r.name]=i)}"undefined"==typeof t.published_time&&(t.published_time=t.displayDate);var a="";if(null!=document.querySelector('meta[name="tmgads.pagetype"]')&&(a=document.querySelector('meta[name="tmgads.pagetype"]').content),a){var o="travel-review"===a?".calendar-availability .travel-price__price":".info-bar--clone .check-availability-cta .component-content .travel-price__wrap .travel-price__price";null!=document.querySelector(o)&&(t.price=document.querySelector(o).innerHTML.trim())}m.default.sendItem(t)}}),s.default.start(a.default)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={exportable:{scrapedFields:[{type:"attribute",transforms:[{name:"trim"}],selector:'header > div.entity-property.component.entity-property-stars > div > span > meta[itemprop="ratingValue"]',name:"rating",attribute:"content"},{type:"text",transforms:[{name:"trim"}],name:"continent",selector:".component-content.breadcrumbs__container > .breadcrumbs__item:nth-of-type(4)"},{type:"text",transforms:[{name:"trim"}],name:"country",selector:".component-content.breadcrumbs__container > .breadcrumbs__item:nth-of-type(5)"},{type:"text",transforms:[{name:"trim"}],name:"city",selector:".component-content.breadcrumbs__container > .breadcrumbs__item:nth-of-type(6)"},{type:"text",transforms:[{name:"replace",old:" • ",new:" "}],name:"cosmeticDate",selector:"span.article-date.component > span.component-content > time"}],homepage:"https://www.telegraph.co.uk/travel/destinations/europe/italy/veneto/venice/articles/Venice-attractions-what-to-see-and-do-in-winter2/",inventoryCollect:!0,mandatoryScrapeFeatures:[],widgets:[{name:"Gallery",uuid:"90a98061-e0d6-4ff0-b345-da608ec3798d",maxCount:3,defaultRule:"Gallery",testFraction:100,view:"disabled",selector:".list-of-entities__item.list-of-entities__item--gallery",itemTemplate:'<div class="list-of-entities__item-link">\n  <a href="{{url}}" class="list-of-entities__item-image-container" tabindex="-1" data-frz-ratio="1.60" data-frz-parent="" style="background-image: url(" {{thumbnail}} ";);">\n    <div class="responsive-image list-of-entities__item-image " data-width="1253" data-height="783" data-alt="{{title}}" data-frz-ratio="1.60" data-src="{{thumbnail}}" style="padding-bottom:62.49%;" data-asset-type="gallery" data-lazy-loaded="true">\n      <noscript>\n<img src="{{thumbnail}}" alt="{{title}}" width="1253" height="783" class="responsive-image--fallback"/>\n</noscript>\n      <img src="{{thumbnail}}" class="responsive-image__source" alt="{{title}}"></div>\n    <div class="list-of-entities__icon" title="Gallery"><span class="sr-only">Gallery</span></div>\n  </a>\n  <div class="list-of-entities__item-body">\n    <span class="m_meta-property">\n<time class="m_meta-property__date" title="13 May 2018, 12:00am" datetime="2018-05-13T12:00:06" itemprop="datePublished" pubdate="">\n<span class="m_meta-property__date-date">13 May 2018</span><span class="m_meta-property__date-separator">,</span>\n    <span class="m_meta-property__date-time">12:00am</span>\n    </time>\n    </span>\n    <h3 class="list-of-entities__item-body-headline"><a href="{{url}}"><span class="sr-only">Gallery: </span>{{title}}</a></h3>\n  </div>\n</div>',params:{requestFields:["url","title","thumbnail"]}},{name:"Travel",uuid:"a098d1fd-b387-486e-ae08-49662f69db40",maxCount:21,defaultRule:"Travel-widget",testFraction:100,includeRegex:"www.telegraph.co.uk/travel/",requiredSelector:".snippet-onward-journey",view:"draft",selector:"div.snippet-onward-journey > div > div > div.list.version-5.section > div > div.js-list-of-entities.component-content > ol > li.list-of-entities__item",itemTemplate:'<div class="list-of-entities__item-link">\n  <a href="{{url}}" class="list-of-entities__item-image-container" tabindex="-1" data-frz-ratio="1.60" data-frz-parent="" style="background-image: url(&quot;{{image}}&quot;);">\n    <div class="responsive-image list-of-entities__item-image " data-width="320" data-height="199" data-alt="Folies-Bergère, Paris" data-frz-ratio="1.60" data-src="{{image}}" style="padding-bottom:62.19%;" data-asset-type="article" data-lazy-loaded="true">\n      <noscript>\n<img src="{{image}}" alt="{{title}}" width="320" height="199" class="responsive-image--fallback"/>\n</noscript>\n      <img src="{{image}}" class="responsive-image__source" alt="{{title}}"></div>\n  </a>\n  <div class="list-of-entities__item-body">\n    <span class="m_meta-property">\n<time class="m_meta-property__date" title="{{displayDate}}" datetime="{{published_time}}" itemprop="datePublished" pubdate="">\n<span class="m_meta-property__date-date" style="display: none;"></span><span class="m_meta-property__date-separator" style="display: none;">,</span>\n    <span class="m_meta-property__date-time" style="display: none;"></span>\n    <span class="m_meta-property__date-descriptor">{{displayDate}}</span></time>\n    </span>\n    <h3 class="list-of-entities__item-body-headline">\n      <a href="{{url}}">{{title}}</a>\n    </h3>\n  </div>\n</div>',params:{requestFields:["url","title","image","published_time","displayDate","pageType","continent","country","city"]}},{name:"Author",uuid:"2beb94cb-e3f2-43b2-b689-f0dc31346f02",maxCount:5,testFraction:100,includeRegex:"https://www.telegraph.co.uk/authors/",view:"preview",selector:"div.list-of-entities.component.version-11-no-numbers > div.js-list-of-entities.component-content > ol > li.list-of-entities__item",itemTemplate:'<div class="list-of-entities__item-link">\n  <a href="{{url}}" class="list-of-entities__item-image-container" tabindex="-1" data-frz-ratio="1.60" data-frz-parent="" style="background-image: url(&quot;{{image}}&quot;);">\n    <div class="responsive-image list-of-entities__item-image " data-width="1280" data-height="799" data-alt="{{title}}" data-frz-ratio="1.60" data-src="{{image}}" style="padding-bottom:62.42%;" data-asset-type="article" data-lazy-loaded="true">\n      <noscript>\n<img src="{{image}}" alt="{{title}}" width="1280" height="799" class="responsive-image--fallback"/>\n</noscript>\n      <img src="{{image}}" class="responsive-image__source" alt="{{title}}"></div>\n  </a>\n  <div class="list-of-entities__item-body">\n    <span class="m_meta-property">\n<time class="m_meta-property__date" title="{{cosmeticDate}}" datetime="{{published_time}}" itemprop="datePublished" pubdate="">\n<span class="m_meta-property__date-date">{{cosmeticDate}}</span>\n    </time>\n    </span>\n    <h3 class="list-of-entities__item-body-headline">\n      <a href="{{url}}">{{title}}</a>\n    </h3>\n  </div>\n</div>',script:"var titleElement = document.querySelector('div.component-header h2.component-heading a')\ntitleElement.innerText = \"More Stories\"",params:{requestFieldsAON:"true",requestFields:["url","title","image","cosmeticDate","published_time","businessSegment","channel"]}}]}},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){console.log("JavaScript SDK is not activated.")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a),s=n(6),l=r(s),u=n(22),d=r(u),c=n(23),f=r(c),p=n(24),g=r(p),m=n(8),h=r(m),v=n(10),y=r(v),w=n(25),b=r(w),k=n(26),T=r(k),_=n(27),I=r(_),S=n(9),x=r(S),C=n(11),E=r(C),L=n(28),O=r(L),R=n(29),M=r(R),D=n(4),A=r(D),N=n(32),U=r(N),W=n(14),P=r(W),j=n(33),B=r(j),q=n(34),H=r(q),F=n(37),G=r(F),K=n(38),V=r(K);t.default={start:function(e){(V.default.isConsoleReferrer()||V.default.isConsoleChild())&&V.default.setStateToConsoleMode(),o.default.serverConfig=e,"console"==x.default.getParam("li-view-mode")?B.default.startTunnel():this.runBacklog()},runBacklog:function(){var e=this,t=o.default.pmVar,n=window[t].q||[];window[t]=function(){return e.processCall(arguments)};for(var r=0;r<n.length;r++)e.processCall(n[r])},processCall:function(e){var t=Array.prototype.slice.call(e);if(o.default.debug&&(console.log("$p function: "+t[0]),console.log("$p params: "+JSON.stringify(t.slice(1)))),"ebu28ea9cbu0v9j5"===o.default.jsKey){var n,r=o.default.jsKey,a=E.default.getCanonicalUrl().split("?")[0];n="https://www.wsbtv.com/news"===a}try{switch(t[0]){case"init":this.init.apply({},t.slice(1));break;case"send":if(r&&!n)break;h.default.send.apply({},t.slice(1));break;case"wsb_send":h.default.send.apply({},t.slice(1));break;case"sendRobust":return h.default.sendRobust.apply({},t.slice(1));case"collectWidgetInfo":T.default.collectWidgetInfo.apply({},t.slice(1));break;case"collectInventory":O.default.collect.apply({},t.slice(1));break;case"setPushStateReset":I.default.setPushStateReset.apply({},t.slice(1));break;case"setOnHashChangeReset":I.default.setOnHashChangeReset.apply({},t.slice(1));break;case"printDebugInfo":this.printDebugInfo.apply({},t.slice(1));break;case"debug":o.default.debug=t[1]===!0;break;case"resetPageview":if(r&&!n)break;return M.default.isActivated()?M.default.resetPageview.apply({},t.slice(1)):i();case"wsb_resetPageview":return M.default.isActivated()?M.default.resetPageview.apply({},t.slice(1)):i();case"setUserId":return M.default.isActivated()?l.default.setUserId.apply({},t.slice(1)):i();case"getWidgetNames":return M.default.isActivated()?M.default.getWidgetNames.apply({},t.slice(1)):i();case"setRequestFields":M.default.isActivated()?M.default.setRequestFields.apply({},t.slice(1)):i();break;case"setRequestFieldsAON":M.default.isActivated()?M.default.setRequestFieldsAON.apply({},t.slice(1)):i();break;case"setArrayRequestFields":M.default.isActivated()?M.default.setArrayRequestFields.apply({},t.slice(1)):i();break;case"setMandatoryRequestFields":M.default.isActivated()?M.default.setMandatoryRequestFields.apply({},t.slice(1)):i();break;case"setMandatoryArrayRequestFields":M.default.isActivated()?M.default.setMandatoryArrayRequestFields.apply({},t.slice(1)):i();break;case"optOut":M.default.isActivated()?M.default.optOut.apply({},t.slice(1)):i();break;case"optBack":M.default.isActivated()?M.default.optBack.apply({},t.slice(1)):i();break;case"setGetQueryInfo":M.default.isActivated()?M.default.setGetQueryInfo.apply({},t.slice(1)):i();break;case"setNoTag":M.default.isActivated()?M.default.setNoTag.apply({},t.slice(1)):i();break;case"register":M.default.isActivated()?M.default.register.apply({},t.slice(1)):i();break;case"fetch":M.default.isActivated()?M.default.fetch.apply({},t.slice(1)):i();break;case"track":M.default.isActivated()?M.default.track.apply({},t.slice(1)):i();break;case"userHash":return M.default.isActivated()?M.default.userHash.apply({},t.slice(1)):i();case"abTestSlice":return M.default.isActivated()?M.default.abTestSlice.apply({},t.slice(1)):i();case"render":return M.default.isActivated()?M.default.render.apply({},t.slice(1)):i();case"renderCustomWidget":return M.default.isActivated()?M.default.renderCustomWidget.apply({},t.slice(1)):i();case"sendItem":if(r&&!n)break;return M.default.isActivated()?M.default.sendItem.apply({},t.slice(1)):i();case"setContext":if(r&&!n)break;return M.default.isActivated()?M.default.setContext.apply({},t.slice(1)):i();case"getHist":return M.default.isActivated()?o.default.getHistList.apply(o.default,t.slice(1)):i();case"getPageviewId":return M.default.isActivated()?o.default.pvid:i();case"setHist":return M.default.isActivated()?M.default.setHist.apply({},t.slice(1)):i();case"search":return U.default.search.apply({},t.slice(1));case"onload":return t[1]();case"monitorSearch":return M.default.isActivated()?M.default.monitorSearch.apply({},t.slice(1)):i();case"runDiagnostics":return P.default.runDiagnostics(t[1]||"log")}}catch(t){A.default.throwScriptError("[WARN] LI: We encountered an unexpected script error running "+(e[0]||""),t)}},init:function(e,t){if(null==o.default.jsKey){if(t=t||{},o.default.jsKey=e,o.default.disabledCust[e])return void console.log("Thank you for using LiftIgniter! If you are interested in re-activating our service, please contact us at support@liftigniter.com");if(window.$ps&&(P.default.startupTimes.beaconLoadStartTime=0|window.$ps),window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(P.default.startupTimes.initStartTime=0|window.performance.now()),g.default.maybeRunEarlyExtension(),!(!o.default.isInIframe&&window&&window.location&&window.location.origin&&""!=window.location.origin&&A.default.isBadActor(window.location.origin))){f.default.addEvent(window,"scroll",I.default.debounce(y.default.checkScroll,100)),t.fi&&(t.config={activity:{activityServer:"http://start.liftigniter.com"},sdk:{queryServer:"http://start.liftigniter.com",multiFetch:!0,enableBackup:!1},inventory:{inventoryServer:"http://start.liftigniter.com"}}),o.default.init(t.config),l.default.initializeCookies(),b.default.initializeTimers(),d.default.initializeDurationEvents(),I.default.initializeNavigationEvents(),o.default.extensionOff||g.default.maybeRunExtension(),G.default.addCustomEvents(),H.default.serveWidgets(null);var n=!0;o.default.serverConfig.exportable.inventoryCollect===!1&&(n=!1),o.default.inventory.collect&&n&&f.default.domComplete(function(){var e=0;P.default.startupTimes.initEndTime||(e=1e3),window.setTimeout(function(){try{if(O.default.collect(),window.performance&&window.performance.now&&"function"==typeof window.performance.now&&window.performance.now()>2e4){var e="Scraping took "+(0|window.performance.now())+' milliseconds, more than the threshold of 10 seconds. Run $p("runDiagnostics") and look at [DEBUG] Inventory data for more timing information',t=10*(window.performance.now()/1e4|0);o.default.showLiveWarnings&&console.log(e),h.default.send("scraping_delayed",{errs:"Scraping took more than "+t+" seconds, but less than "+(t+10)+" seconds"})}}catch(t){if(o.default.showLiveWarnings)var e="LiftIgniter: Error in inventory collection: "+t+"; please check the JSON formatting for metadata; you can check formatting at http://jsonlint.com";h.default.send("scraping_fail",{errs:""+t}),P.default&&P.default.errorMessagesByEventType&&(P.default.errorMessagesByEventType.scraping_fail=e),console.log(e)}},e)}),h.default.checkBuffer(),window.setInterval(function(){h.default.checkBuffer()},1e4),window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(P.default.startupTimes.initEndTime=0|window.performance.now())}}},printDebugInfo:function(e){var t=Array.prototype.slice.call(arguments);switch(console.log("Debug Info: <"+e+">. Args:"),console.log(t.slice(1)),console.log("Results:"),e){case"config":console.log(o.default);break;case"scrapeFeature":console.log(E.default.scrapeFeature.apply({},t.slice(1)));break;case"scrapeInventory":console.log(O.default.scrapeInventory.apply({},t.slice(1)))}}},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),a=r(i),o=n(12),s=r(o),l=window.$igniter_var||window.$petametricsVar||window.$petametrics_var;t.default={trial:!1,trackingWord:"donottrack",extensionOff:!1,disabledCust:{"3ra9ebvgp1gnl9gu":!0,jo34k2op9eztyzj1:!0,llbf18lltc4upsf8:!0,"3f2nr8ipir0923el":!0,gn0ee46lqa6l86dv:!0,j8vr8s11slka1e3d:!0,u7nof0s7krrqfgav:!0},debug:!1,showLiveWarnings:!0,activity:{activityServer:"//query.petametrics.com",activitySamplingPercent:100,itemRegex:void 0,excludeRegex:void 0,includeBrowsingHistory:!1,canonicalUrlTransform:function(e){return e},urlTransform:function(e){return e}},useCanonicalUrl:!0,googleAnalytics:null,globalTracking:!0,disableCustomWidget:!1,claimedGid:a.default.notABot()&&a.default.notOptOut()?s.default.randomStringGid(20):"donottrack",useThirdParty:!1,botRegex:/bot|crawler|spider|pycurl|larbin|findlinks|ia_archiver|htdig|slurp|HeadlessChrome/i,knownThirdPartyRegex:/webcache.googleusercontent.com|translate.googleusercontent.com|www.translatoruser.net|translate.baiducontent.com|babelserver.org|jsfiddle.net|fiddle.jshell.net|cc.bingj.com|translate.ru/,knownBadActorRegex:void 0,postQuery:!1,noTag:!1,limitHistory:!1,sdk:{queryServer:"//query.petametrics.com",backupQueryServer:"//query1.petametrics.com",queryApiVersion:"v3",getQueryInfo:!1,requestFields:["url","author","title","rank","thumbnail"],mandatoryRequestFields:[],arrayRequestFields:[],mandatoryArrayRequestFields:[],multiFetch:!1,multiTrack:!1,enableBackup:!0,requestFieldsAON:!1,customTrackFunc:void 0,widgetAnalysis:void 0,retry:!0,manualHist:void 0,iden:"url",historyTracking:!0,ogUrlHistory:!1,pushStateReset:!1,replaceStateReset:!1,stabilize:!1,alwaysSendWidgetResponse:!0,flipQueue:!1,callHashType:"opts",pushStateCallback:function(){},checkIfVisibleItemsOnlyCurrentUrl:!0,checkIfVisibleItemsIncludeCurrentUrl:!0,stripParamsWhenCheckingVisibleItems:!0,checkItemsMismatch:!0,failIfCurrentItemTracked:!1,maxVizItemsToSend:30,renderTransform:function(e){return e},timerShownLikelyDuplicate:500,timerBufferShown:0,useLocationForCurrentUrl:!1,addOnVisibleWhenTracking:!0,widgetHasVaryingLength:!1,failTrackUntilNewVisibleItemsInSpaPageReset:!1,autoRenderItemTransform:function(e){return e}},clickHist:{onLocalStorage:!0,onCookie:!1,urlTrans:function(e){return e},clickHistCKey:"_igch",clickHistLKey:"_igClkHis",cap:10,send:!1},longHist:{active:!1,bufferSize:100,recentDropSize:0},search:{queryServer:"//start.liftigniter.com",defaultQuery:"",max:10,off:0,requestFields:["url","title*","thumbnail","description*","image"]},fpo:{queryServer:"//fpo.petametrics.com",timeout:5e3},trackingTransURL:function(e){return e},customContext:{id:void 0},qOpt:{dynScrollInfo:!1,screenDim:!1,sendTimer:!0},shown:{active:!1,freqCap:3,vizCap:10,maxExclude:20,bufferSize:40,vizSendCap:void 0,freqCapKey:"_fcap"},inventory:{inventoryServer:"//query.petametrics.com",inventoryApiVersion:"v1",version:void 0,collect:!0,id:"url",jsonTransform:void 0,collectJSON:!0,collectOpenGraph:!0,collectOpenGraphOnly:!0,mandatoryOpenGraphFeatures:["title","url","type"],features:void 0,mandatoryFeatures:["title","url"],filters:[{name:"noIndex",value:"true"}],jsVars:void 0,useOpenGraphForCanonicalUrl:!0,useLinkRelForCanonicalUrl:!0,defaultType:"article",stripTagsForCanonicalUrl:!0,stripHashesForCanonicalUrl:!0,canonicalUrlTransform:function(e){return e},itemRegex:void 0,excludeRegex:void 0,ttl:0},customTrackFunc:void 0,pmVar:l,jsKey:null,loadedAt:window[l].l,version:"0.4",cookieDomain:a.default.getTopLevelDomain(window.location.hostname),thirdKey:"_igg",permKey:"_ig",sessKey:"_igt",sessRefKey:"_igsr",userRefKey:"_igur",histKey:"_igh",longHistKey:"_ighl",robustMsgSlot:"_igslot_",pisKey:"_ig_pis",siuKey:"_ig_siu",piuKey:"_ig_piu",cisKey:"_ig_cis",ciuKey:"_ig_ciu",dpisKey:"_ig_dpis",dpiuKey:"_ig_dpiu",iriuKey:"_ig_iriu",numPerKey:"_ig_nump",numSesKey:"_ig_sess",robustUseCookie:!0,robustUseStorage:!0,latestVizKey:"_iglviz_",lastClick:"_iglclk_",widgetClickContextKey:"_igwcc_",botClassificationKey:"_igb",gid:null,uid:null,sid:null,pvid:null,hist:null,histSettings:{stripTags:!0,stripHashes:!0,stripDashes:!1,fixHttps:!1,deduplicate:!0,maxItems:10,histRegex:/(.*)/,origin:void 0,transform:function(e){return e},globalTransform:function(e){return e}},getHistList:function(){return this.sdk.manualHist?this.sdk.manualHist:this.hist?(this.hist=this.hist.split(",").join("|"),this.hist.split("|").map(function(e){return decodeURIComponent(e)})):[]},getClickHistList:function(){},overrideViClickUrlWithResponseVisibleItemsByWidgetName:null,globalCtx:{},adblockCheck:!1,adblocker:!1,userAgent:navigator.userAgent,language:navigator.language,os:navigator.platform,colorDepth:screen.colorDepth,screenHeight:screen.height,screenWidth:screen.width,currentUrl:window.location.href,referrer:document.referrer.slice(0,200),isInIframe:!1,checkElementParentIsActuallyVisible:!1,enableSendFromHeadless:!0,timers:{stuck_10s:1e4,stuck_3m:18e4},onVisibleImmediatelyAfterScroll:!0,defaultApiEvents:["pageview","stuck_10s","stuck_3m"],serverConfig:{},refresh:function(){this.referrer=this.currentUrl,this.currentUrl=window.location.href},init:function(e){for(var t in e)this.hasOwnProperty(t)&&"object"==typeof this[t]&&!this[t].length?this[t]=a.default.mergeMap(this[t],e[t]):this[t]=e[t]}},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t;if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return t=new Date,t.setTime(e.getTime()),t;if(e instanceof Array){t=[];for(var n=0,r=e.length;n<r;n++)t[n]=i(e[n]);return t}if(e instanceof Element)return e.cloneNode(!0);if(e instanceof Object){t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=i(e[a]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")}function a(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("getObjectKeys called on a non-object");var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);if(T)for(var r=0,i=I;r<i;r++){var a=_[r];e.hasOwnProperty(a)&&t.push(a)}return t}function o(e){return a(e).length}function s(e,t){var n=e.split("?");if(n.length>=2){for(var r=encodeURIComponent(t)+"=",i=n[1].split(/[&;]/g),a=i.length;a-- >0;)i[a].lastIndexOf(r,0)!==-1&&i.splice(a,1);return e=n[0]+(i.length>0?"?"+i.join("&"):"")}return e}function l(e,t){if(g.default.showLiveWarnings&&console.log((e||"")+": "+t+", full stack trace: "+t.stack),y.default&&y.default.errorMessagesByEventType){var n=(e||"")+": "+t.stack;y.default.errorMessagesByEventType.script_error=n}h.default.send("script_error",{errs:(e||"")+": "+t,fullErrorDetails:n})}Object.defineProperty(t,"__esModule",{value:!0});var u=n(5),d=r(u),c=n(6),f=r(c),p=n(3),g=r(p),m=n(8),h=r(m),v=n(14),y=r(v),w=n(18),b=r(w),k=window,T=!0,_=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],I=_.length;for(var S in{toString:null})T=!1;t.default={waitOnSelect:function(e,t,n){var r=this,i=document.querySelector(e);return null===i?new b.default(function(e){return setTimeout(e,t)}).then(function(){return n>1?r.waitOnSelect(e,t,n-1):i}):b.default.resolve(i)},waitOnSelectAll:function(e,t,n,r){var i=this,a=document.querySelectorAll(e);return a.length<r?new b.default(function(e){return setTimeout(e,t)}).then(function(){return n>1?i.waitOnSelectAll(e,t,n-1,r):a}):b.default.resolve(a)},nullPromise:function(){return b.default.resolve(null)},generateUUID:function(){var e=d.default.getCurrentTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)});return t},getURLParameter:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[null,""])[1].replace(/\+/g,"%20"))||null},mergeMap:function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n},makeACopy:i,getUrlPath:function(e,t){var n=e.replace(/https?:\/\/[^\/]+/i,"");return t?n:n.split("?")[0].split("#")[0]},getObjectKeys:a,size:o,getTopLevelDomain:function(e){var t=e.split(".");return"com"==t[t.length-1]?t.slice(-2).join("."):null},djb2HashCode:function(e){for(var t=5381,n=0;n<e.length;n++){var r=e.charCodeAt(n);t=(t<<5)-t+r,t&=t}return Math.abs(t)},getTime:function(){return(new Date).getTime()},requestJsonp:function(e,t,n){var r="igniter_"+this.generateUUID().replace(/-/g,"");k[r]=function(t){e.apply(null,[t].concat(n||[]))};var i=t+(t.indexOf("?")>=0?"&":"?")+"jsonp="+r,a=document.createElement("script");a.type="text/javascript",a.setAttribute("src",i),document.head.appendChild(a)},notABot:function(){if(!g.default)return!0;var e=g.default.botClassificationKey&&f.default&&"1"==f.default.readCookie(g.default.botClassificationKey);return e&&!g.default.botRegex.test(g.default.userAgent)&&(g.default.userAgent=g.default.userAgent+";bot-because-blocked-before"),!g.default.botRegex.test(g.default.userAgent)&&!e},notOptOut:function(){if(!g.default)return!0;var e=f.default&&f.default.hasCookiesEnabled()&&"donottrack"!=g.default.uid&&"donottrack"!=f.default.readCookie(g.default.permKey);return e},isThirdPartyOrigin:function(e){return g.default.knownThirdPartyRegex&&g.default.knownThirdPartyRegex.test(e)},isBadActor:function(e){return g.default.knownBadActorRegex&&g.default.knownBadActorRegex.test(e)},getParam:function(e,t,n){return e&&t in e&&typeof e[t]==n?e[t]:void console.log("LI: Invalid or missing parameter: "+t)},sendPixelAndMarkErrorMessage:function(e,t){h.default.send(e,{errs:t}),y.default&&y.default.errorMessagesByEventType&&(y.default.errorMessagesByEventType[e]=t)},getOrElse:function(e,t,n){return t in e?e[t]:n},hashOpts:function(e){for(var t in e)e[t]||delete e[t];return this.djb2HashCode(JSON.stringify(e))},removeURLParameter:s,throwScriptError:l,androidVersionCheck:function(){var e=navigator.userAgent;return e.indexOf("Android")>=0?parseFloat(e.slice(e.indexOf("Android")+8)):-1}},e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getCurrentTime:function(){return(new Date).getTime()},getTimezoneOffset:function(){return(new Date).getTimezoneOffset()}},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){if(navigator.cookieEnabled)return!0;document.cookie="cookietest=1";var e=document.cookie.indexOf("cookietest=")!=-1;return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}function a(e,t,n){o(e,t,n,1e3)}function o(e,t,n,r){r=r||864e5;var i="";if(n){var a=new Date;a.setTime(a.getTime()+n*r),i=";expires="+a.toGMTString()}var o=g.default.cookieDomain?";domain="+g.default.cookieDomain:"";l(e),document.cookie=e+"="+t+i+o+";path=/"}function s(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}function l(e){var t=g.default.cookieDomain?";domain="+g.default.cookieDomain:"";document.cookie=e+"=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"+t+";path=/",document.cookie=e+"=1; expires=Thu, 01-Jan-1970 00:00:01 GMT;path=/"}function u(e){if("string"==typeof e){var t="donottrack"==e?7300:365;g.default.uid=e,o(g.default.permKey,g.default.uid,t)}}function d(e){"string"==typeof e&&(g.default.gid=e,o(g.default.thirdKey,e,365))}function c(){var e=!1,t=(!s(g.default.numPerKey),i());l(g.default.thirdKey),g.default.uid=s(g.default.permKey),g.default.uid?u(g.default.uid):(e=!0,t?u(v.default.generateUUID()):g.default.uid="nocookieaccess"),t&&(g.default.sid=s(g.default.sessKey)),g.default.sid||(t?(g.default.sid=v.default.generateUUID(),o(g.default.sessKey,g.default.sid)):g.default.sid="nocookieaccess"),g.default.pvid=v.default.generateUUID(),g.default.customBrowsingHistory&&g.default.sdk.historyTracking?g.default.customBrowsingHistory():t&&l(g.default.histKey),t&&(l(g.default.numPerKey),l(g.default.numSesKey),l(g.default.sessRefKey),l(g.default.userRefKey),"donottrack"==g.default.uid?o(g.default.permKey,g.default.uid,7300):o(g.default.permKey,g.default.uid,365))}function f(e,t,n){var r=g.default.clickHist.clickHistCKey,a=decodeURIComponent(s(r)),l="null"!==a?a.split(","):[],u=g.default.clickHist.cap||10,d=!1,c=g.default.clickHist.urlTrans(e);if(l=l.slice(Math.max(l.length-u,0),l.length),null!==c&&void 0!==c&&""!==c){for(var f=0;f<l.length;f++)l[f].split("|")[0]===c&&(d=!0);d||(l.length>=u&&l.shift(),l.push(c+"|"+t+"|"+n)),i()&&o(r,encodeURIComponent(l.join(",")),365)}}Object.defineProperty(t,"__esModule",{value:!0});var p=n(3),g=r(p),m=n(7),h=(r(m),n(4)),v=r(h);t.default={setGlobalId:d,setUserId:u,createCookie:o,readCookie:s,deleteCookie:l,initializeCookies:c,hasCookiesEnabled:i,getItem:s,setItem:a,removeItem:l,maxMsgSlot:3,name:"cookie",appendToClickHist:f},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}function a(){var e="test";try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(e){return!1}}function o(e){var t,n,r,i=0;if(0==e.length)return i;for(t=0,r=e.length;t<r;t++)n=e.charCodeAt(t),i=(i<<5)-i+n,i|=0;return i}function s(e){for(var t=JSON.parse(h(y.default.shown.freqCapKey))||[],n=0;n<e.length;++n){for(;t.length>=y.default.shown.bufferSize;)t.shift();t.push(o(e[n].split("?")[0].split("#")[0]))}g(y.default.shown.freqCapKey,JSON.stringify(t))}function l(){for(var e=JSON.parse(h(y.default.shown.freqCapKey))||[],t={},n=[],r=e.length;--r>=0&&n.length<y.default.shown.maxExclude;){var i=e[r];t[i]?t[i]+=1:t[i]=1,t[i]>=y.default.shown.freqCap&&n.indexOf(i)==-1&&n.push(i)}var a=[];return n.forEach(function(e){a.push(e)}),JSON.stringify(a)}function u(e){var t="http://www.ozy.com/acumen/";if(0!=e.indexOf(t))c(e);else{var n=e.replace("/ozy-ted-","/"),r=n.replace(t,""),i=t+r,a=t+"ozy-ted-"+r;c(i),c(a)}}function d(e,t,n){var r=y.default.clickHist.clickHistLKey||"_igClkHis",i=JSON.parse(h(r))||[],a=y.default.clickHist.cap||10,o=!1,s=y.default.clickHist.urlTrans(e);if(i=i.slice(Math.max(i.length-a,0),i.length),null!==s&&void 0!==s&&""!==s){for(var l=0;l<i.length;l++)i[l].split("|")[0]===s&&(o=!0);o||(i.length>=a&&i.shift(),i.push(s+"|"+t+"|"+n)),g(r,JSON.stringify(i))}}function c(e){for(var t=JSON.parse(h(y.default.longHistKey))||[],n=o(e),r=t.length,i=!1,a=0;a<r;++a)if(t[a]==n){i=!0;for(var s=a+1;s<r;++s)t[s-1]=t[s];t[r-1]=n;break}if(!i){for(;t.length>=y.default.longHist.bufferSize;)t.shift();t.push(n)}g(y.default.longHistKey,JSON.stringify(t))}function f(){var e=h(y.default.longHistKey)||JSON.stringify([]);if(y.default.longHist.dropRecent>0){var t=JSON.parse(e).length;t>=y.default.longHist.dropRecent?e=JSON.stringify(JSON.parse(e).slice(0,t-y.default.longHist.dropRecent)):JSON.stringify([])}return e}function p(){try{b.setItem("_igst","8");var e="8"==b.getItem("_igst");return b.removeItem("_igst"),e}catch(e){return!1}}function g(e,t,n){b.setItem(e,t),n&&b.setItem(e+T,(new Date).getTime()+1e3*n)}function m(e){b.removeItem(e),b.removeItem(e+T)}function h(e){var t=b.getItem(e+T);return!t||t>=(new Date).getTime()?b.getItem(e)||null:(m(e),null)}Object.defineProperty(t,"__esModule",{value:!0});var v=n(3),y=r(v),w=window,b=i()?w.localStorage:{setItem:function(){},getItem:function(){},removeItem:function(){}},k=a()?w.sessionStorage:{setItem:function(){},getItem:function(){},removeItem:function(){}},T="expireTimestamp";t.default={hasStorageEnabled:p,setItem:g,getItem:h,removeItem:m,maxMsgSlot:10,name:"local_storage",storeVisibleElements:s,getFrequent:l,appendUrlToLongHist:u,getLongHist:f,appendToClickHist:d,sessStorage:k},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n,t=t||{};return n="li_act_server"in t?t.li_act_server:w.default.activity.activityServer,"v3"==w.default.sdk.queryApiVersion&&(n+="/v3/"+w.default.jsKey,C.default.notABot()&&C.default.notOptOut()&&(n+="/"+encodeURIComponent(w.default.uid))),
n+"/__activity.gif?"+a(e,t)}function a(e,t){var n="e="+encodeURIComponent(e);if("widget_click"==e&&(w.default.clickHist.onLocalStorage&&S.default.appendToClickHist(t.clickUrl,t.w,t.source),w.default.clickHist.onCookie&&_.default.appendToClickHist(t.clickUrl,t.w,t.source)),w.default.shown.vizSendCap&&("widget_shown"==e||"widget_visible"==e||"widget_click"==e)&&Array.isArray(t.vi)&&(t.vi=t.vi.slice(0,w.default.shown.vizSendCap)),"conversion"==e&&!t.source){var r=C.default.getURLParameter("li_source"),i=C.default.getURLParameter("li_medium");r&&(t.source=r),i&&(t.w=i)}n+="&"+D.default.toQueryString(k.default.forCurrentExample());for(var a in t)t.hasOwnProperty(a)&&(n+="[object Array]"===Object.prototype.toString.call(t[a])?"&"+a+"="+encodeURIComponent(JSON.stringify(t[a])):"&"+a+"="+encodeURIComponent(t[a]));for(var o in w.default.globalCtx)w.default.globalCtx.hasOwnProperty(o)&&(n+="[object Array]"===Object.prototype.toString.call(w.default.globalCtx[o])?"&"+o+"="+encodeURIComponent(JSON.stringify(w.default.globalCtx[o])):"&"+o+"="+encodeURIComponent(w.default.globalCtx[o]));return n}function o(e){S.default.setItem(w.default.latestVizKey,JSON.stringify(e))}function s(){return S.default.getItem(w.default.latestVizKey)}function l(){w.default.uid||(console.log("LI: uid is not defined. Pixel.send() may not have all the info."),L.default&&L.default.errorMessagesByEventType&&(L.default.errorMessagesByEventType.activity_send_error='LI: uid is not defined. Pixel.send() may not have all the info. This could be because you are using addEarlyExtension() instead of addExtension(), or running $p("send") (or some other $p command) before $p("init")'))}function u(e){var t=void 0;return w.default.currentUrl&&L.default.urlListByEventType&&L.default.urlListByEventType[e]&&L.default.urlListByEventType[e].length>0?(t=L.default.urlListByEventType[e][L.default.urlListByEventType[e].length-1],L.default.urlListByEventType[e].push(w.default.currentUrl)):w.default.currentUrl&&L.default.urlListByEventType&&(L.default.urlListByEventType[e]=[w.default.currentUrl]),w.default.currentUrl&&w.default.currentUrl==t&&w.default.defaultApiEvents.indexOf(e)!=-1?(w.default.showLiveWarnings&&L.default.lastTsplByEventType&&console.log("LI: For the event "+e+", we are trying to send it twice in a row with the same url: "+t+", so we are blocking the second copy of the event from being sent. Time since page load in milliseconds for most recent event of each type: ",L.default.lastTsplByEventType),L.default.duplicatesDetected.push(e),!0):!!(w.default.defaultApiEvents.indexOf(e)!=-1&&L.default&&L.default.lastTsplByEventType&&L.default.lastTsplByEventType[e]&&window.performance.now&&"function"==typeof window.performance.now&&!w.default.allowRapidToggling&&(0|window.performance.now())-L.default.lastTsplByEventType[e]<2e3)&&(w.default.showLiveWarnings&&console.log("LI: The event "+e+" that we were asked to send on the url "+w.default.currentUrl+" at "+(0|window.performance.now())+" milliseconds after page start looks like a duplicate, because we sent a similar event on the url "+t+" less than 2 seconds ago. If you are rapidly toggling between parts of a single-page app, this may not be a problem. Time since page load in milliseconds for most recent event of each type: ",L.default.lastTsplByEventType),L.default.duplicatesDetected.push(e),!0)}function d(){return w.default.jsKey?!!w.default.disabledCust[w.default.jsKey]&&(console.log("LI: Thank you for using LiftIgniter! If you are interested in re-activating our service, please contact us at support@liftigniter.com"),!0):(console.log("LI: LiftIgniter send called before LiftIgniter init. The most typical reason for this is if you are including our JavaScript snippet twice (this could be twice on the page, or once on the page and once in Google Tag Manager, or twice in Google Tag Manager). If you have more questions, please contact support@liftigniter.com"),!0)}function c(e,t){if(l(),!w.default.enableSendFromHeadless&&window.navigator.userAgent.indexOf("LiftIgniterHeadlessChrome")!==-1)return void(w.default.showLiveWarnings&&console.log("LI: You cannot fetch from HeadlessChrome"));if(!("conversion"!=e||t.source&&t.w)){var n=C.default.getURLParameter("li_source"),r=C.default.getURLParameter("li_medium");n&&(t.source=n),r&&(t.w=r)}try{if(u(e))return}catch(e){w.default.showLiveWarnings&&console.log("LI: Unexpected error when checking for immediate duplicates",e)}w.default.googleAnalytics&&R.default.sendEvents(e,t),"widget_click"==e?!m(e,t):f(e,t)}function f(e,t){if(!(window&&window.location&&window.location.origin&&""!=window.location.origin&&C.default.isBadActor(window.location.origin)))try{if(w.default.activity.activitySamplingPercent<100&&C.default.djb2HashCode(w.default.uid)%100>w.default.activity.activitySamplingPercent)return;var n=window.location.href;if(n&&w.default.defaultApiEvents&&"-1"!=w.default.defaultApiEvents.indexOf(e)){if(w.default.activity.itemRegex&&null===n.match(w.default.activity.itemRegex))return;if(w.default.activity.excludeRegex&&null!==n.match(w.default.activity.excludeRegex))return}if(!d())if(w.default.enableSendFromHeadless||window.navigator.userAgent.indexOf("LiftIgniterHeadlessChrome")==-1){g(e);var r=new Image;r.src=i(e,t)}else console.log("LI: You cannot send from HeadlessChrome")}catch(t){w.default.showLiveWarnings&&console.log("Unexpected error when trying to send event "+e,t)}}function p(){return w.default.robustUseStorage?S.default.getItem(w.default.lastClick):w.default.robustUseCookie?_.default.getItem(w.default.lastClick):void 0}function g(e){L.default&&L.default.eventCounts&&(L.default.eventCounts[e]?L.default.eventCounts[e]=L.default.eventCounts[e]+1:L.default.eventCounts[e]=1),L.default&&L.default.firstTsplByEventType&&!L.default.firstTsplByEventType[e]&&window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(L.default.firstTsplByEventType[e]=0|window.performance.now()),L.default&&L.default.lastTsplByEventType&&window.performance.now&&"function"==typeof window.performance.now&&(L.default.lastTsplByEventType[e]=0|window.performance.now())}function m(e,t){function n(e,t,n){n=C.default.mergeMap(n,{method:"send_robust",buffer:e.name});var r=i(t,n);e.setItem(w.default.lastClick,r);for(var a=0;a<e.maxMsgSlot&&e.getItem(w.default.robustMsgSlot+a);a++);return a<e.maxMsgSlot&&e.setItem(w.default.robustMsgSlot+a,r,120),r==e.getItem(w.default.robustMsgSlot+a)&&(h(e,a),!0)}if(!(w.default.activity.activitySamplingPercent<100&&C.default.djb2HashCode(w.default.uid)%100>w.default.activity.activitySamplingPercent)){if(g(e),!w.default.jsKey)throw"Petametrics.send called before Petametrics.init";return!(!w.default.robustUseStorage||!n(S.default,e,t))||!(!w.default.robustUseCookie||!n(_.default,e,t))}}function h(e,t){var n=e.getItem(w.default.robustMsgSlot+t);if(n){var r=function(){e.removeItem(w.default.robustMsgSlot+t)},i=new Image;i.onload=r,i.src=n}}function v(){for(var e=0;e<_.default.maxMsgSlot;e++)h(_.default,e);for(var e=0;e<S.default.maxMsgSlot;e++)h(S.default,e)}Object.defineProperty(t,"__esModule",{value:!0});var y=n(3),w=r(y),b=n(9),k=r(b),T=n(6),_=r(T),I=n(7),S=r(I),x=n(4),C=r(x),E=n(14),L=r(E),O=n(16),R=r(O),M=n(17),D=r(M);t.default={send:c,getUrl:i,sendRobust:m,checkBuffer:v,storeLatestVisibleItems:o,getLatestVisibleItems:s,getLastClick:p,updateInternalEventCounts:g},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(window.location.search);return null==n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function a(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)"),r=n.exec(e);return null==r?"":decodeURIComponent(r[1].replace(/\+/g," "))}function o(e,t,n){var r=e.indexOf("#"),i=r===-1?"":e.substr(r);e=r===-1?e:e.substr(0,r);var a=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=e.indexOf("?")!==-1?"&":"?";return e=e.match(a)?e.replace(a,"$1"+t+"="+n+"$2"):e+o+t+"="+n,e+i}function s(e,t){t=t||"&";var n=i(e);return n?t+e+"="+n:""}function l(e,t){var n=e.split("?");if(n.length>=2){for(var r=encodeURIComponent(t)+"=",i=n[1].split(/[&;]/g),a=i.length;a-- >0;)i[a].lastIndexOf(r,0)!==-1&&i.splice(a,1);return e=n[0]+(i.length>0?"?"+i.join("&"):"")}return e}function u(e,t){var n=c.default.sdk.useLocationForCurrentUrl?window.location.href:e?c.default.frontPageBoost:c.default.isInIframe?document.referrer:c.default.currentUrl;return n=c.default.activity.urlTransform(n),t=t||{},t.ts=v.default.getCurrentTime(),t.jsk=c.default.jsKey,t.jsv=c.default.version,t.cu=n,t}Object.defineProperty(t,"__esModule",{value:!0});var d=n(3),c=r(d),f=n(10),p=r(f),g=n(11),m=r(g),h=n(5),v=r(h),y=n(12),w=(r(y),n(13)),b=(r(w),n(7)),k=r(b),T=n(6),_=r(T),I=n(14),S=r(I),x=Object.assign||n(15).assign;t.default={forCurrentExample:function(e,t){if(t=t||{},c.default.qOpt.dynScrollInfo)try{t.sppx=p.default.maxVertScrollPos(),t.sppc=p.default.maxVertScrollPct(),t.dh=p.default.getDocHeight(),t.iwid=window.innerWidth,t.ihei=window.innerHeight}catch(e){}try{var n;if(c.default.histSettings.origin)n=c.default.activity.canonicalUrlTransform(c.default.histSettings.origin+window.location.pathname);else{var r=c.default.isInIframe?m.default.getCanonicalUrlIframe():m.default.getCanonicalUrl();n=c.default.customContext.id?c.default.customContext.id:c.default.useCanonicalUrl?e?c.default.frontPageBoost:c.default.activity.canonicalUrlTransform(r):null}t.ct=m.default.getCurrentTitle(),t.ccu=n}catch(e){console.log(e)}try{var i=null;if(c.default.clickHist.send)if(c.default.clickHist.onLocalStorage){var a=k.default.getItem(c.default.clickHist.clickHistLKey);i=null==a?null:JSON.parse(a)}else c.default.clickHist.onCookie&&(i=_.default.readCookie(c.default.clickHist.clickHistCKey).split(","));t.clkHist=i}catch(e){}try{c.default.currentSeries&&""!=c.default.currentSeries&&void 0!==c.default.currentSeries&&(t.currentSeries=c.default.currentSeries)}catch(e){}try{if(window.performance&&window.performance.now&&"function"==typeof window.performance.now){var o=0|window.performance.now();t.tspl=o}S.default.startupTimes.beaconLoadStartTime&&(t.blst=S.default.startupTimes.beaconLoadStartTime),S.default.startupTimes.initStartTime&&(t.ist=S.default.startupTimes.initStartTime),S.default.startupTimes.initEndTime&&(t.iet=S.default.startupTimes.initEndTime)}catch(e){console.log("Error determining time since page load")}var s=c.default.sdk.manualHist?c.default.sdk.manualHist:c.default.getHistList();return u(null,t),t.cgid=c.default.claimedGid?c.default.claimedGid:null,t.uid=c.default.uid,t.sid=c.default.sid,t.pvid=c.default.pvid,t.hist=c.default.activity.includeBrowsingHistory?s:null,t.tzo=v.default.getTimezoneOffset(),t.ua=c.default.userAgent,t.l=c.default.language,t.os=c.default.os,c.default.qOpt.screenDim&&(t.scd=c.default.colorDepth,t.scrh=c.default.screenHeight,t.scrw=c.default.screenWidth),t.ref=c.default.referrer?c.default.referrer:null,c.default.customInfo&&x(t,c.default.customInfo()),t},getParam:i,copyParam:s,removeParam:l,basicParam:u,getUrlParameter:a,updateUrlParameter:o},e.exports=t.default},function(e,t){"use strict";function n(){var e=document.body;return document&&document.scrollTop||e&&e.scrollTop||0}function r(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight||0,t.scrollHeight||0,e.offsetHeight||0,t.offsetHeight||0,e.clientHeight||0,t.clientHeight||0)}function i(){var e=document.body,t=document.documentElement;return window.innerHeight||t.clientHeight||e.clientHeight||0}function a(){var e=(n()+i())/r()*100;return e>=100?100:e<=0?0:e}function o(){var e=n();e>s&&(s=e);var t=a();t>l&&(l=Math.floor(t))}Object.defineProperty(t,"__esModule",{value:!0});var s=0,l=0;t.default={getDocHeight:r,getWinHeight:i,getVertScrollPos:n,getVertScrollPct:a,checkScroll:o,maxVertScrollPos:function(){return s},maxVertScrollPct:function(){return l},reset:function(){l=0,s=0}},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){t="undefined"!=typeof t&&t;for(var n=[],r=x.querySelectorAll(e),i=0;i<r.length;i++)n.push(r[i].textContent);return t?n:n[0]}function a(e,t,n){n="undefined"!=typeof n&&n;for(var r=[],i=x.querySelectorAll(e),a=0;a<i.length;a++)r.push(i[a].getAttribute(t));return n?r:r[0]}function o(e,t){for(var n=!0;n;){var r=e,i=t;if(n=!1,0==i.length)return r;e=r[i[0]],t=i.slice(1),n=!0}}function s(e){return o(S,e.split("."))}function l(e,t){if("undefined"!=typeof t){var n=[],r=t.exec(e);if(t.global)for(;r;)n=n.concat(r.slice(1)),r=t.exec(e);else n=r.slice(1);return n}return[e]}function u(e){for(var t={},n=x.querySelectorAll("meta[property^='"+e+":'][content]"),r=0;r<n.length;r++){var i=n[r].getAttribute("property").slice(e.length+1),a=t[i]||[];a.push(n[r].getAttribute("content")),t[i]=a}return t}function d(){var e=u("og");if(void 0!=e.type){var t=e.type[0].split(".")[0],n=I.default.inventory.defaultType;switch(t){case"article":case"video":case"book":case"music":e=T.default.mergeMap(u(t),e);break;default:e=T.default.mergeMap(u(n),e)}}return e}function c(){var e=x.querySelector("#liftigniter-metadata");if(e){var t=e.textContent;if(I.default.inventory.jsonTransform&&(t=I.default.inventory.jsonTransform(t)),t){var n=JSON.parse(t);for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];if(i&&"object"==typeof i&&"object"==typeof i[0])delete n[r];else if("number"!=typeof i){i=[].concat(i);for(var a=0;a<i.length;a++)i[a]&&(i[a]=i[a].toString())}}return n}return{}}return{}}function f(e,t){var n=e.name;if("substring"==n)return t.substring(e.start||0,e.end||t.length);if("trim"==n)return t.trim();if("replace"==n)return t.replace(new RegExp(e.old,"g"),e.new);if("pad"==n)return(e.left||"")+t+(e.right||"");if("split"==n)return t.split(e.separator||",");if("removeEmpty"==n){if(""===t)return[]}else{if("shorten"==n)return t.length>e.size?t.substring(0,e.size)+e.suffix:t;if("parseJsonArray"==n)try{var r=JSON.parse(t);return Array.isArray(r)?r:t}catch(e){return t}}return t}function p(e){var t,n=[];try{if("text"==e.type)t=i(e.selector,!0);else if("attribute"==e.type)t=a(e.selector,e.attribute,!0);else if("url"==e.type)t=S.location.href;else if("var"==e.type)t=[s(e.variable).toString()];else if("varArray"==e.type)t=s(e.variable);else if("defined"==e.type)return t=a(e.selector,e.attribute,!0),t&&t.length?"true":"false";if(t)for(var r=0;r<t.length;r++){var o=t[r];if("function"==typeof e.transform&&(o=e.transform(o)),e.transforms)for(var u=0;u<e.transforms.length;u++)if(Array.isArray(o))if("join"==e.transforms[u].name)o=o.join(e.transforms[u].separator);else if("index"==e.transforms[u].name){var d=e.transforms[u].index;o=d>=0&&d<o.length?o[d]:[]}else{for(var c=[],p=0;p<o.length;p++)c=c.concat(f(e.transforms[u],o[p]));o=c}else o=f(e.transforms[u],o);Array.isArray(o)||(o=l(o,e.regex),"undefined"!=typeof e.joinWith&&(o=[o.join(e.joinWith)])),n=n.concat(o)}}catch(e){n=[]}return n}function g(){var e=x.querySelector("meta[property='og:title'][content]");return e?e.getAttribute("content"):m()||"-1"}function m(){var e=x.getElementsByTagName("title");if(e.length>0)return e[0].textContent.trim()}function h(e){var t=document.createElement("a");return t.href=e,t.protocol+"//"+t.host+t.pathname+t.search+t.hash}function v(){function e(){if(I.default.inventory.useOpenGraphForCanonicalUrl&&(e=x.querySelector("meta[property='og:url'][content]")))return e.getAttribute("content");if(I.default.inventory.useLinkRelForCanonicalUrl){var e=x.querySelector("link[rel=canonical][href]");if(e)return h(e.getAttribute("href"))}var t=S.location.href;return I.default.inventory.stripTagsForCanonicalUrl&&(t=t.split("?")[0]),I.default.inventory.stripHashesForCanonicalUrl&&(t=t.split("#")[0]),t}return b||(b=I.default.inventory.canonicalUrlTransform(e())),b}function y(){function e(){var e=document.referrer;return I.default.inventory.stripTagsForCanonicalUrl&&(e=e.split("?")[0]),I.default.inventory.stripHashesForCanonicalUrl&&(e=e.split("#")[0]),e}return b||(b=I.default.inventory.canonicalUrlTransform(e())),b}function w(e){var t={};for(var n in e)e.hasOwnProperty(n)&&("object"!=typeof e[n]||Array.isArray(e[n])?t[n]=e[n]:t[n]=p(e[n]));return t}Object.defineProperty(t,"__esModule",{value:!0});var b,k=n(4),T=r(k),_=n(3),I=r(_),S=window,x=document;t.default={getCurrentTitle:g,getTitleFallback:m,getCanonicalUrl:v,getCanonicalUrlIframe:y,getText:i,getAttribute:a,scrapeFeature:p,scrapeOpenGraph:d,scrapeJSON:c,fetchDynamicParams:w},e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="abcdefghijklmnopqrstuvwxyz"+"abcdefghijklmnopqrstuvwxyz".toUpperCase()+"0123456789",r=n.length;t.default={randomString:function(){return Math.random().toString(36).substr(2,16)},randomStringGid:function(e){for(var t=[];e>0;)t.push(n[Math.floor(r*Math.random())]),e--;return t.join("")}},e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={hash:function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,i,a,o;return i=2147483648&e,a=2147483648&t,n=1073741824&e,r=1073741824&t,o=(1073741823&e)+(1073741823&t),n&r?2147483648^o^i^a:n|r?1073741824&o?3221225472^o^i^a:1073741824^o^i^a:o^i^a}function r(e,t,n){return e&t|~e&n}function i(e,t,n){return e&n|t&~n}function a(e,t,n){return e^t^n}function o(e,t,n){return t^(e|~n)}function s(e,i,a,o,s,l,u){return e=n(e,n(n(r(i,a,o),s),u)),n(t(e,l),i)}function l(e,r,a,o,s,l,u){return e=n(e,n(n(i(r,a,o),s),u)),n(t(e,l),r)}function u(e,r,i,o,s,l,u){return e=n(e,n(n(a(r,i,o),s),u)),n(t(e,l),r)}function d(e,r,i,a,s,l,u){return e=n(e,n(n(o(r,i,a),s),u)),n(t(e,l),r)}function c(e){for(var t,n=e.length,r=n+8,i=(r-r%64)/64,a=16*(i+1),o=Array(a-1),s=0,l=0;l<n;)t=(l-l%4)/4,s=l%4*8,o[t]=o[t]|e.charCodeAt(l)<<s,l++;return t=(l-l%4)/4,s=l%4*8,o[t]=o[t]|128<<s,o[a-2]=n<<3,o[a-1]=n>>>29,o}function f(e){var t,n,r="",i="";for(n=0;n<=3;n++)t=e>>>8*n&255,i="0"+t.toString(16),r+=i.substr(i.length-2,2);return r}function p(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}var g,m,h,v,y,w,b,k,T,_=Array(),I=7,S=12,x=17,C=22,E=5,L=9,O=14,R=20,M=4,D=11,A=16,N=23,U=6,W=10,P=15,j=21;for(e=p(e),_=c(e),w=1732584193,b=4023233417,k=2562383102,T=271733878,g=0;g<_.length;g+=16)m=w,h=b,v=k,y=T,w=s(w,b,k,T,_[g+0],I,3614090360),T=s(T,w,b,k,_[g+1],S,3905402710),k=s(k,T,w,b,_[g+2],x,606105819),b=s(b,k,T,w,_[g+3],C,3250441966),w=s(w,b,k,T,_[g+4],I,4118548399),T=s(T,w,b,k,_[g+5],S,1200080426),k=s(k,T,w,b,_[g+6],x,2821735955),b=s(b,k,T,w,_[g+7],C,4249261313),w=s(w,b,k,T,_[g+8],I,1770035416),T=s(T,w,b,k,_[g+9],S,2336552879),k=s(k,T,w,b,_[g+10],x,4294925233),b=s(b,k,T,w,_[g+11],C,2304563134),w=s(w,b,k,T,_[g+12],I,1804603682),T=s(T,w,b,k,_[g+13],S,4254626195),k=s(k,T,w,b,_[g+14],x,2792965006),b=s(b,k,T,w,_[g+15],C,1236535329),w=l(w,b,k,T,_[g+1],E,4129170786),T=l(T,w,b,k,_[g+6],L,3225465664),k=l(k,T,w,b,_[g+11],O,643717713),b=l(b,k,T,w,_[g+0],R,3921069994),w=l(w,b,k,T,_[g+5],E,3593408605),T=l(T,w,b,k,_[g+10],L,38016083),k=l(k,T,w,b,_[g+15],O,3634488961),b=l(b,k,T,w,_[g+4],R,3889429448),w=l(w,b,k,T,_[g+9],E,568446438),T=l(T,w,b,k,_[g+14],L,3275163606),k=l(k,T,w,b,_[g+3],O,4107603335),b=l(b,k,T,w,_[g+8],R,1163531501),w=l(w,b,k,T,_[g+13],E,2850285829),T=l(T,w,b,k,_[g+2],L,4243563512),k=l(k,T,w,b,_[g+7],O,1735328473),b=l(b,k,T,w,_[g+12],R,2368359562),w=u(w,b,k,T,_[g+5],M,4294588738),T=u(T,w,b,k,_[g+8],D,2272392833),k=u(k,T,w,b,_[g+11],A,1839030562),b=u(b,k,T,w,_[g+14],N,4259657740),w=u(w,b,k,T,_[g+1],M,2763975236),T=u(T,w,b,k,_[g+4],D,1272893353),k=u(k,T,w,b,_[g+7],A,4139469664),b=u(b,k,T,w,_[g+10],N,3200236656),w=u(w,b,k,T,_[g+13],M,681279174),T=u(T,w,b,k,_[g+0],D,3936430074),k=u(k,T,w,b,_[g+3],A,3572445317),b=u(b,k,T,w,_[g+6],N,76029189),w=u(w,b,k,T,_[g+9],M,3654602809),T=u(T,w,b,k,_[g+12],D,3873151461),k=u(k,T,w,b,_[g+15],A,530742520),b=u(b,k,T,w,_[g+2],N,3299628645),w=d(w,b,k,T,_[g+0],U,4096336452),T=d(T,w,b,k,_[g+7],W,1126891415),k=d(k,T,w,b,_[g+14],P,2878612391),b=d(b,k,T,w,_[g+5],j,4237533241),w=d(w,b,k,T,_[g+12],U,1700485571),T=d(T,w,b,k,_[g+3],W,2399980690),k=d(k,T,w,b,_[g+10],P,4293915773),b=d(b,k,T,w,_[g+1],j,2240044497),w=d(w,b,k,T,_[g+8],U,1873313359),T=d(T,w,b,k,_[g+15],W,4264355552),k=d(k,T,w,b,_[g+6],P,2734768916),b=d(b,k,T,w,_[g+13],j,1309151649),w=d(w,b,k,T,_[g+4],U,4149444226),T=d(T,w,b,k,_[g+11],W,3174756917),k=d(k,T,w,b,_[g+2],P,718787259),b=d(b,k,T,w,_[g+9],j,3951481745),w=n(w,m),b=n(b,h),k=n(k,v),T=n(T,y);var B=f(w)+f(b)+f(k)+f(T);return B.toLowerCase()}},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),a=r(i),o=n(3),s=r(o),l=n(8),u=r(l);window,document;t.default={buffer:{shown:{}},fetchCalled:!1,fetchData:{finalized:!1,startTime:0,timeout:1e4,fetchQueue:[],dedupQueue:{},recs:{},calls:{},dedupMax:{},retried:{},givenUp:!1},eventCounts:{},firstTsplByEventType:{},lastTsplByEventType:{},errorMessagesByEventType:{},shownSourceMap:{},responseWidgetMap:{},shownWidgetMap:{},visibleWidgetMap:{},responseVisibleItemsByWidgetName:{},shownVisibleItemsByWidgetNameBeforeSpaPageReset:{},shownVisibleItemsByWidgetName:{},inventoryData:{inventoryCollectOn:!1,collectStarted:!1,scrapingStarted:!1,scrapingAborted:!1,scrapingFinished:!1,inventorySent:!1,timing:{}},startupTimes:{},duplicatesDetected:[],clickUrls:[],timing:{shownTimes:{},visibleTimes:{},clickTimes:{}},mostRecentTrackingObject:{},mostRecentTrackedAnchors:{},allowRegister:!0,xhrBroken:!1,urlListByEventType:{},refresh:function(){this.fetchData=a.default.mergeMap(this.fetchData,{dedupQueue:{}})},runDiagnostics:function(e){function t(e){try{return a.default.makeACopy(e)}catch(t){return r("object copy failed, error: "+t+", stack trace: "+t.stack),e}}function n(e){try{return e instanceof Element?e.outerHTML:JSON.stringify(e)}catch(e){return"stringification failed, error: "+e+", stack trace: "+e.stack}}function r(t){"log"==e&&console.log(t),f+=t+"\n"}function i(r,i,a){"log"==e&&console.log(r+" (object type: "+typeof i+") ",a?t(i):i),f+=r+" "+n(i)+"\n"}this.inventoryData.inventoryCollectOn=s.default.inventory.collect;var o=0,l=0,d=0,c=void 0,f="";window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(c=0|window.performance.now());var p="As a result, LiftIgniter loads very late and its ability to improve recommendation quality on your site is limited. This probably means your site is slow, your Internet connection is slow, or you are not including our snippet early enough in the page.",g="If this message persists across multiple page loads, please get in touch with support@liftigniter.com to discuss solutions.";r("Diagnostics for Javascript key "+s.default.jsKey+" run at "+new Date+" ("+c+" ms after initial page load). Get full details of requests to LiftIgniter by going to the Network Panel and filtering to petametrics. Messages marked [ERROR] definitely deserve remedial action, messages marked [WARNING] deserve serious attention, and messages marked [INFO] deserve consideration. Messages marked [DEBUG] are for digging deeper into things, and can be ignored unless you have a specific reason to look at them. Keep in mind that if you have selected 'Disable Cache' in your Network Panel, then load times would be comparable to those of first-time visitors; if you have not, then load times are comparable to those of repeat visitors");try{Object.keys(this.errorMessagesByEventType).length>0?(i("[ERROR] There were errors on this page! Error messages on this page, grouped by error type",this.errorMessagesByEventType,!0),o+=Object.keys(this.errorMessagesByEventType).length):r("No errors thrown were identified in this diagnostics run!")}catch(e){i("[ERROR] Error messages on this page, grouped by error type",this.errorMessagesByEventType,!0)}if(this.eventCounts.pageview&&0!=this.eventCounts.pageview||(r('[WARNING] No pageview events were sent for this page! Have you included $p("send","pageview") at the bottom of your snippet?'),l+=1),s.default.currentUrl&&this.urlListByEventType.pageview&&this.urlListByEventType.pageview[this.urlListByEventType.pageview.length-1]!==s.default.currentUrl&&r("[WARNING] The URL at the time of sending the most recent pageview event, namely, "+this.urlListByEventType.pageview[this.urlListByEventType.pageview.length-1]+", does not match the current URL: "+s.default.currentUrl+'. This is a problem only if the URL change is significant (such as in a single-page app) and you would like to trigger a pageview on such a change. You should call $p("resetPageview") on the url change if so, or use setPushStateReset'),s.default.currentUrl&&window.location.href&&s.default.currentUrl!==window.location.href&&r("[WARNING] The value of currentUrl stored internally, namely, "+s.default.currentUrl+", does not match the window URL "+window.location.href+'. This is a problem only if the URL change is significant (such as in a single-page app). This may mean that you should call $p("resetPageview") on URL change, or set pushStateReset to true'),!s.default.allowRapidToggling&&this.eventCounts.pageview&&this.eventCounts.pageview>1&&(r('[WARNING] Multiple pageview events were sent for this page! This is expected (and not a problem) if you are using a single-page app or infinite scroll. Otherwise, please check if you are including the snippet twice, or calling $p("send","pageview") multiple times'),l+=1),!this.fetchData.finalized||this.eventCounts.widget_shown||this.eventCounts.widget_tracking_error||this.eventCounts.widget_tracking_empty_list||this.eventCounts.current_item_tracked)if(!this.fetchData.finalized||!this.eventCounts.widget_shown||this.shownSourceMap.LI||this.eventCounts.widget_tracking_error||this.eventCounts.widget_tracking_empty_list||this.eventCounts.current_item_tracked)if(this.fetchData.finalized&&this.eventCounts.widget_shown&&this.eventCounts.widget_shown<(this.eventCounts.widget_response||0)&&!this.eventCounts.widget_tracking_error&&!this.eventCounts.widget_tracking_empty_list&&!this.eventCounts.current_item_tracked)r("[WARNING] The number of widgets LiftIgniter returned responses for exceeds the number of widgets tracked as shown; we have "+(this.eventCounts.widget_response||0)+" responses and "+(this.eventCounts.widget_shown||0)+" shown. This probably means you are either not rendering or not correctly tracking some of the widgets you are requesting (and being billed for). It could also mean you are grouping widgets together when rendering, which is generally not advisable. It could also mean you are rendering a widget lazily, which may not be a problem. To see which widgets you are missing, compare the response widget map and shown widget map below."),l+=1;else if(this.fetchData.finalized&&this.shownSourceMap.LI&&(this.shownSourceMap.LI||0)<(this.eventCounts.widget_response||0)&&!this.eventCounts.widget_tracking_error&&!this.eventCounts.widget_tracking_empty_list&&!this.eventCounts.current_item_tracked)r("[WARNING] The number of widgets LiftIgniter returned responses for exceeds the number of widgets tracked as shown with source LI; we have "+(this.eventCounts.widget_response||0)+" responses and "+(this.shownSourceMap.LI||0)+" shown. This could mean either that you are failing to track those widgets correctly, or are you are tracking them with a source other than LI. To see what is happening, look at the response widget map, shown widget map, and shown source map below."),l+=1;else if(this.eventCounts.widget_response||!this.shownSourceMap.LI||this.eventCounts.widget_tracking_error||this.eventCounts.widget_tracking_empty_list||this.eventCounts.current_item_tracked)if((this.eventCounts.widget_response||0)<(this.shownSourceMap.LI||0))r("[WARNING] You are tracking recommendations as shown with source LI; however, the number of widgets you tracked as shown exceeds the number for which you received responses. This usually means you are tracking some recommendations with source LI that are not returned by LiftIgniter. It could also might mean that you are rearranging results requested for one widget to multiple widgets. Please fix this, or contact support@liftigniter.com to discuss further"),l+=1;else{var m=a.default.getObjectKeys(this.responseVisibleItemsByWidgetName),h=this.shownVisibleItemsByWidgetName,v=this.responseVisibleItemsByWidgetName;m.map(function(e){if(h[e]){var t=v[e],n=h[e];JSON.stringify(t)!=JSON.stringify(n)&&(r("[WARNING] For the widget "+e+", the visible items in the response returned by us did not match the visible items tracked as shown.\nThe visible item list for response was ("+(t.length+" items): \n")+JSON.stringify(t)+"\nThe visible item list tracked as  shown was ("+(n.length+" items): \n")+JSON.stringify(n)),l+=1)}else r("[WARNING] For the widget "+e+", we received a response but did not track recommendations as shown. Please check if those recommendations were shown with a different widget name"),l+=1})}else l+=1;else r('[WARNING] You requested recommendations but did not send a widget_shown event with source=LI. This means that either you are not calling the $p("track",... function properly, or you are calling it with the wrong source. NOTE: This warning will trigger unnecessarily if you are not using LiftIgniter\'s track function; please manually check for the source if so.'),l+=1;else r('[WARNING] You requested recommendations but did not send a widget_shown event. This probably means that you are not calling the $p("track",... function properly'),l+=1;if(this.shownSourceMap.LI&&this.shownSourceMap.base&&(r("[WARNING] You are tracking recommendations with both LI and base on the same page. While this can be done, it means that we cannot compute session-level metrics for users (as the same user is in both LI and base slices). If you have not discussed this issue with LiftIgniter, please contact support@liftigniter.com to discuss this"),l+=1),this.startupTimes.beaconLoadStartTime&&this.startupTimes.beaconLoadStartTime>3500&&(r("[WARNING] You executed the snippet to load the LiftIgniter beacon "+this.startupTimes.beaconLoadStartTime+" milliseconds after, which is more than 3.5 seconds after, the start of page load. "+p+" "+g),l+=1),this.startupTimes.beaconLoadStartTime&&this.startupTimes.initStartTime&&this.startupTimes.initStartTime-this.startupTimes.beaconLoadStartTime>1e3&&(r("[WARNING] The LiftIgniter beacon appears to have taken "+(this.startupTimes.initStartTime-this.startupTimes.beaconLoadStartTime)+" milliseconds to load, which is more than the expected maximum of 1 second. This time is measured from after the load start time, which itself occurred "+this.startupTimes.beaconLoadStartTime+" milliseconds after page load start. This could be because of a poor Internet connection or due to a large amount of bandwidth being used by your site. "+g),l+=1),this.startupTimes.initStartTime&&!this.startupTimes.beaconLoadStartTime&&this.startupTimes.initStartTime>4500&&(r("[WARNING] The LiftIgniter beacon finished loading and started initializing "+this.startupTimes.initStartTime+" milliseconds after, which is more than 4.5 seconds after, the start of page load. "+p+" "+g),l+=1),this.startupTimes.initEndTime&&this.startupTimes.initStartTime&&this.startupTimes.initEndTime-this.startupTimes.initStartTime>400&&(r("[WARNING] Initializing the JavaScript with your configurations took "+(this.startupTimes.initEndTime-this.startupTimes.initStartTime)+" milliseconds, which exceeds the threshold of 400 milliseconds. This could mean a very complex initial configuration, a slow browser or operating system, or a lot of code running on the site. "+g),l+=1),this.firstTsplByEventType.pageview&&this.firstTsplByEventType.pageview>5e3&&!this.startupTimes.initEndTime&&(r("[WARNING] Your pageview event fired at "+this.firstTsplByEventType.pageview+" milliseconds after page load, which is more than 5 seconds after, the start of page load. "+p+" "+g),
l+=1),this.firstTsplByEventType.widget_shown&&this.firstTsplByEventType.widget_shown>8e3&&(r("[WARNING] Your first widget_shown event fired at "+this.firstTsplByEventType.widget_shown+" milliseconds after page load, which is more than 8 seconds after, the start of page load. This could mean a slow Internet connection, slow site, or late load of recommendations. Unless you have explicitly chosen to lazy load the recommendations, we recommend debugging the cause of the delayed load time"),l+=1),this.inventoryData&&this.inventoryData.timing&&this.inventoryData.inventoryCollectOn&&!this.inventoryData.collectStarted&&!this.errorMessagesByEventType.scraping_fail&&(r("[WARNING] Although your configuration has inventory.collect turned on, no inventory collection has started yet. This is probably because your DOM has not yet finished loading. If your DOM will finish loading in a few seconds, wait for it to finish and rerun runDiagnostics"),l+=1),this.inventoryData&&this.inventoryData.timing&&this.inventoryData.collectStarted&&!this.inventoryData.scrapingStarted&&!this.errorMessagesByEventType.scraping_fail&&(r("[WARNING] Inventory collection has started but is stuck right at the beginning, the actual scraping has not yet begun; please wait a couple seconds and rerun. "+g),l+=1),this.inventoryData&&this.inventoryData.timing&&this.inventoryData.scrapingStarted&&!this.inventoryData.scrapingFinished&&!this.inventoryData.scrapingAborted&&!this.errorMessagesByEventType.scraping_fail&&(r("[WARNING] Inventory collection has started but is stuck in the middle of scraping; please wait a couple seconds and rerun. "+g),l+=1),this.inventoryData&&this.inventoryData.scrapingAborted&&(r("[WARNING] In inventory collection, scraping was aborted. The reason for aborting scraping was: "+this.inventoryData.scrapingAbortReason+". If you have concerns about this, please contact support@liftigniter.com"),l+=1),this.inventoryData&&this.inventoryData.scrapingFinished&&!this.inventoryData.inventorySent&&(r("[WARNING] Inventory scraped but not sent. This could be because the inventory item failed some of LiftIgniter's filters or sanity checks; for instance, it was a home page or lacked rudimentary metadata. If you have concerns about this, contact support@liftigniter.com"),l+=1),this.duplicatesDetected.length>0){var y="[WARNING] Duplicates were detected (and may have been blocked from being sent) for the following event types. You can see more details around the sending of these duplicates by filtering to the string LI: in console logs. Please contact support@liftigniter.com if you have more questions. The event types with duplicates are: ";i(y,this.duplicatesDetected,!0),l+=1}this.inventoryData&&this.inventoryData.scrapingFinished&&this.inventoryData.timing&&this.inventoryData.timing.scrape&&this.inventoryData.timing.scrape>1e4&&(r("[WARNING] Inventory scraping from this page finished more than 10 seconds after the start of page load. This could mean slow Internet, a slow-loading page, or a DOM that takes too long to complete. One possible implication is that for very rarely accessed pages, we may be more likely to miss getting them in our inventory because we never saw a user stick around on the page long enough. If you see this issue persist across multiple page refreshes, contact support@liftigniter.com"),l+=1),0==l&&r("No warnings were printed in this diagnostics run!"),this.fetchData&&!this.fetchData.finalized&&this.fetchData.fetchQueue&&0==this.fetchData.fetchQueue.length&&!this.eventCounts.widget_shown&&(r("[INFO] You have not requested any recommendations using the LiftIgniter SDK. Do you not want to show recommendations on this page?"),d+=1),this.fetchData&&!this.fetchData.finalized&&this.fetchData.fetchQueue&&this.fetchData.fetchQueue.length>0&&(r("[INFO] You still have some pending requests for recommendations. Wait a few seconds and rerun runDiagnostics to get more accurate diagnostics!"),l+=1),this.eventCounts.widget_shown&&!this.eventCounts.widget_visible?(r("[INFO] You have rendered recommendation widgets on the page but no visibility events have fired for any widget. Scroll to the recommendation area and rerun runDiagnostics to check that the visibility event fires (which will make this INFO message go away)"),d+=1):this.eventCounts.widget_shown&&this.eventCounts.widget_visible&&this.eventCounts.widget_visible<this.eventCounts.widget_shown&&(r("[INFO] You have rendered recommendation widgets on the page and visibility events have fired; however, visibility events have not fired for all widgets. See the shown widget map and visible widget map in the DEBUG statements below to see which widgets have not had visibility events yet. You need to scroll to the widgets to make the visibility event fire and make this INFO message go away"),d+=1),this.eventCounts.widget_visible&&!this.eventCounts.widget_click&&(r("[INFO] No click events have fired on this page. To test click events, right-click on one of the tracked recommendation areas, then rerun runDiagnostics. If successful, this INFO message will go away"),d+=1),0==d&&r("No info messages were printed in this diagnostics run!");var w={};"send"==e&&(w.fullDiagnosticsString=f),i("[DEBUG] fetchData",this.fetchData,!0),i("[DEBUG] Startup times in milliseconds from start of page load",this.startupTimes,!0),i("[DEBUG] Event counts sent on this page, grouped by event type",this.eventCounts,!0),i("[DEBUG] Time in milliseconds since page load on this page, for the first event of each type",this.firstTsplByEventType,!0),i("[DEBUG] Time in milliseconds since page load on this page, for the last event of each type",this.lastTsplByEventType,!0),i("[DEBUG] Number of widget_shown events by source (only for events created through the use of our track function): ",this.shownSourceMap,!0),i("[DEBUG] Response widget map (number of widget_response events by widget name): ",this.responseWidgetMap,!0),i("[DEBUG] Shown widget map (number of widget_shown events by widget name, only for events created through the use of our track function): ",this.shownWidgetMap,!0),i("[DEBUG] Visible widget map (number of widget_visible events by widget name, only for events created through the use of our track function): ",this.visibleWidgetMap,!0),i("[DEBUG] Response visible items by widget name: ",this.responseVisibleItemsByWidgetName,!0),i("[DEBUG] Shown visible items by widget name: ",this.shownVisibleItemsByWidgetName,!0),i("[DEBUG] Inventory data: ",this.inventoryData,!0),i("[DEBUG] Most recent tracking parameters by widget: ",this.mostRecentTrackingObject,!0),i("[DEBUG] Most recent tracked anchors by widget: ",this.mostRecentTrackedAnchors,!0),i("[DEBUG] url list by event type: ",this.urlListByEventType,!0),window.performance&&i("[DEBUG] Performance data from browser: ",window.performance,!1),i("[DEBUG] Config: ",s.default,!0);var b=o+" errors, "+l+" warnings, "+d+" info messages printed";r(b),r("If including this data in email to support@liftigniter.com, please include everything that was printed in the console");var w={};return"send"==e&&(w.fullDiagnosticsString=f),u.default.send("runDiagnostics",w),"return"==e?f:(console.log("method is not return, so suggesting the use of return if necessary"),'To return diagnostics output as a string, use $p("runDiagnostics","return")')}},e.exports=t.default},function(e,t){"use strict";function n(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var a=Object.keys(Object(i)),o=0,s=a.length;o<s;o++){var l=a[o],u=Object.getOwnPropertyDescriptor(i,l);void 0!==u&&u.enumerable&&(n[l]=i[l])}}return n}function r(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n})}e.exports={assign:n,polyfill:r}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n="",r="";if(t&&(n=t.w,r=t.source),"undefined"!=typeof ga){var i="LiftIgniter Recommendations";r&&(i+=" - "+r);var a=e;n&&(a+=" - "+n+" - "+r);var s="";t&&(s=t),ga(o.default.googleAnalytics,"event",i,a,location.href,1,s)}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a);t.default={sendEvents:i},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r,i,o,l){function d(e){var t=this.responseText;if(200===this.status||null==this.status&&"{"===t[0]){var i=void 0;try{i=JSON.parse(t)}catch(e){return void r(0,t)}null==i.statusCode||200==i.statusCode?n(i):r(i.statusCode,t)}else r(this.status,t)}function c(){r(-2,"client timeout")}function f(e){u.default.showLiveWarnings&&console.log("LI: error details:",e);var t=this.status||0;this.withCredentials?r(t,"network error: request was with credentials"):r(t,"network error: request was without credentials")}if("string"!=typeof e)throw Error("url must be string");if(null==t||!(t>=0))throw Error("Timeout must be non-negative number. 0 means no timeout.");if("function"!=typeof n)throw Error("Expected successCallback to be function");if("function"!=typeof r)throw Error("Expected errorCallback to be function");i=!!i,o=!!o;var p=null!=l;l=l||{};var g=o?null:"undefined"!=typeof XMLHttpRequest&&(!i||"withCredentials"in XMLHttpRequest.prototype)?new XMLHttpRequest:i||"undefined"==typeof XDomainRequest?null:new XDomainRequest,m=void 0;null==g?(m="igniter_"+s.default.generateUUID().replace(/-/g,""),l.jsonp=m,l.sdk="bc-jsonp"):(l.crd=i||null,l.sdk=p?"bc-xhr-post":"bc-xhr-get");var h=void 0;if(p&&null!=g)h=JSON.stringify(l,function(e,t){if(null!=t)return t});else{var v=a(l),y=v?e.indexOf("?")>=0?"&":"?":"";e=e+y+v}if(l=null,null==g){var w=function(){var i=document.createElement("script"),a=!1,o=0==t?null:setTimeout(function(){a||(a=!0,c())},t);return window[m]=function(e){delete window[m],a||(a=!0,null!=o&&clearTimeout(o),n(e)),i.parentNode.removeChild(i)},i.async=i.defer=!0,i.src=e,i.onerror=function(e){a||(a=!0,null!=o&&clearTimeout(o),r(-3,"Jsonp script failed to load")),i.parentNode.removeChild(i)},document.head.appendChild(i),{v:void 0}}();if("object"==typeof w)return w.v}var b=p?"POST":"GET";g.open(b,e),g.withCredentials=i,g.onload=d,g.ontimeout=c,g.onerror=f,g.timeout=t;try{g.send(h)}catch(e){r(-1,e.name+": "+e.message+(null!=e.description?" "+e.description:""))}}function a(e){var t="",n="";for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=Array.isArray(i),o=typeof i,s="string"==o||"number"==o&&isFinite(i)||"boolean"==o,l="object"==o&&null!=i;if(a||s||l){var u=s?i:"globalHist"===r?i.join("|"):JSON.stringify(i);t+=(""+n+encodeURIComponent(r)+"="+encodeURIComponent(u)).replace(/%20/g,"+"),n="&"}}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.thirdPartyFetch=i;var o=n(4),s=r(o),l=n(3),u=r(l);t.default={thirdPartyFetch:i,toQueryString:a}},function(e,t,n){(function(t){"use strict";function n(){}function r(e,t){return function(){e.apply(t,arguments)}}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function a(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void i._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?o:s)(t.promise,e._value);var r;try{r=n(e._value)}catch(e){return void s(t.promise,e)}o(t.promise,r)}))}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void d(r(n,t),e)}e._state=1,e._value=t,l(e)}catch(t){s(e,t)}}function s(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e(function(e){n||(n=!0,o(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}var c=setTimeout;i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var r=new this.constructor(n);return a(this,new u(e,t,r)),r},i.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},i.all=function(e){return new i(function(t,n){function r(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,function(t){r(e,t)},n)}i[e]=o,0===--a&&t(i)}catch(e){n(e)}}if(!e||"undefined"==typeof e.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);for(var a=i.length,o=0;o<i.length;o++)r(o,i[o])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},i._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){c(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},e.exports=i}).call(t,n(19).setImmediate)},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i="undefined"!=typeof e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(20),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,function(){return this}())},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return m[g]=r,p(g),g++}function i(e){delete m[e]}function a(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function o(e){if(h)setTimeout(o,0,e);else{var t=m[e];if(t){h=!0;try{a(t)}finally{i(e),h=!1}}}}function s(){p=function(e){t.nextTick(function(){o(e)})}}function l(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function u(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),p=function(n){e.postMessage(t+n,"*")}}function d(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;o(t)},p=function(t){e.port2.postMessage(t)}}function c(){var e=v.documentElement;p=function(t){var n=v.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function f(){p=function(e){setTimeout(o,0,e)}}if(!e.setImmediate){var p,g=1,m={},h=!1,v=e.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,"[object process]"==={}.toString.call(e.process)?s():l()?u():e.MessageChannel?d():v&&"onreadystatechange"in v.createElement("script")?c():f(),y.setImmediate=r,y.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(21))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(c===clearTimeout)return clearTimeout(e);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function o(){m&&p&&(m=!1,p.length?g=p.concat(g):h=-1,g.length&&s())}function s(){if(!m){var e=i(o);m=!0;for(var t=g.length;t;){for(p=g,g=[];++h<t;)p&&p[h].run();h=-1,t=g.length}p=null,m=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var d,c,f=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(e){c=r}}();var p,g=[],m=!1,h=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new l(e,t)),1!==g.length||m||i(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){f&&(c+=1*new Date-f,f=!1)}function a(){s.default.addEvent(d,"blur",function(){i()}),s.default.addEvent(d,"focus",function(){f=1*new Date})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),s=r(o),l=n(3),u=r(l),d=window,c=0,f=u.default.loadedAt;t.default={getDuration:function(){return c},stopDuration:i,initializeDurationEvents:a},e.exports=t.default},function(e,t){"use strict";function n(e){/in[^t]/.test(document.readyState)?a.setTimeout(function(){n(e)},100):e()}function r(e){/complete/.test(document.readyState)?e():a.setTimeout(function(){r(e)},100)}function i(e,t){e()?t():a.setTimeout(function(){i(e,t)},50)}Object.defineProperty(t,"__esModule",{value:!0});var a=window;t.default={addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,function(){return n.call(e,a.event)})},domReady:n,domComplete:r,doWhenReady:i},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){g[e]=t}function a(e,t){m[e]=t}function o(e,t){h[e]=t}function s(e){var t={dedupGid:"0"};return e.widgets||(e.widgets={}),e.widgets["default-widget"]=t,e.itemRegex||(e.itemRegex=".+"),e}function l(){return s(p.default.jsKey in h?h[p.default.jsKey]:{})}function u(){p.default.jsKey in g&&"undefined"!=typeof g[p.default.jsKey].run&&g[p.default.jsKey].run()}function d(e){p.default.jsKey in g&&"undefined"!=typeof g[p.default.jsKey].render&&g[p.default.jsKey].render(e)}function c(){p.default.jsKey in m&&"undefined"!=typeof m[p.default.jsKey].run&&m[p.default.jsKey].run()}Object.defineProperty(t,"__esModule",{value:!0});var f=n(3),p=r(f),g={},m={},h={};t.default={addExtension:i,addWidgetData:o,getWidgetData:l,addEarlyExtension:a,maybeRunExtension:u,maybeRunEarlyExtension:c,maybeRunExtensionRender:d,reset:function(){g={},m={}}},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),a=r(i),o=n(4),s=r(o),l=window,u=[];t.default={initializeTimers:function(){if(a.default.qOpt.sendTimer&&a.default.timers)for(var e in a.default.timers)this.sendLater(e,a.default.timers[e])},clearTimers:function(){for(var e=0;e<u.length;e++)l.clearTimeout(u[e])},sendLater:function(e,t){u.push(l.setTimeout(function(){var t={w:s.default.getURLParameter("li_medium"),source:s.default.getURLParameter("li_source")};l[a.default.pmVar]("send",e,t)},t))}},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r){try{var i=e.map(function(e){return e&&b.default.sdk.stripParamsWhenCheckingVisibleItems?e.split("?")[0].split("#")[0]:e?e:""}),a=b.default.currentUrl;if(b.default.sdk.stripParamsWhenCheckingVisibleItems&&(a=b.default.currentUrl.split("?")[0].split("#")[0]),i.indexOf(a)>-1){if(!b.default.sdk.failIfCurrentItemTracked){var o="";1==e.length?(o="For the widget "+t+" and source "+n+", the only tracked href in the recommendation area is the same as the current url. This could mean either (a) a rendering error, where your links are pointing to the current page, namely "+b.default.currentUrl+" rather than to the intended recommended pages. This is usually due to an error in your template; or (b) a use of on-click overrides. Our tracking function uses the actual hrefs, so in the case of on-click overrides, our track function will not work",O.default.send("current_item_tracked",x.default.mergeMap(r,{errs:"Only tracked visible item equals the current item. Tracking is likely incorrect"})),b.default.showLiveWarnings&&console.log("LI: "+o),U.default&&U.default.errorMessagesByEventType&&(U.default.errorMessagesByEventType.current_item_tracked=o)):b.default.sdk.checkIfVisibleItemsIncludeCurrentUrl&&(o="For the widget "+t+" and source "+n+", the current url, namely "+b.default.currentUrl+", is one of the tracked hrefs, but not the only one. For a typical implementation, it should not be among the tracked hrefs at all, because you don't want to recommend a page as a recommendation on itself! Please check your rendering and tracking logic to check that you are linking to the intended recommended item and not to the current url",O.default.send("current_item_tracked",x.default.mergeMap(r,{errs:"One of the tracked visible items equals the current item. Tracking is likely incorrect"})),b.default.showLiveWarnings&&console.log("LI: "+o),U.default&&U.default.errorMessagesByEventType&&(U.default.errorMessagesByEventType.current_item_tracked=o))}return!0}}catch(e){return x.default.throwScriptError("LI: Unexpected error when checking for visible items duplicating current item, but continuing:",e),!1}return!1}function a(e,t,n){b.default.sdk.checkItemsMismatch&&U.default.responseVisibleItemsByWidgetName&&U.default.responseVisibleItemsByWidgetName[t]&&JSON.stringify(U.default.responseVisibleItemsByWidgetName[t])!=JSON.stringify(e)&&(O.default.send("widget_tracking_items_mismatch",x.default.mergeMap(n,{errs:"Items tracked as shown did not match the items returned in the most recent response",vi:JSON.stringify(e.slice(0,b.default.sdk.maxVizItemsToSend)),responseVisibleItems:JSON.stringify(U.default.responseVisibleItemsByWidgetName[t])})),b.default.showLiveWarnings&&console.log("LI: For widget name "+t+", the visible items in the response returned by us did not match the visible items tracked as shown.\nThe visible item list for response was ("+(U.default.responseVisibleItemsByWidgetName[t].length+" items): \n")+JSON.stringify(U.default.responseVisibleItemsByWidgetName[t])+"\nThe visible item list tracked as  shown was ("+(e.length+" items): \n")+JSON.stringify(e.slice(0,b.default.sdk.maxVizItemsToSend))))}function o(e,t,n,r){t=t||{};var i=e.getAttribute(n)||e.getAttribute("data-"+n);return i?i:t.hasOwnProperty(n)?t[n]:r}function s(e,t,n,r){try{var i=n||"li",a=e.href;if(a)a.indexOf(i+"_")>=0&&(a=T.default.removeParam(a,i+"_source"),a=T.default.removeParam(a,i+"_medium")),e.href=a+(a.indexOf("?")>=0?"&":"?")+(t.source?i+"_source="+t.source:"")+(t.w?"&"+i+"_medium="+t.w:"");else{var o="Error tagging anchor at position "+r+' when invoking the $p("track",...) function. The tracked anchor did not have any href element. Anchor information: '+JSON.stringify(e),s="Source: "+(t.source||"")+"; Widget: "+(t.w||"")+"; "+o;console.log("LI: "+s),U.default&&U.default.errorMessagesByEventType&&(U.default.errorMessagesByEventType.widget_tracking_error=s),O.default.send("widget_tracking_error",x.default.mergeMap(t,{errs:"Tracked anchor at position "+r+" has no href so cannot be tagged",fullErrorDetails:o}))}}catch(e){var o="Error tagging anchor at position "+r+' when invoking the $p("track",...) function. This usually happens when we are unable to find any anchors in the tracked area. It could be because you are tracking the incorrect area, or it could be because the content loads dynamically. Click tracking may still work but we won\'t be able to determine the click URL. Error:'+e;O.default.send("widget_tracking_error",x.default.mergeMap(t,{errs:""+e})),U.default&&U.default.errorMessagesByEventType&&(U.default.errorMessagesByEventType.widget_tracking_error=o),console.log("LI: "+o)}}function l(e,t,n,r){if(!(q[e].numUnitsToTag<=0)){var i=Array.prototype.slice.call(t.querySelectorAll(n));i&&i.length>0&&q[e].numUnitsToTag-- >0&&i.forEach(function(e){s(e,r)})}}function u(e,t,n){var r=q[e].el,i=x.default.makeACopy(q[e].opts);if(!i.noCollectWidgetInfo){if(i["max-link"]=o(r,i,"max-link",t.maxLink),i["collect-link-selector"]=o(r,i,"collect-link-selector",t.collectLinkSelector),i["tag-unit-max"]=i["tag-unit-max"]||t.tagUnitMax||1e5,i["tag-unit-selector"]=i["tag-unit-selector"]||t.tagUnitSelector,i["tag-link-selector"]=o(r,i,"tag-link-selector",t.tagLinkSelector),i.noTag=i.noTag||t.noTag||b.default.noTag||!1,n=n||{},n.w=q[e].name,!i.noTag){var a=i["tag-link-selector"];i["tag-unit-selector"]?(q[e].numUnitsToTag=i["tag-unit-max"],Array.prototype.slice.call(r.querySelectorAll(i["tag-unit-selector"])).forEach(function(t){l(e,t,a,n)}),E.default.addEvent(r,"DOMNodeInserted",function(t){var r=document.createElement("div");r.innerHTML=t.target.outerHTML||"",r.querySelector(i["tag-unit-selector"])&&l(e,t.target,a,n)})):Array.prototype.slice.call(r.querySelectorAll(a)).forEach(function(e){s(e,n)})}var u=Array.prototype.slice.call(r.querySelectorAll(i["collect-link-selector"])).map(function(e){return e.href}).filter(function(e){return e}).slice(0,i["max-link"]);i.noClickTracking||(h(r,i,n,u),f(r,i,n,e));var d=x.default.mergeMap(n,{vi:JSON.stringify(u)});O.default.storeLatestVisibleItems(u),U.default&&U.default.shownSourceMap&&d&&d.source&&(U.default.shownSourceMap[d.source]?U.default.shownSourceMap[d.source]=U.default.shownSourceMap[d.source]+1:U.default.shownSourceMap[d.source]=1),O.default.send("widget_shown",d)}}function d(e,t,n,r){var i=b.default.trackingTransURL(e.href);if(null!=b.default.overrideViClickUrlWithResponseVisibleItemsByWidgetName&&"LI"===n.source){var a=b.default.overrideViClickUrlWithResponseVisibleItemsByWidgetName[n.w];a&&(i=U.default.responseVisibleItemsByWidgetName[a][0])}var o=x.default.mergeMap({clickUrl:i},n);"function"==typeof b.default.sdk.widgetAnalysis&&(o=b.default.sdk.widgetAnalysis(e,o)),E.default.addEvent(e,"click",function(e){o.trigger="click",p(e,t,o,r)}),E.default.addEvent(e,"contextmenu",function(e){o.trigger="contextmenu",p(e,t,o,r)})}function c(e,t,n,r,i){if(!(q[e].numUnitsToTrack<=0)){var a=Array.prototype.slice.call(t.querySelectorAll(n));a&&a.length>0&&q[e].numUnitsToTrack-- >0&&a.forEach(function(e){d(e,r,i)})}}function f(e,t,n,r){var i=t["tag-link-selector"];t["tag-unit-selector"]?(q[r].numUnitsToTrack=t["tag-unit-max"],Array.prototype.slice.call(e.querySelectorAll(t["tag-unit-selector"])).forEach(function(e){c(r,e,i,t,n)}),E.default.addEvent(e,"DOMNodeInserted",function(e){var a=document.createElement("div");a.innerHTML=e.target.outerHTML||"",a.querySelector(t["tag-unit-selector"])&&c(r,e.target,i,t,n)})):Array.prototype.slice.call(e.querySelectorAll(i)).forEach(function(e){d(e,t,n)})}function p(e,t,n,r){var i=n.tType||"widget",a=n.w||"default-widget",o=i+"_click";try{var s=n.clickUrl||"";if(b.default.sdk.stripParamsWhenCheckingVisibleItems&&(s=(n.clickUrl||"").split("?")[0].split("#")[0]),U.default.clickUrls.indexOf(s)!=-1){var l="";return b.default.sdk.stripParamsWhenCheckingVisibleItems&&(l="after trimming"),console.log("LI: A duplicate click event was detected for the url "+(n.clickUrl||"")+", "+l+": "+s+", when comparing against the list, hence not sending the duplicate click",U.default.clickUrls),void U.default.duplicatesDetected.push(o)}if(window.performance&&window.performance.now&&"function"==typeof window.performance.now&&U.default&&U.default.lastTsplByEventType&&U.default.lastTsplByEventType.widget_click&&window.performance.now()-U.default.lastTsplByEventType.widget_click<100){o+="_likely_duplicate",U.default.duplicatesDetected.push(o),console.log("LI: We detected a click event within less than 100 ms after the previous click event. The widget name is "+a+" and source is "+(n.source||"")),n.errs="Click less than 100 ms after last click on different url";var u="Time gap: "+(window.performance.now()-U.default.lastTsplByEventType.widget_click)+" ms; previous clickUrl = "+U.default.clickUrls[U.default.clickUrls.length-1]+"; current clickUrl = "+s;console.log("LI: "+u),n.fullErrorDetails=u}U.default.clickUrls.push(s)}catch(e){console.log("LI: Encountered unexpected error when checking for duplicate click event, continuing anyway",e)}try{window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(U.default.timing.clickTimes[a]=0|window.performance.now(),n.tsv=(U.default.timing.clickTimes[a]||0)-(U.default.timing.visibleTimes[a]||0),n.tss=(U.default.timing.clickTimes[a]||0)-(U.default.timing.shownTimes[a]||0))}catch(e){console.log("LI: Encountered unexpected error when adding performance information to visible event: ",e)}r&&alert("click for "+n.w+":"+n.source),b.default.googleAnalytics&&P.default.sendEvents(o,n),O.default.sendRobust(o,n)||(n=x.default.mergeMap(n,{method:"on_page"}),O.default.send(o,n),e.metaKey||e.shiftKey||"click"!=e.type||(e.preventDefault(),j.setTimeout(function(){j.location.href=n.clickUrl},100)))}function g(e){return[].concat.apply([],e.map(function(e){var t=Array.prototype.slice.call(e.querySelectorAll("a"));return"A"!=(e.tagName||e.nodeName||"")&&0!=t.length||t.push(e),t}))}function m(e,t,n){return g(e).map(function(e){return b.default.trackingTransURL(e.href)}).filter(function(e){return e&&t.test(e)}).filter(function(e){return(!n||!n.test(e))&&e}).slice(0,50)}function h(e,t,n,r,i,a){var o=i.type||"widget",s=(i.page||"",x.default.hashOpts(i)),l=function(){if(A.default.isElementVisible(e)&&!H[s]){try{if(window.performance&&window.performance.now){if(U.default.timing.visibleTimes&&U.default.timing.visibleTimes[t]&&(0|window.performance.now())-U.default.timing.visibleTimes[t]<500&&!b.default.sdk.multiTrack)return void console.log("LI: Duplicate widget_visible event detected for the widget "+t+" firing within "+((0|window.performance.now())-U.default.timing.visibleTimes[t])+" ms of the original event");U.default.timing.visibleTimes[t]=0|window.performance.now(),U.default&&U.default.visibleWidgetMap&&t&&(U.default.visibleWidgetMap[t]=(U.default.visibleWidgetMap[t]||0)+1),i.st=U.default.timing.shownTimes[t]||0,i.tss=(U.default.timing.visibleTimes[t]||0)-(U.default.timing.shownTimes[t]||0)}}catch(e){b.default.showLiveWarnings&&console.log("LI: Encountered unexpected error when adding performance information to visible event: ",e)}a&&alert("visible for "+t+":"+r.source),O.default.send(o+"_visible",x.default.mergeMap(x.default.mergeMap(r,i),{
vi:JSON.stringify(n)})),H[s]=!0,b.default&&b.default.shown&&b.default.shown.active&&M.default.storeVisibleElements(n.slice(0,b.default.shown.vizCap))}else H[s]};l(),E.default.addEvent(B,"DOMContentLoaded",A.default.debounce(l,250,!0)),E.default.addEvent(B,"load",A.default.debounce(l,250,!0)),E.default.addEvent(B,"resize",A.default.debounce(l,250,!0)),E.default.addEvent(B,"scroll",A.default.debounce(l,250,b.default.onVisibleImmediatelyAfterScroll)),setTimeout(l,500)}function v(e){var t=e.params||{},n=x.default.getParam(e,"name","string");U.default&&U.default.mostRecentTrackingObject&&(U.default.mostRecentTrackingObject[n]=x.default.mergeMap(e,{}));var r=x.default.getParam(e,"source","string"),o=e.opts||{};if(!r){var l="Error in calling LiftIgniter track function; no source parameter specified. The tracking will not be executed and the associated widget_shown, widget_visible, and widget_click events will not fire";return O.default.send("widget_tracking_error",x.default.mergeMap(o,{errs:"source parameter not specified in track function, so not tracking this widget",w:n})),b.default.showLiveWarnings&&console.log("LI: "+l),void(U.default&&U.default.errorMessagesByEventType&&(U.default.errorMessagesByEventType.widget_tracking_error=l))}var u=e.elements;if(!(u&&u.length&&u.length>0)){var l="Error in calling LiftIgniter track function. There appear to be no elements to track";return O.default.send("widget_tracking_empty_list",x.default.mergeMap(o,{errs:"No elements to track, so not executing the track function",w:n,source:r})),b.default.showLiveWarnings&&console.log("LI: "+l),void(U.default&&U.default.errorMessagesByEventType&&(U.default.errorMessagesByEventType.widget_tracking_empty_list=l))}u=Array.prototype.slice.call(u);var c=I.default.getWidgetData(),f=m(u,new RegExp(c.itemRegex)||/.*/,c.itemExcludeRegex?new RegExp(c.itemExcludeRegex):void 0),p=[];if(f.forEach(function(e){p.indexOf(e)<0&&p.push(b.default.trackingTransURL(e))}),!b.default.sdk.failTrackUntilNewVisibleItemsInSpaPageReset||y(n,p)){var v=o.type||"widget",w="_shown";o.tType=v,o.source=r,o.w=n;var k=i(p,n,r,o);if(!b.default.sdk.failIfCurrentItemTracked||!k){"_shown"==w&&b.default.sdk.timerBufferShown||a(p,n,o);try{window&&window.performance&&window.performance.now&&(!b.default.sdk.multiTrack&&U.default.timing.shownTimes[n]&&(0|window.performance.now())-U.default.timing.shownTimes[n]<b.default.sdk.timerShownLikelyDuplicate&&(0|window.performance.now())-U.default.timing.shownTimes[n]>b.default.sdk.timerBufferShown&&(U.default.duplicatesDetected.push(v+w),w="_shown_likely_duplicate"),U.default.timing.shownTimes[n]=0|window.performance.now(),o.st=U.default.timing.shownTimes[n])}catch(e){b.default.showLiveWarnings&&console.log("LI: Unexpected error when recording the current time",e)}if("search"!=v){if(U.default&&U.default.shownSourceMap&&r&&(U.default.shownSourceMap[r]=(U.default.shownSourceMap[r]||0)+1),U.default&&U.default.shownWidgetMap&&n&&(U.default.shownWidgetMap[n]=(U.default.shownWidgetMap[n]||0)+1),U.default&&U.default.shownVisibleItemsByWidgetName&&n&&(U.default.shownVisibleItemsByWidgetName[n]=p),null!=b.default.overrideViClickUrlWithResponseVisibleItemsByWidgetName&&"LI"===r){var T=b.default.overrideViClickUrlWithResponseVisibleItemsByWidgetName[o.w];T&&(p=U.default.responseVisibleItemsByWidgetName[T])}"_shown"==w&&b.default.sdk.timerBufferShown?(U.default.buffer.shown[n]||window.setTimeout(function(){U.default.buffer.shown[n]&&(O.default.send("widget_shown",U.default.buffer.shown[n]),U.default.buffer.shown[n]="")},b.default.sdk.timerBufferShown),U.default.buffer.shown[n]=x.default.mergeMap(o,{vi:JSON.stringify(p.slice(0,b.default.sdk.maxVizItemsToSend))})):O.default.send(v+w,x.default.mergeMap(o,{vi:JSON.stringify(p.slice(0,b.default.sdk.maxVizItemsToSend))}))}else e.q&&(o.q=e.q);"widget"===v&&b.default.sdk.addOnVisibleWhenTracking&&u[0]&&h(u[0],n,p,o,o,e._debug);var _=g(u);U.default&&U.default.mostRecentTrackedAnchors&&(U.default.mostRecentTrackedAnchors[n]=_);var S=e.tagPrefix||t.tagPrefix?e.tagPrefix||t.tagPrefix:"li",C=e.noTag||t.noTag||b.default.noTag||!1,E=e.noClick||t.noClick||!1,L=0;_.forEach(function(t){if(null!=b.default.overrideViClickUrlWithResponseVisibleItemsByWidgetName&&"LI"===r){var n=b.default.overrideViClickUrlWithResponseVisibleItemsByWidgetName[o.w];n&&(p=U.default.responseVisibleItemsByWidgetName[n])}C||s(t,o,S,L),E||d(t,o,x.default.mergeMap(o,{vi:JSON.stringify(p.slice(0,b.default.sdk.maxVizItemsToSend))}),e._debug,L),L+=1}),F[n]=!0}}}function y(e,t){if(U.default.shownVisibleItemsByWidgetName[e]){var n=t.map(function(e){return e=x.default.removeURLParameter(e,"li_source"),e=x.default.removeURLParameter(e,"li_medium")});return U.default.shownVisibleItemsByWidgetNameBeforeSpaPageReset[e]?U.default.shownVisibleItemsByWidgetNameBeforeSpaPageReset[e].toString()!=n.toString()&&(delete U.default.shownVisibleItemsByWidgetNameBeforeSpaPageReset[e],!0):(U.default.shownVisibleItemsByWidgetNameBeforeSpaPageReset[e]=n,!1)}return!0}Object.defineProperty(t,"__esModule",{value:!0});var w=n(3),b=r(w),k=n(9),T=r(k),_=n(24),I=r(_),S=n(4),x=r(S),C=n(23),E=r(C),L=n(8),O=r(L),R=n(7),M=r(R),D=n(27),A=r(D),N=n(14),U=r(N),W=n(16),P=r(W),j=window,B=document,q={},H={},F={};t.default={widgets:q,collectWidgetInfo:u,tagAnchor:s,trackAnchor:d,onClick:p,track:v},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var r;return function(){var i=this,a=arguments,o=function(){r=null,n||e.apply(i,a)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(i,a)}}function a(){p.default.refresh(),p.default.sdk.pushStateCallback(),w.default.refresh(),m.default.initializeCookies(),c.default.clearTimers(),c.default.initializeTimers(),v.default.send("pageview")}function o(){if(window.history){var e=window.history.pushState;window.history.pushState=function(t){return k&&setTimeout(a,0),e.apply(window.history,arguments)};var t=window.history.replaceState;window.history.replaceState=function(e){return p.default.sdk.replaceStateReset&&setTimeout(a,0),t.apply(window.history,arguments)}}var n=window.onhashchange||function(){return!0};window.onhashchange=function(){return b&&setTimeout(a,0),n.apply(window,arguments)}}function s(e){b=e}function l(e){k=e}function u(e){var t=e.getBoundingClientRect(),n=window.innerWidth||T.documentElement.clientWidth,r=window.innerHeight||T.documentElement.clientHeight,i=function(e,t){return document.elementFromPoint(e,t)};if(t.right<0||t.bottom<0||t.left>n||t.top>r)return!1;0==t.height;var a=!1;p.default.checkElementParentIsActuallyVisible&&(a=e.parentNode==i(t.left,t.top)||e.parentNode==i(t.right,t.top)||e.parentNode==i(t.right,t.bottom)||e.parentNode==i(t.left,t.bottom));var o=e.contains(i(t.left,t.top))||e.contains(i(t.right,t.top))||e.contains(i(t.right,t.bottom))||e.contains(i(t.left,t.bottom))||e.contains(i((t.left+t.right)/2,(t.top+t.bottom)/2));return o||a}Object.defineProperty(t,"__esModule",{value:!0});var d=n(25),c=r(d),f=n(3),p=r(f),g=n(6),m=r(g),h=n(8),v=r(h),y=n(14),w=r(y),b=!0,k=p.default.sdk.pushStateReset||!1,T=(p.default.sdk.replaceStateReset||!1,window,document);t.default={initializeNavigationEvents:o,setOnHashChangeReset:s,setPushStateReset:l,isElementVisible:u,debounce:i},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){h.default&&h.default.inventoryData&&(h.default.inventoryData.scrapingStarted=!0,window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(h.default.inventoryData.timing.scrapeStart=0|window.performance.now()));var e=s.default.inventory.collectOpenGraph?c.default.scrapeOpenGraph():{};if(s.default.inventory.collectOpenGraph&&s.default.inventory.collectOpenGraphOnly)for(var t=0;t<s.default.inventory.mandatoryOpenGraphFeatures.length;t++)if(void 0===e[s.default.inventory.mandatoryOpenGraphFeatures[t]])return s.default.debug&&console.log("LI: You are missing the following Open Graph feature for your metadata: "+s.default.inventory.mandatoryOpenGraphFeatures[t]),h.default.inventoryData.scrapingAborted=!0,h.default.inventoryData.scrapingAbortReason="missing feature: "+s.default.inventory.mandatoryOpenGraphFeatures[t],window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(h.default.inventoryData.timing.scrapeAbort=0|window.performance.now()),{status:"aborted",reason:"missing open graph feature: "+s.default.inventory.mandatoryOpenGraphFeatures[t]};var n=s.default.inventory.features;if(n)for(var t=0;t<n.length;t++){var r=n[t],i=c.default.scrapeFeature(r);i&&i.length>0&&(e[r.name]=i)}var a=s.default.serverConfig.exportable.scrapedFields;if(a)for(var t=0;t<a.length;t++){var r=a[t],i=c.default.scrapeFeature(r);i&&i.length>0&&(e[r.name]=i)}e.title||(e.title=[c.default.getTitleFallback()]),e.url=[c.default.getCanonicalUrl()];for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];(void 0===i||null===i||i.length<=0)&&delete e[o]}s.default.inventory.collectJSON&&(e=p.default.mergeMap(e,c.default.scrapeJSON()));for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];void 0!==i&&null!==i||delete e[o]}for(var t=0;t<s.default.inventory.mandatoryFeatures.length;t++)if(void 0===e[s.default.inventory.mandatoryFeatures[t]])return s.default.debug&&console.log("LI: You are missing the following feature for your metadata: "+s.default.inventory.mandatoryFeatures[t]),{status:"aborted",reason:"A mandatory feature (added in the extension) is missing: "+s.default.inventory.mandatoryFeatures[t]};var l=s.default.serverConfig.exportable.mandatoryScrapeFeatures;if(l)for(var t=0;t<l.length;t++)if(void 0===e[l[t]])return s.default.debug&&console.log("LI: You are missing the following feature for your scraped metadata: "+l[t]),{status:"aborted",reason:"A mandatory feature is missing: "+l[t]};h.default&&h.default.inventoryData&&(h.default.inventoryData.scrapingFinished=!0,window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(h.default.inventoryData.timing.scrape=0|window.performance.now()));var u=s.default.inventory.jsVars;if(u)for(var o in u)e.hasOwnProperty(o)&&(e[o]=u[o]);var d=s.default.inventory.itemRegex,f=s.default.inventory.excludeRegex;if(d&&e[s.default.inventory.id]&&e[s.default.inventory.id][0]&&null===e[s.default.inventory.id][0].match(d))return{status:"aborted",reason:"item id didn't match the itemRegex in the browser extension"};if(f&&e[s.default.inventory.id]&&e[s.default.inventory.id][0]&&null!==e[s.default.inventory.id][0].match(f))return{status:"aborted",reason:"item id matched the excludeRegex in the browser extension"};var g=s.default.serverConfig.exportable.includeInventoryRegex,m=s.default.serverConfig.exportable.excludeInventoryRegex;if(g&&e[s.default.inventory.id]&&e[s.default.inventory.id][0]&&null===e[s.default.inventory.id][0].match(g))return{status:"aborted",reason:"item id didn't match the include regex provided in the UI"};if(m&&e[s.default.inventory.id]&&e[s.default.inventory.id][0]&&null!==e[s.default.inventory.id][0].match(m))return{status:"aborted",reason:"item id matched the exclude regex provided in the UI"};var v=s.default.inventory.filters;if(v&&e)for(var t=0;t<v.length;t++)if((e[v[t].name]||[]).indexOf(v[t].value)>=0){if("true"!=v[t].negate)return{status:"aborted",reason:"noIndex was found"}}else if("true"==v[t].negate)return{status:"aborted",reason:"noIndex was found"};return{status:"success",item:e}}function a(){h.default&&h.default.inventoryData&&(h.default.inventoryData.collectStarted=!0,window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(h.default.inventoryData.timing.collectStart=0|window.performance.now()));var e=y.default.toQueryString(u.default.basicParam(null)),t=s.default.inventory.inventoryServer+"/"+s.default.inventory.inventoryApiVersion+"/__inventory.gif?"+e,n=i();if("success"==n.status&&Object.keys(n.item).length>1){t+="&item="+encodeURIComponent(JSON.stringify(n.item)),t+=void 0===s.default.inventory.version?"":"&ver="+s.default.inventory.version,t+="&ttl="+s.default.inventory.ttl;var r=new Image;r.src=t,h.default&&h.default.inventoryData&&(h.default.inventoryData.inventorySent=!0,window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(h.default.inventoryData.timing.send=0|window.performance.now()))}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),s=r(o),l=n(9),u=r(l),d=n(11),c=r(d),f=n(4),p=r(f),g=n(8),m=(r(g),n(14)),h=r(m),v=n(17),y=r(v);t.default={collect:a,scrapeInventory:i},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){H.default.uid?"donottrack"==H.default.uid?(H.default.showLiveWarnings&&console.log('LI: The userId (uid), as read in from the _ig cookie, is set to donottrack, which means LiftIgniter is not personalizing recommendations to your browsing history; recommendations will be based only on the context directly available from the current impression. Run $p("optBack") to opt back in to being tracked by LiftIgniter'),J.default.sendPixelAndMarkErrorMessage("widget_request_error","user opted out of first-party tracking")):"nocookieaccess"==H.default.uid&&(H.default.showLiveWarnings&&console.log("LI: We were unable to access browser cookies, so are unable to personalize recommendations to your browsing history; recommendations will be based only on the context directly available from the current impression. Check your browser's cookie access settings"),J.default.sendPixelAndMarkErrorMessage("widget_request_error","user does not allow browser cookie access")):(H.default.showLiveWarnings&&console.log('LI: userId (uid) is not defined. Request for recommendations will not yield personalized recommendations. This could be because you are using addEarlyExtension() instead of addExtension(), or running $p("fetch") before $p("init")'),J.default.sendPixelAndMarkErrorMessage("widget_request_error","missing userId"))}function a(){return H.default.jsKey?!!H.default.disabledCust[H.default.jsKey]&&(console.log("LI: Thank you for using LiftIgniter! If you are interested in re-activating our service, please contact us at support@liftigniter.com"),!0):(console.log("LI: Couldn't find your jsKey. Please initialize first. The most typical reason for this is that you are including our JavaScript snippet twice (this could be twice on the page, or once on the page and once in Google Tag Manager, or twice in Google Tag Manager). If you have more questions, please contact support@liftigniter.com"),!0)}function o(){return i(),H.default.enableSendFromHeadless||window.navigator.userAgent.indexOf("LiftIgniterHeadlessChrome")===-1?!a()&&(!(re.default.fetchCalled&&!H.default.sdk.multiFetch)||(re.default.allowRegister===!0&&H.default.showLiveWarnings&&console.log("LI: fetch called before. Doing nothing"),!1)):(H.default.showLiveWarnings&&console.log("LI: You cannot fetch from HeadlessChrome"),!1)}function s(){return V.default.getWidgetData()}function l(e){return 0==Object.keys(e).length}function u(){return!l(s())}function d(e){var t=J.default.getObjectKeys(s().widgets);if(e&&"function"==typeof e)return e(t);if(e){var n=J.default.getParam(e,"callback","function");return n?n(t):t}return t}function c(e){e&&re.default.allowRegister!==!1&&ge.default.register(e)}function f(e){H.default.refresh(),re.default.refresh(),oe.default.initializeCookies(),le.default.clearTimers(),le.default.initializeTimers(),X.default.send("pageview",e)}function p(e){return!!o()&&void ge.default.fetch(e)}function g(e){return te.default.getAnchors(e)}function m(e,t){function n(e){13==e.which&&X.default.send("search_enter",{source:t,q:e.target.value})}var r=document.querySelector(e);r&&r.addEventListener("keypress",n,!1)}function h(e){v(e),window.setTimeout(v(e),200),window.setTimeout(v(e),400)}function v(e){e&&(e.name||(H.default.showLiveWarnings&&console.log("LI: specify the widget name on tracking function. Setting widget name to default-widget by default"),e.name="default-widget"),"function"==typeof H.default.sdk.customTrackFunc&&H.default.sdk.customTrackFunc(e),te.default.track(e))}function y(e){var t=J.default.djb2HashCode(H.default.uid||0);if(!e||"function"!=typeof e){if(e){var n=J.default.getParam(e,"callback","function");return n?n(t):(elseTe,t)}return t}e(t)}function w(e,t,n,r){var i=r||["{{","}}"];B.default.parse(e,i);var a=B.default.render(e,t);return"function"==typeof n?n(a):a}function b(e){var t=s();"function"==typeof t.render?t.render(e):H.default.showLiveWarnings&&console.log("LI: Custom widget not defined.")}function k(e){"[object Array]"===Object.prototype.toString.call(e)?H.default.sdk.requestFields=e:console.error("LI: Error setting request fields: input is not an array.")}function T(e){"[object Array]"===Object.prototype.toString.call(e)?H.default.sdk.arrayRequestFields=e:console.error("LI: Error setting array request fields: input is not an array.")}function _(e){"[object Array]"===Object.prototype.toString.call(e)?H.default.sdk.mandatoryRequestFields=e:console.error("LI: Error setting mandatory request fields: input is not an array.")}function I(e){"[object Array]"===Object.prototype.toString.call(e)?H.default.sdk.mandatoryArrayRequestFields=e:console.error("LI: Error setting mandatory array request fields: input is not an array.")}function S(e){"boolean"==typeof e?H.default.sdk.requestFieldsAON=e:console.error("LI: Error setting request fields all or nothing: input is not a boolean.")}function x(e){"boolean"==typeof e?H.default.sdk.getQueryInfo=e:console.error("Error changing setting on getting query info: input is not a boolean.")}function C(e){"boolean"==typeof e?H.default.noTag=e:console.error("Error setting noTag: input is not a boolean.")}function E(e,t){var n=t||{},r=he.querySelectorAll(e);return Array.prototype.slice.call(r,n.st,n.e)}function L(e,t,n,r,i,a){var o,s=i||{};if(s.fullRender){var l=he.querySelector(s.topLevelCss);l.innerHTML=B.default.render(r,{items:n}),o=E(e,s.replaceRange)}else{o=E(e,s.replaceRange);for(var u=Math.min(o.length,n.length),d=0;d<u;++d)if(s.outer){var c=he.createElement("div");c.innerHTML=B.default.render(r,n[d]),o[d].parentNode.replaceChild(c.firstChild,o[d])}else"{}"!==JSON.stringify(n[d])&&(o[d].innerHTML=B.default.render(r,n[d]));s.outer&&(o=E(e,s.replaceRange))}v({opts:a,elements:o,name:t,source:"LI",params:{tagPrefix:s.tagPrefix,noTag:s.noTag}}),s["on-load"]&&eval.call(me,s["on-load"])}function O(e,t,n,r,i,a,o,s){a=a||{},c({max:e,widget:n,callback:function(e){function i(){a.preproc&&(u=me[a.preproc](u,n)),L(t,n,u,r,a,s),a.postproc&&(u=me[a.postproc](u))}function l(){var e=a.fullRender?a.topLevelCss:t;return he.querySelectorAll(e).length>0}var u=e.items,d=o||l;$.default.doWhenReady(d,i)},opts:i||{}})}function R(e,t,n,r){function i(){var t=a.fullRender?a.topLevelCss:e;return he.querySelectorAll(t).length>0}var a=n||{},o=r||i;$.default.doWhenReady(o,function(){var n=E(e,a.replaceRange);v({elements:n,name:t,source:"base",params:{tagPrefix:a.tagPrefix,noTag:a.noTag}})})}function M(){try{if(me.location.search.indexOf("igniter_abhash")!=-1){var e=parseInt(G.default.getParam("igniter_abhash"));if(!isNaN(e)&&e<100&&e>=0)return e}}catch(e){}return y()%100}function D(e){if(e){var t=J.default.getParam(e,"callback","function");if(t)return t(M())}}function A(e){if(H.default.inventory.collect)return void console.log("LI: Default scraping is turned on. Turn off automatic scraping");var t=e||{},n=H.default.inventory.mandatoryFeatures,r=de.default.toQueryString(G.default.basicParam(null)),i=H.default.inventory.inventoryServer+"/"+H.default.inventory.inventoryApiVersion+"/__inventory.gif?"+r,a=!1;for(var o in t)if(t.hasOwnProperty(o)){var s=typeof t[o];if("string"===s||"number"===s)t[o]=t[o];else if(void 0===t[o])console.log("LI: A field is undefined. Removing the field"),delete t[o];else{if(!(t[o].length>=0))throw"LI: LI only accepts String, Number, or array of Strings for object values";a=!0}}for(var l=0;l<n.length;l++)if(!t[n[l]])throw"LI: You are missing the following feature for your metadata: "+n[l];if(void 0!==t&&Object.keys(t).length>1){i+="&item="+encodeURIComponent(JSON.stringify(t)),i+=void 0===H.default.inventory.version?"":"&ver="+H.default.inventory.version;var u=new Image;u.src=i}}function N(e){return H.default.sdk.manualHist?e instanceof Array?void(H.default.sdk.manualHist=e):void console.log("LI: Given argument is not an array."):void console.log("LI: Turn off the automatic history tracking")}function U(e){H.default.claimedGid="donottrack",e===!1&&(H.default.uid="donottrack",oe.default.createCookie(H.default.permKey,"donottrack",7300)),X.default.send("opt_out",{})}function W(){H.default.claimedGid=fe.default.randomStringGid(20),oe.default.setUserId(J.default.generateUUID()),X.default.send("opt_back",{optback:"1"})}function P(e){H.default.customContext=e}Object.defineProperty(t,"__esModule",{value:!0});var j=n(30),B=r(j),q=n(3),H=r(q),F=n(9),G=r(F),K=n(24),V=r(K),z=n(4),J=r(z),Q=n(23),$=r(Q),Y=n(8),X=r(Y),Z=n(7),ee=(r(Z),n(26)),te=r(ee),ne=n(14),re=r(ne),ie=n(27),ae=(r(ie),n(6)),oe=r(ae),se=n(25),le=r(se),ue=n(17),de=r(ue),ce=n(12),fe=r(ce),pe=n(31),ge=r(pe),me=window,he=document;J.default.size;t.default={getAnchors:g,getWidgetNames:d,register:c,fetch:p,resetPageview:f,monitorSearch:m,track:v,userHash:y,render:w,renderCustomWidget:b,setRequestFields:k,setArrayRequestFields:T,setMandatoryRequestFields:_,setMandatoryArrayRequestFields:I,setRequestFieldsAON:S,setGetQueryInfo:x,setNoTag:C,isActivated:u,addRecsHelper:O,baseTrack:R,abSlice:M,abTestSlice:D,sendItem:A,setHist:N,setContext:P,optOut:U,optBack:W,trackThrice:h},e.exports=t.default},function(e,t,n){var r,i,a;/*!
	 * mustache.js - Logic-less {{mustache}} templates with JavaScript
	 * http://github.com/janl/mustache.js
	 */
!function(n,o){"object"==typeof t&&t&&"string"!=typeof t.nodeName?o(t):(i=[t],r=o,a="function"==typeof r?r.apply(t,i):r,!(void 0!==a&&(e.exports=a)))}(this,function(e){function t(e){return"function"==typeof e}function n(e){return m(e)?"array":typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}function a(e,t){return h.call(e,t)}function o(e){return!a(v,e)}function s(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return y[e]})}function l(t,n){function i(){if(v&&!y)for(;h.length;)delete g[h.pop()];else h=[];v=!1,y=!1}function a(e){if("string"==typeof e&&(e=e.split(b,2)),!m(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(r(e[0])+"\\s*"),l=new RegExp("\\s*"+r(e[1])),f=new RegExp("\\s*"+r("}"+e[1]))}if(!t)return[];var s,l,f,p=[],g=[],h=[],v=!1,y=!1;a(n||e.tags);for(var I,S,x,C,E,L,O=new c(t);!O.eos();){if(I=O.pos,x=O.scanUntil(s))for(var R=0,M=x.length;R<M;++R)C=x.charAt(R),o(C)?h.push(g.length):y=!0,g.push(["text",C,I,I+1]),I+=1,"\n"===C&&i();if(!O.scan(s))break;if(v=!0,S=O.scan(_)||"name",O.scan(w),"="===S?(x=O.scanUntil(k),O.scan(k),O.scanUntil(l)):"{"===S?(x=O.scanUntil(f),O.scan(T),O.scanUntil(l),S="&"):x=O.scanUntil(l),!O.scan(l))throw new Error("Unclosed tag at "+O.pos);if(E=[S,x,I,O.pos],g.push(E),"#"===S||"^"===S)p.push(E);else if("/"===S){if(L=p.pop(),!L)throw new Error('Unopened section "'+x+'" at '+I);if(L[1]!==x)throw new Error('Unclosed section "'+L[1]+'" at '+I)}else"name"===S||"{"===S||"&"===S?y=!0:"="===S&&a(x)}if(L=p.pop())throw new Error('Unclosed section "'+L[1]+'" at '+O.pos);return d(u(g))}function u(e){for(var t,n,r=[],i=0,a=e.length;i<a;++i)t=e[i],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}function d(e){for(var t,n,r=[],i=r,a=[],o=0,s=e.length;o<s;++o)switch(t=e[o],t[0]){case"#":case"^":i.push(t),a.push(t),i=t[4]=[];break;case"/":n=a.pop(),n[5]=t[2],i=a.length>0?a[a.length-1][4]:r;break;default:i.push(t)}return r}function c(e){this.string=e,this.tail=e,this.pos=0}function f(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function p(){this.cache={}}var g=Object.prototype.toString,m=Array.isArray||function(e){return"[object Array]"===g.call(e)},h=RegExp.prototype.test,v=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},w=/\s*/,b=/\s+/,k=/\s*=/,T=/\s*\}/,_=/#|\^|\/|>|\{|&|=|!/;c.prototype.eos=function(){return""===this.tail},c.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},c.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},f.prototype.push=function(e){return new f(e,this)},f.prototype.lookup=function(e){var n,r=this.cache;if(r.hasOwnProperty(e))n=r[e];else{for(var a,o,s=this,l=!1;s;){if(e.indexOf(".")>0)for(n=s.view,a=e.split("."),o=0;null!=n&&o<a.length;)o===a.length-1&&(l=i(n,a[o])),n=n[a[o++]];else n=s.view[e],l=i(s.view,e);if(l)break;s=s.parent}r[e]=n}return t(n)&&(n=n.call(this.view)),n},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(e,t){var n=this.cache,r=n[e];return null==r&&(r=n[e]=l(e,t)),r},p.prototype.render=function(e,t,n){var r=this.parse(e),i=t instanceof f?t:new f(t);return this.renderTokens(r,i,n,e)},p.prototype.renderTokens=function(e,t,n,r){for(var i,a,o,s="",l=0,u=e.length;l<u;++l)o=void 0,i=e[l],a=i[0],"#"===a?o=this.renderSection(i,t,n,r):"^"===a?o=this.renderInverted(i,t,n,r):">"===a?o=this.renderPartial(i,t,n,r):"&"===a?o=this.unescapedValue(i,t):"name"===a?o=this.escapedValue(i,t):"text"===a&&(o=this.rawValue(i)),void 0!==o&&(s+=o);return s},p.prototype.renderSection=function(e,n,r,i){function a(e){return o.render(e,n,r)}var o=this,s="",l=n.lookup(e[1]);if(l){if(m(l))for(var u=0,d=l.length;u<d;++u)s+=this.renderTokens(e[4],n.push(l[u]),r,i);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(e[4],n.push(l),r,i);else if(t(l)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,i.slice(e[3],e[5]),a),null!=l&&(s+=l)}else s+=this.renderTokens(e[4],n,r,i);return s}},p.prototype.renderInverted=function(e,t,n,r){var i=t.lookup(e[1]);if(!i||m(i)&&0===i.length)return this.renderTokens(e[4],t,n,r)},p.prototype.renderPartial=function(e,n,r){if(r){var i=t(r)?r(e[1]):r[e[1]];return null!=i?this.renderTokens(this.parse(i),n,r,i):void 0}},p.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},p.prototype.escapedValue=function(t,n){var r=n.lookup(t[1]);if(null!=r)return e.escape(r)},p.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var I=new p;return e.clearCache=function(){return I.clearCache()},e.parse=function(e,t){return I.parse(e,t)},e.render=function(e,t,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return I.render(e,t,r)},e.to_html=function(n,r,i,a){var o=e.render(n,r,i);return t(a)?void a(o):o},e.escape=s,e.Scanner=c,e.Context=f,e.Writer=p,e})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){if(q.location.search.indexOf("ig_exp_hash")!=-1){var e=parseInt(_.default.getParam("ig_exp_hash"));if(!isNaN(e)&&e<100&&e>=0)return e}}function a(e,t){t=t||{},t.max=e.max?e.max:null,t.w=e.name?e.name:null,t.f=k.default.sdk.requestFields?k.default.sdk.requestFields:null,t.arf=k.default.sdk.arrayRequestFields?k.default.sdk.arrayRequestFields:null;var n=k.default.sdk.mandatoryRequestFields;t.mf=n&&n.length>0?n:null;var r=k.default.sdk.mandatoryArrayRequestFields;t.marf=r&&r.length>0?r:null,t.fa=k.default.sdk.requestFieldsAON?k.default.sdk.requestFieldsAON:null,t.gqi=k.default.sdk.getQueryInfo?k.default.sdk.getQueryInfo:null;for(var i in e.opts)e.opts.hasOwnProperty(i)&&(t[i]=e.opts[i]);return t}function o(e){e=e||{};try{var t=null;R.default.hasStorageEnabled()&&(k.default.shown.active&&k.default.longHist.active?t=JSON.parse(R.default.getLongHist()).concat(JSON.parse(R.default.getFrequent())):k.default.longHist.active?t=JSON.parse(R.default.getLongHist()):k.default.shown.active&&(t=JSON.parse(R.default.getFrequent())),k.default.longHist.active||R.default.removeItem(k.default.longHistKey),k.default.shown.active||R.default.removeItem(k.default.shown.freqCapKey)),e.exc=t}catch(e){k.default.showLiveWarnings&&(console.log("LI: Error when trying to add some storage data into query, continuing anyway. Contact support@liftigniter.com if you notice this, including information on your browser."),console.log("LI: Error details",e))}return e}function s(e){e=e||{};try{var t=k.default.globalCtx;for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}catch(e){k.default.showLiveWarnings&&console.log("LI: Error adding global context when making model query, the query will still proceed fine")}return e}function l(){var e=!1,t=k.default.isInIframe?document.referrer:k.default.currentUrl;return t&&""!=t&&!k.default.isInIframe&&window&&window.location&&window.location.origin&&""!=window.location.origin&&(e=!0,C.default.isThirdPartyOrigin(window.location.origin)&&(e=!1)),0!=k.default.useThirdParty&&4!=C.default.androidVersionCheck()||(e=!1),e}function u(e,t,n){var r=C.default.getOrElse(A.default.fetchData.dedupQueue,n,[]),i=[],a=k.default.sdk.iden,o=k.default.isInIframe?document.referrer:k.default.currentUrl,s=k.default.activity.urlTransform(o);if(e.items)if(e.items.length)try{for(var l=0,u=0;l<e.items.length&&u<t;++l){var d=e.items[l][a]||"",c=C.default.djb2HashCode(d);if(("url"!=k.default.sdk.iden||d!=s)&&1!=r[c]){""!=n&&(r[c]=1);var f=C.default.makeACopy(e.items[l]);f.url=k.default.sdk.renderTransform(f.url),f.rank=++u,i.push(f)}}}catch(e){}else k.default.showLiveWarnings&&console.log("LI: Query response received from LiftIgniter was either empty or not of the proper type. This could be due to a timeout, network error, or server error. If you see this error repeatedly, contact support@liftigniter.com with full context.");else k.default.showLiveWarnings&&console.log("LI: The query response received from LiftIgniter did not have any items. This could be due to a timeout, network error, or server error. If you see this error repeatedly, contact support@liftigniter.com with full context.");return""!=n&&(A.default.fetchData.dedupQueue[n]=r),{items:i}}function d(e,t){var n={items:[]};try{n=u(A.default.fetchData.recs[e.optsKey],e.max,t)}catch(e){console.log('[ERROR] LI: Error returning deduplicated items in LiftIgniter fetch callback. Contact support@liftigniter.com with this error and also the results of $p("runDiagnostics") after running it in the console on this page',e)}var r=[];try{r=(n.items||[]).map(function(e){return e.url||""}).map(k.default.trackingTransURL)}catch(e){k.default.showLiveWarnings&&console.log("[WARN] LI: Error estimating visible items from response",e)}if(k.default.sdk){var i=0,a=0;try{window.performance&&window.performance.memory&&window.performance.memory.usedJSHeapSize&&(i=window.performance.memory.usedJSHeapSize),window.performance&&window.performance.memory&&window.performance.memory.totalJSHeapSize&&(a=window.performance.memory.totalJSHeapSize)}catch(e){k.default.showLiveWarnings&&console.log("LI: Unexpected error when running performance code",e)}A.default&&A.default.responseWidgetMap&&(A.default.responseWidgetMap[e.widget||""]=(A.default.responseWidgetMap[e.widget||""]||0)+1),A.default&&A.default.responseVisibleItemsByWidgetName&&(A.default.responseVisibleItemsByWidgetName[e.widget||""]=r),L.default.send("widget_response",{fst:e.fetchStartTime||0,fstr:e.fetchStartTimeRelative||0,pt:e.preparationTime||0,cl:e.clientLatency||0,usedJS:i,totalJS:a,w:e.widget||"",source:"LI",vi:JSON.stringify(r.slice(0,k.default.sdk.maxVizItemsToSend))})}try{k.default.customCallbackByWidget&&k.default.customCallbackByWidget[e.widget||""]?k.default.customCallbackByWidget[e.widget||""](n.items):k.default.customCallback&&k.default.customCallback(n.items)}catch(e){k.default.showLiveWarnings&&console.log("LI: Exception when checking for or executing custom callback: ",e)}e.callback(n)}function c(e){var t=C.default.getParam(e,"max","number"),n=(C.default.getParam(e,"callback","function"),C.default.getParam(e,"widget","string")),r=S.default.getWidgetData();if(t){if(r.widgets&&r.widgets[n]){var i=r.widgets[n].opts||{};e.opts=e.opts||{},e.opts=C.default.mergeMap(i,e.opts)}switch(e.itemsToRank&&(e.opts=e.opts||{},e.opts.itemsToRank=JSON.stringify(e.itemsToRank),delete e.itemsToRank),k.default.sdk.callHashType){case"widget":e.optsKey=n;break;case"both":e.optsKey=n.toString()+"_"+C.default.hashOpts(e.opts);break;case"opts":default:e.optsKey=C.default.hashOpts(e.opts||{})}A.default.fetchData.fetchQueue.push(e)}else console.log("LI: Could not register widget because the max parameter (the number of recommendations to return) was missing")}function f(e){var t=(new Date).getTime(),n=0;try{window.performance&&window.performance.now&&(n=0|window.performance.now())}catch(e){k.default.showLiveWarnings&&console.log("LI: Unexpected error when running performance code in fetch",e)}A.default.fetchCalled=!0,A.default.fetchData.finalized=!1,k.default.sdk.multiFetch&&(A.default.fetchData.dedupQueue=[]),A.default.fetchData.startTime=C.default.getTime(),A.default.fetchData.timeout=e&&e.timeout||A.default.fetchData.timeout,A.default.fetchData.fetchQueue&&A.default.fetchData.fetchQueue.length>0&&(k.default.sdk.enableBackup?q.setTimeout(y,2500):q.setTimeout(w,A.default.fetchData.timeout),k.default.sdk.retry&&q.setTimeout(p,4300));var r=S.default.getWidgetData(),i={},a={};k.default.sdk.flipQueue&&(A.default.fetchData.fetchQueue=A.default.fetchData.fetchQueue.reverse()),A.default.fetchData.fetchQueue.forEach(function(e){var o=i[e.optsKey]||v(),s=r.widgets||{},l=s[e.widget]||{},u=e.dedupGid||l.dedupGid||"0";u&&(a[u]=(a[u]||0)+(e.max||0),o.dedupGroups[u]=!0),o.max=Math.max(o.max,e.max),o.fetchInfo[e.widget]=e.max,o.opts=e.opts||{},o.dedupGid=e.dedupGid,o.fetchStartTime=t,o.fetchStartTimeRelative=n,i[e.optsKey]=o}),A.default.fetchData.calls=i,A.default.fetchData.dedupMax=a,k.default.sdk.timerBufferShown&&(A.default.buffer.shown={});for(var o in i)g(o,k.default.sdk.queryServer)}function p(){var e=A.default.fetchData.calls;for(var t in e)A.default.fetchData.finalized||A.default.fetchData.recs[t]||A.default.fetchData.retried[t]||(k.default.showLiveWarnings&&console.log("LI: Recs have not been received for one of the keys, so we are retrying ",t),g(t,k.default.sdk.backupQueryServer))}function g(e,t){var n=A.default.fetchData.calls,r=A.default.fetchData.dedupMax,i=S.default.getWidgetData();if(n.hasOwnProperty(e)){var a=n[e],o=0;for(var s in a.dedupGroups)o+=r[s];if(k.default.sdk.stabilize&&a.opts&&a.opts.itemsToRank&&R.default.sessStorage.getItem(C.default.djb2HashCode(JSON.stringify(a.opts.itemsToRank.sort())))){var l=0;try{window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(l=0|window.performance.now())}catch(e){k.default.showLiveWarnings&&console.log("LI: Unexpected error when running performance code",e)}var u=JSON.parse(R.default.sessStorage.getItem(C.default.djb2HashCode(JSON.stringify(a.opts.itemsToRank.sort()))));A.default.fetchData.finalized||(u.items?(A.default.fetchData.recs[e]=u,F(A.default.fetchData.recs)==F(n)&&(A.default.fetchData.finalized=!0,A.default.fetchData.fetchQueue.forEach(function(e){e.fetchStartTime=a.fetchStartTime,e.preparationTime=l-a.fetchStartTimeRelative;var t=0;try{window.performance&&window.performance.now&&(t=0|window.performance.now())}catch(e){k.default.showLiveWarnings&&console.log("LI: Unexpected error when running performance code",e)}e.clientLatency=t-l,i.widgets[e.widget]?d(e,e.dedupGid||i.widgets[e.widget].dedupGid||""):d(e,"0")}),A.default.fetchData.fetchQueue=[],A.default.fetchData.recs={},A.default.fetchData.dedupQueue=[])):k.default.showLiveWarnings&&console.log("LI: Response does not seem to make sense, so punting"))}else{var l=0;try{window.performance&&window.performance.now&&(l=0|window.performance.now())}catch(e){k.default.showLiveWarnings&&console.log("LI: Unexpected error when running performance code",e)}var c=Object.keys(a.fetchInfo);h({name:1===c.length?c[0]:"default-widget",max:Math.max(a.max,o),opts:C.default.mergeMap(a.opts,{fetchInfo:JSON.stringify(a.fetchInfo)}),optsKey:e,serverName:t,callback:function(e,t){A.default.fetchData.finalized||(e.items?(A.default.fetchData.recs[t.optsKey]&&k.default.showLiveWarnings&&console.log("LI: We are overwriting previously fetched recommendations. As a general rule, this should not happen."),A.default.fetchData.recs[t.optsKey]=e,F(A.default.fetchData.recs)==F(n)&&(A.default.fetchData.finalized=!0,k.default.rankFiddling&&k.default.rankFiddling(A.default.fetchData.fetchQueue),A.default.fetchData.fetchQueue.forEach(function(e){e.fetchStartTime=a.fetchStartTime,e.fetchStartTimeRelative=a.fetchStartTimeRelative,e.preparationTime=l-a.fetchStartTimeRelative;var t=0;try{window.performance&&window.performance.now&&"function"==typeof window.performance.now&&(t=0|window.performance.now())}catch(e){k.default.showLiveWarnings&&console.log("LI: Unexpected error when running performance code",e)}e.clientLatency=t-l,i.widgets[e.widget]?d(e,i.widgets[e.widget].dedupGid||""):d(e,"0")}),A.default.fetchData.fetchQueue=[],A.default.fetchData.recs={},A.default.fetchData.dedupQueue=[],k.default.sdk.stabilize&&t.opts.itemsToRank&&R.default.sessStorage.setItem(C.default.djb2HashCode(JSON.stringify(t.opts.itemsToRank.sort())),JSON.stringify(e)))):k.default.showLiveWarnings&&console.log("LI: Response does not seem to make sense, so punting"))}})}}}function m(e,t,n){k.default.showLiveWarnings&&(console.log("LI: error code: "+t),console.log("LI: error message: "+n));var r="error code: "+t+"; error message: "+n;t>=500||429==t||0==t||t==-2?(0==t&&(A.default.xhrBroken=!0),429==t&&U.default.hasCookiesEnabled()&&U.default.createCookie(k.default.botClassificationKey,"1",10,6e4),0!=t&&429!=t&&t!=-2||L.default.send("widget_request_error",{errs:r}),A.default&&A.default.errorMessagesByEventType&&(0==t||429==t?A.default.errorMessagesByEventType.widget_request_error=r:A.default.errorMessagesByEventType.widget_request_timeout=r),k.default.sdk.retry&&!A.default.fetchData.retried[e.optsKey]?(k.default.showLiveWarnings&&console.log("LI: Recs have not been received for one of the keys, so we are retrying",e.optsKey),A.default.fetchData.retried[e.optsKey]=!0,g(e.optsKey,k.default.sdk.backupQueryServer)):(A.default.fetchData.givenUp=!0,k.default.sdk.enableBackup?y():w())):(t>=400||t<0)&&(A.default&&A.default.errorMessagesByEventType&&(A.default.errorMessagesByEventType.widget_request_error=r),L.default.send("widget_request_error",{errs:r}),A.default.fetchData.retried[e.optsKey]=!0,A.default.fetchData.givenUp=!0,k.default.sdk.enableBackup?y():w())}function h(e){var t=k.default.frontPageBoost?"ModelQ":void 0,n=function(t){e.callback(t,e)},r=function(t,n){return m(e,t,n)},u=e.serverName+"/"+k.default.sdk.queryApiVersion;"v3"===k.default.sdk.queryApiVersion&&(u+="/"+(e.opts.jsk||k.default.jsKey),U.default.hasCookiesEnabled()&&C.default.notABot()&&C.default.notOptOut()&&(u+="/"+encodeURIComponent(k.default.uid))),u+="/model";var d=_.default.forCurrentExample(t);d=s(d),d=a(e,d);var c=i();d.forcedHash=isNaN(c)?null:c,d=o(d),k.default.postQuery||(u+="?"+j.default.toQueryString(d),d=null);var f=l();window&&window.location&&window.location.origin&&""!=window.location.origin&&!C.default.isBadActor(window.location.origin)&&j.default.thirdPartyFetch(u,0,n,r,f,A.default.xhrBroken,d)}function v(){return{dedupGroups:{},max:0,fetchInfo:{}}}function y(){if(!A.default.fetchData.finalized){var e=S.default.getWidgetData(),t="backup_recs_"+k.default.jsKey;q[t]=function(t){var n=Math.max(A.default.fetchData.startTime+A.default.fetchData.timeout-C.default.getTime(),0);A.default.fetchData.givenUp&&(n=Math.min(n,1e3)),k.default.showLiveWarnings&&console.log("LI: Executing backup recs code after "+(C.default.getTime()-A.default.fetchData.startTime)+" ms of fetch with remainingTime = "+n+" ms"),q.setTimeout(function(){if(!A.default.fetchData.finalized){A.default.fetchData.finalized=!0,A.default.fetchData.fetchQueue.forEach(function(n){e.widgets[n.widget]?n.callback(u(t,n.max,e.widgets[n.widget].dedupGid)):n.callback(u(t,n.max,n.dedupGid||"0"))});var n="no response";A.default&&A.default.errorMessagesByEventType&&(A.default.errorMessagesByEventType.widget_request_timeout?n=A.default.errorMessagesByEventType.widget_request_timeout||"":A.default.errorMessagesByEventType.widget_request_error&&(n=A.default.errorMessagesByEventType.widget_request_error||"")),L.default.send("timeout",{method:"backupRec",interval:A.default.fetchData.timeout,errs:n}),A.default&&A.default.errorMessagesByEventType&&(A.default.errorMessagesByEventType.timeout="Timed out after waiting for recommendations for "+A.default.fetchData.timeout+" milliseconds. Check the Network Panel for more details and check the console for any related error messages")}},n)};var n="//cdn.petametrics.com/backup_recs/"+k.default.jsKey,r=H.createElement("script");r.type="text/javascript",r.setAttribute("src",n),H.head.appendChild(r)}}function w(){if(!A.default.fetchData.finalized){A.default.fetchData.finalized=!0,A.default.fetchData.fetchQueue.forEach(function(e){e.onTimeout&&"function"==typeof e.onTimeout&&e.onTimeout()});var e="no response";A.default&&A.default.errorMessagesByEventType&&(A.default.errorMessagesByEventType.widget_request_timeout?e=A.default.errorMessagesByEventType.widget_request_timeout||"":A.default.errorMessagesByEventType.widget_request_error&&(e=A.default.errorMessagesByEventType.widget_request_error||"")),L.default.send("timeout",{method:"onTimeout",interval:A.default.fetchData.timeout,errs:e}),A.default&&A.default.errorMessagesByEventType&&(A.default.errorMessagesByEventType.timeout="Timed out after waiting for recommendations for "+A.default.fetchData.timeout+" milliseconds. Check the Network Panel for more details and check the console for any related error messages")}}Object.defineProperty(t,"__esModule",{value:!0});var b=n(3),k=r(b),T=n(9),_=r(T),I=n(24),S=r(I),x=n(4),C=r(x),E=n(8),L=r(E),O=n(7),R=r(O),M=n(26),D=(r(M),n(14)),A=r(D),N=n(6),U=r(N),W=n(25),P=(r(W),n(17)),j=r(P),B=n(12),q=(r(B),window),H=document,F=C.default.size;t.default={register:c,fetch:f,userCallback:d},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){}var n=e.query||o.default.search.defaultQuery,r=o.default.jsKey,i=e.max||o.default.search.max,a=e.off||o.default.search.off,s=e.requestFields||o.default.search.requestFields,u=o.default.search.queryServer;if(!r)return void console.log("LI: Client isn't initialized. Load the JavaScript Key");var f=u+"/v1/search?";f+=c.default.toQueryString(l.default.forCurrentExample()),f+="&q="+encodeURIComponent(n),f+="&smx="+encodeURIComponent(i),f+="&sf="+encodeURIComponent(JSON.stringify(s)),f+="&sof="+encodeURIComponent(a);for(var p in e.opts)e.opts.hasOwnProperty(p)&&(f+="object"==typeof e.opts[p]?"&"+p+"="+encodeURIComponent(JSON.stringify(e.opts[p])):"&"+p+"="+encodeURIComponent(e.opts[p]));(0,d.thirdPartyFetch)(f,0,function(t){return e.callback(t,e)},t,!1,!1)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a),s=n(9),l=r(s),u=n(4),d=(r(u),n(17)),c=r(d);window;t.default={search:i},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){if(!y){var r={response:"failure",message:"init",reason:"tunnel has already been initialized"};return void y.postMessage(r,w)}y=t,w=n,void 0!==e.config&&(I.default.serverConfig=e.config),x.default.runBacklog(),window.addEventListener("beforeunload",function(){y.postMessage({message:"unload"},w)});var i={response:"success",message:"init",identifier:e.identifier||0,location:window.location.href,scrollWidth:document.body.scrollWidth,scrollHeight:document.body.scrollHeight,clientWidth:document.body.clientWidth,clientHeight:document.body.clientHeight,offsetWidth:document.body.offsetWidth,offsetHeight:document.body.offsetHeight};y.postMessage(i,w)}function a(e){var t={message:"widgetDiagnostics",diagnostic:e};y.postMessage(t,w)}function o(e){var t=e.config;for(var n in t)t.hasOwnProperty(n)&&(I.default.serverConfig[n]=t[n]);var r={response:"success",message:"setConfig",config:I.default.serverConfig};y.postMessage(r,w)}function s(e){var t=e.operation;"refresh"==t?window.location.reload():"back"==t?window.history.back():"forward"==t&&window.history.forward()}function l(e){var t=T.default.scrapeInventory(),n={response:"success",message:"scrape",identifier:e.identifier||0,scrapedData:t};y.postMessage(n,w)}function u(e){for(var t=Object.keys(window),n={},r=0;r<t.length;r++){var i=t[r];if(i.length>1&&window[i]&&window[i]!==window&&"function"!=typeof window[i])try{JSON.stringify(window[i])&&(n[i]=window[i])}catch(e){}}var a={response:"success",message:"getWindow",window:JSON.stringify(n)};y.postMessage(a,w)}function d(e){for(var t=e.selector,n=document.querySelectorAll(t),r=[],i=0;i<n.length;i++)r.push({innerHTML:n[i].innerHTML.toString(),outerHTML:n[i].outerHTML.toString()});var a={response:"success",message:"viewElements",descriptor:e.descriptor||null,details:e.details||null,selector:e.selector||null,identifier:e.identifier||0,elements:r};y.postMessage(a,w)}function c(e){for(var t=e.anchor,n=document.querySelectorAll(t),r=[],i=0;i<n.length;i++)r.push(Object.assign({},n[i].style)),Object.keys(e.style).forEach(function(t){n[i].style[t]=e.style[t]});var a={response:"success",message:"highlight",identifier:e.identifier||0,selector:t,prevStyle:r};y.postMessage(a,w)}function f(e){var t={message:"listenEvent",identifier:b,event:"mouseOver"};b+=1,y.postMessage(t,w)}function p(e){var t={message:"listenEvent",identifier:b,event:"mouseOut"};b+=1,y.postMessage(t,w)}function g(e){e.stopPropagation(),e.preventDefault();var t={message:"listenEvent",identifier:b,selector:h(e.target),event:"onClick"};b+=1,y.postMessage(t,w)}function m(e){1==e.on?(document.body.style.cursor="pointer",document.addEventListener?(b=0,document.addEventListener("mouseover",f,!0),document.addEventListener("mouseout",p,!0),document.addEventListener("click",g,!0)):document.attachEvent&&(b=0,document.attachEvent("mouseover",f),document.attachEvent("mouseout",p),document.attachEvent("click",g))):0==e.on&&(document.body.style.cursor=null,document.removeEventListener?(document.removeEventListener("mouseover",f,!0),document.removeEventListener("mouseout",p,!0),document.removeEventListener("click",g,!0)):document.detachEvent&&(document.detachEvent("mouseover",f),document.detachEvent("mouseout",p),document.detachEvent("click",g)));var t={response:"success",message:"listen",on:e.on,source:e.source||null,identifier:e.identifier||0};y.postMessage(t,w)}function h(e,t,n){var r=!0;e:for(;r;){var i=e,a=t,o=n,s=function(e,t){return e.length-t.length},l=function(e){return document.querySelectorAll(e).length},u=function(e){return e.map(function(e){return"."+e}).join()},d=function(e){return function(t,n){return!e.includes(n)}};if(r=!1,a=a||"","undefined"==typeof o&&(o=1/0),!i||i===document.body){for(var c=a.split(" ").filter(function(e){return e.trim().length}),f=[],p=c.length-2;p>=0;p--){var g=d(f.concat([p])),m=c.filter(g).join(" "),h=l(m);h===o&&f.push(p)}return c.filter(d(f)).join(" ")}var v=i.className.split(" ").sort(s),y=i.tagName.toLowerCase(),w=i.id;if(w){var b=w.replace(/[^A-Za-z]/g,"").length,k="#"+w+" "+a,T=l(k);if(b>.8*w.length&&T<o){e=i.parent,t=k,n=T,r=!0,c=f=p=g=m=h=v=y=w=b=k=T=void 0;continue e}}for(var _=[],p=0;p<v.length;p++){var I=v[p];if(I.trim().length){var S=u(_.concat([I]))+" "+a,x=l(S);x<o&&(_.push(I),o=x)}}_.length&&(a=u(_)+" "+a);var C=_.length?y+a:y+" "+a,E=l(C);E<o&&(a=C),e=i.parentElement,t=a,n=o,r=!0,c=f=p=g=m=h=v=y=w=b=k=T=_=p=I=S=x=C=E=void 0}}function v(){var e=function(){function e(e){if(("https://staging.console.liftigniter.com"===e.origin||"https://console.liftigniter.com"===e.origin)&&"message"in e.data&&(y||"init"===e.data.message))switch(e.data.message){case"init":i(e.data,e.source,e.origin);break;case"setConfig":o(e.data);break;case"browserNavigate":s(e.data);break;case"scrape":l(e.data);break;case"getWindow":u(e.data);break;case"viewElements":d(e.data);break;case"highlight":c(e.data);break;case"listen":m(e.data)}}try{window.addEventListener("message",e,!1)}catch(e){console.error("LI: Unable to create tunnel")}if(window.parent&&window.parent!==window?y=window.parent:window.opener&&window.opener!==window&&(y=window.opener),y){var t={response:"request",message:"init"};y.postMessage(t,"*")}};document.readyState?e():window.addEventListener?window.addEventListener("load",e):window.attachEvent("onload",e)}Object.defineProperty(t,"__esModule",{value:!0});var y,w,b,k=n(28),T=r(k),_=n(3),I=r(_),S=n(2),x=r(S);t.default={startTunnel:v,sendWidgetDiagnostic:a},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return y.default.waitOnSelect(e.newWidget.selector,E,L).then(function(n){null!==n?S.default.addHTML(n,e.newWidget.insertionType,e.newWidget.template):t.widgetInfo(e.name,{status:"not rendered",reason:"Widget selector was not found"})})}function a(e,t,n,r){return"disabled"==e.view?(n.widgetInfo(r,{status:"not rendered",reason:"This widget is currently set as disabled"}),!0):"disabled"==t&&(n.widgetInfo(r,{status:"not rendered",reason:"The widget is disabled because li-view-mode=disabled in the URL"}),!0)}function o(e,t,n){var r=window.location.href;return e.includeRegex&&null===r.match(e.includeRegex)?(t.widgetInfo(n,{status:"not rendered",reason:"The url did not match the widget include regex"}),!1):e.excludeRegex&&null!==r.match(e.excludeRegex)?(t.widgetInfo(n,{status:"not rendered",reason:"The url matched the widget exclude regex"}),!1):"16s1gj3d58jpmh1n"===g.default.jsKey||!e.requiredSelector||null!==document.querySelector(e.requiredSelector)||(t.widgetInfo(n,{status:"not rendered",reason:"The page is missing the required selector: "+e.requiredSelector}),!1)}function s(e,t,n,r,a){void 0!==r.css&&S.default.addCss(r.css);var o=r.newWidget,s=null;s=o?i(r,a):y.default.nullPromise();var l=g.default.sdk.widgetHasVaryingLength?1:r.maxCount,u=s.then(function(){return y.default.waitOnSelectAll(n.selector,E,L,l)});u.then(function(i){if(null!==i&&i.length>0){for(var o="true"===r.params.outer,s=0;s<i.length&&s<e.items.length;s++){var l=g.default.sdk.autoRenderItemTransform(e.items[s]),u=f.default.render(r.itemTemplate,l),d=i[s];if(o){var c=document.createElement("div");c.innerHTML=u,d.parentNode.replaceChild(c.firstChild,d)}else d.innerHTML=u}o&&(i=document.querySelectorAll(n.selector)),i.length>e.items.length&&a.addWarning(r.name,"There were fewer items recommended than slots available"),h.default.track({elements:i,name:r.name,source:"LI",slot:t.id+":"+n.id})}else a.widgetInfo(r.name,{status:"not rendered",reason:"No item selectors were found"});void 0!==r.script&&S.default.addScript(r.script),a.sendDiagnostic(r.name);var p=t.id,m=n.id,v={pageGroupId:p,slotId:m};C.default.widgetRenderedCallback(v,r.name)})}function l(e,t,n,r,i){for(var a=h.default.abSlice(),o=void 0,l=0,u=0;l<t.slices.length&&(o=t.slices[l],u+=o.probability,!(a<u));l++);var d=n[o.widgetName];if(o.widgetName!=R){var c=document.querySelectorAll(t.selector).length,f=g.default.sdk.widgetHasVaryingLength&&c>0?c:d.maxCount;h.default.register({max:f,widget:o.widgetName,opts:b.default.fetchDynamicParams(d.params),callback:function(n){return s(n,e,t,d,r)}})}else if(d=n[i],r.widgetInfo(i,{status:"not rendered",reason:"The A/B testing slice is falling on the base slice"}),r.sendDiagnostic(i),void 0===d.newWidget){var p=y.default.waitOnSelectAll(t.selector,E,L,d.maxCount);p.then(function(n){h.default.track({elements:n,name:i,source:R,slot:e.id+":"+t.id});var r=e.id,a=t.id,o={pageGroupId:r,slotId:a};C.default.widgetRenderedCallback(o,R)})}}function u(e){E="3bkm8lr3qfeh0btf"==g.default.jsKey?200:50,L="3bkm8lr3qfeh0btf"==g.default.jsKey?4e7:40,L="h80lrcblq0nieeg1"==g.default.jsKey?4e7:40,L="16s1gj3d58jpmh1n"==g.default.jsKey?4e7:40;var t=y.default.getURLParameter("li-view-mode"),n=!1,r=void 0,i=void 0,s=g.default.serverConfig.exportable;if(r=s.pageGroups,i=s.widgets,i&&!r){var u=d(i);r=u.pageGroups,i=u.widgets}if(r&&i){for(var c="console"==t,f=new _.RenderDiagnostics(c),p={},m=0;m<i.length;m++)p[i[m].name]=i[m];for(var m=0;m<r.length;m++){var v=r[m];if(null==e||e.pageGroupId==v.id)e:for(var w=0;w<v.slots.length;w++){var b=v.slots[w];if(null==e||e.slotId==b.id){for(var k=null,I=null,S=0;S<b.slices.length;S++){var x=b.slices[S],M=x.widgetName,D=x.probability;M!=R&&(null==I||D>I)&&(k=b.slices[S].widgetName,I=b.slices[S].probability);var A=p[M];if(null==A&&M!=R){f.addWidget(M),f.addWarning(M,"Widget code could not be found"),f.sendDiagnostic(M);continue e}}if(null!=k)if(null==e&&b.trigger&&O.indexOf(b.trigger.name)!=-1){var N=v.id,U=b.id,W={pageGroupId:N,slotId:U},P={type:"renderWidgets",pageGroupAndSlot:W,trigger:b.trigger};C.default.registerEvent(P)}else a(b,t,f,k)||!o(v,f,k)?(f.addWidget(k),f.sendDiagnostic(k)):"live"==b.view||"console"==t?(n=!0,l(v,b,p,f,k)):"preview"==b.view&&"preview"==t&&(n=!0,l(v,b,p,f,k))}}}g.default.serverConfig.exportable.shouldFetch===!1&&(n=!1),n&&(T.default.allowRegister=!1,h.default.fetch())}}function d(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r],a=i.name,o=i.params,s=i.css,l=i.itemTemplate,u=i.script,d=i.maxCount,c=i.newWidget,f={name:a,params:o,css:s,itemTemplate:l,script:u,maxCount:d,newWidget:c};n.push(f);
var p=void 0,g=i.name,m=i.uuid,h=i.view,v=i.selector,y=i.trigger,w=i.testFraction,b=[{probability:w,widgetName:i.name},{probability:100-w,widgetName:R}],k=m,T={id:k,name:g,view:h,selector:v,trigger:y,slices:b};p=[T];var m=i.uuid,_=i.name,I=i.includeRegex,S=i.excludeRegex,x=i.requiredSelector,k=m,C={id:k,name:_,includeRegex:I,excludeRegex:S,requiredSelector:x,slots:p};t.push(C)}return{pageGroups:t,widgets:n}}Object.defineProperty(t,"__esModule",{value:!0});var c=n(30),f=r(c),p=n(3),g=r(p),m=n(29),h=r(m),v=n(4),y=r(v),w=n(11),b=r(w),k=n(14),T=r(k),_=n(35),I=n(36),S=r(I),x=n(37),C=r(x),E=50,L=40,O=["click","visible"],R="base";t.default={serveWidgets:u},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(33),s=r(o),l=function(){function e(t){i(this,e),this.useDiagnostics=t,this.diagnostics={widgets:{}}}return a(e,[{key:"addWidget",value:function(e){this.useDiagnostics&&(this.diagnostics.widgets[e]={status:"success",name:e,warnings:[]})}},{key:"widgetInfo",value:function(e,t){var n=this;this.useDiagnostics&&Object.keys(t).forEach(function(r){n.diagnostics.widgets[e][r]=t[r]})}},{key:"addWarning",value:function(e,t){this.useDiagnostics&&this.diagnostics.widgets[e].warnings.push(t)}},{key:"sendDiagnostic",value:function(e){this.useDiagnostics&&s.default.sendWidgetDiagnostic(this.diagnostics.widgets[e])}}]),e}();t.RenderDiagnostics=l},function(e,t){"use strict";function n(e){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}function r(e){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("script");n.innerHTML=e,t.appendChild(n)}function i(e,t,n){"replace"==t?e.innerHTML=n:e.insertAdjacentHTML(t,n)}function a(e,t,a){void 0!==e&&n(e),void 0!==t&&i(t),void 0!==a&&r(a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default={addCss:n,addScript:r,addHTML:i,addAll:a},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=window.location.href;return(!e.includeRegex||null!==t.match(e.includeRegex))&&((!e.excludeRegex||null===t.match(e.excludeRegex))&&(!e.requiredSelector||null!==document.querySelector(e.requiredSelector)))}function a(e,t){var n=function n(){var r=document.querySelector(e.selector);r&&I.default.isElementVisible(r)&&(document.removeEventListener("DOMContentLoaded",n,!0),document.removeEventListener("load",n,!0),document.removeEventListener("resize",n,!0),document.removeEventListener("scroll",n,!0),t())};document.addEventListener("DOMContentLoaded",n,!0),document.addEventListener("load",n,!0),document.addEventListener("resize",n,!0),document.addEventListener("scroll",n,!0)}function o(e,t){setTimeout(t,1e3*e.seconds)}function s(e,t){var n=function n(r){M.call(r.target,e.selector)&&(e.fireOnce&&document.removeEventListener(e.name,n,!0),t(r))};document.addEventListener(e.name,n,!0)}function l(e,t){D.push({pageGroupAndSlot:e.pageGroupAndSlot,fireOnce:e.fireOnce,fired:!1,slice:e.slice,callback:t})}function u(e,t){"visible"==e.name?a(e,t):"click"==e.name?s(e,t):"mouseover"==e.name?s(e,t):"wait"==e.name?o(e,t):"rendered"==e.name?l(e,t):"pageload"==e.name&&t()}function d(e){return function(t){b.default.sendRobust(e.type,x.default.fetchDynamicParams(e))}}function c(e){return function(){var t=L.default.getURLParameter("li-view-mode");"disabled"==e.view||"disabled"==t||"live"==e.view||"console"==t||"preview"==e.view&&"preview"==t}}function f(e){return function(){R.default.serveWidgets(e.pageGroupAndSlot)}}function p(e){return function(){T.default.track({elements:e.selector,name:e.widgetName,source:e.source})}}function g(e){if(e.collectEvent!==!1&&i(e)){var t=e.trigger;switch(e.type){case"activity":u(t,d(e.fields));break;case"modifyPage":u(t,c(e));break;case"renderWidgets":u(t,f(e));break;case"track":u(t,p(e))}}}function m(){var e=y.default.serverConfig.exportable.events;if(e)for(var t=0;t<e.length;t++)g(e[t])}function h(e,t){for(var n=0;n<D.length;n++){var r=D[n],i="all"==r.slice||r.slice==t;e.pageGroupId==r.pageGroupAndSlot.pageGroupId&&e.slotId==r.pageGroupAndSlot.slotId&&i&&(r.fireOnce===!0&&r.fired||(r.callback(),r.fired=!0))}}Object.defineProperty(t,"__esModule",{value:!0});var v=n(3),y=r(v),w=n(8),b=r(w),k=n(29),T=r(k),_=n(27),I=r(_),S=n(11),x=r(S),C=n(36),E=(r(C),n(4)),L=r(E),O=n(34),R=r(O),M=Element.prototype.matches||Element.prototype.msMatchesSelector,D=[];t.default={registerEvent:g,addCustomEvents:m,widgetRenderedCallback:h},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return"console"==l.default.getUrlParameter(document.referrer,"li-view-mode")}function a(){return"li-child"==window.name||"li-child-nf"==window.name}function o(){var e=l.default.updateUrlParameter(window.location.href,"li-view-mode","console");history.replaceState(history.state,document.title,e),window.name="li-child"}Object.defineProperty(t,"__esModule",{value:!0});var s=n(9),l=r(s);t.default={isConsoleReferrer:i,isConsoleChild:a,setStateToConsoleMode:o},e.exports=t.default}]);
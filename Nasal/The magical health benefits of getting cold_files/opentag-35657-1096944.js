/*
 * Opentag, a tag deployment platform
 * Copyright 2011-2016, Qubit Group
 * http://opentag.qubitproducts.com
 */
(function(){var u=function(){return this}();u.qubit=u.qubit||{};u.qubit.SYSTEM_DEFAULTS={pingServerUrl:"opentag-stats.qubit.com/ping",tellLoadTimesProbability:1}})();(function(){var u={"id":"35657"};try{var a=function(){return this}();if(!a.qubit)a.qubit={};var t=a.qubit;if(!t.cs)t.cs={};t.CLIENT_CONFIG=u;var K=u.id||"efault";K="d"+K;if(!t.cs[K])t.cs[K]={};t.cs[K].ClientConfig=u;if(t.SYSTEM_DEFAULTS)t.cs[K].SystemDefaults=t.SYSTEM_DEFAULTS}catch(D){}})();
(function(){(function(){function u(){return ea.uv}function a(){var g=u();if(!g||!g.emit)return false;if(!Z){Z=true;for(var b=0;b<W.length;b++){var y=W[b];if(y.on)g.on.apply(g,y.on);else if(y.emit)g.emit.apply(g,y.emit)}g.on(/.*/,function(r){var z=r.meta.type;var f=S[z];if(!f)S[z]={current:r,history:[r]};else{f.current=r;f.history.push(r)}}).replay();Y=true}return true}(function(){if(!Function.prototype.bind)Function.prototype.bind=function(g){if(typeof this!=="function")throw new TypeError("Function.prototype.bind - what is trying "+
"to be bound is not callable");var b=Array.prototype.slice.call(arguments,1);var y=this;var r=function(){};var z=function(){return y.apply(this instanceof r?this:g,b.concat(Array.prototype.slice.call(arguments)))};r.prototype=this.prototype;z.prototype=new r;return z}})();var t={__anonymous__:true};var K=null;try{K=(false||eval)("this")}catch(g){}if(!K)try{var D=function(){return this};K=D()}catch(g){}t=K;var p=t.qubit||{};if(!t.qubit)t.qubit=p;var H="3.3.0";if(p.VERSION&&p.VERSION!==H)try{console.warn("There is already 'qubit.VERSION' set to: "+
p.VERSION)}catch(g){}p.VERSION=H;try{if(typeof module==="object")module.exports=t}catch(g){}var M=function(){};var Q;(function(){function g(){}function b(z,f,q,d,w){var x=z.split(".");var A=g.NAMESPACE_BASE||t;var G=null;var h=null;var B;if(w)A=K;var E=A;A=q||A;for(B=0;B<x.length-1;B+=1){G=A;h=x[B];A[h]=A[h]||{};A=A[h]}G=A;h=x[x.length-1];if(K.TAGSDK_NS_OVERRIDE)d=false;if(K.TAGSDK_NS_FORCED_OVERRIDE_OPTION!==undefined)d=!K.TAGSDK_NS_FORCED_OVERRIDE_OPTION;if(f!==undefined){if(G[h]===undefined||!d)G[h]=
f}else G[h]=G[h]||{};if(f){f.CLASSPATH=x.join(".");x.splice(x.length-1,1);f.PACKAGE_NAME=x.join(".")}return{root:E,object:G,instance:G[h]}}g.global=function(){return K};g.STANDARD_CS_NS="qubit.cs";g.clientSpaceClasspath=function(){if(window.qubit.CLIENT_CONFIG)return"qubit.cs.d"+window.qubit.CLIENT_CONFIG.id;return g.STANDARD_CS_NS};g.globalNamespace=function(z,f,q,d){return b(z,f,q,d,true)};g.namespace=function(z,f,q,d){return b(z,f,q,d,false)};g.clientNamespace=function(z,f,q,d){return g.namespace(g.clientSpaceClasspath()+
"."+z,f,q,d)};g.clazz=function(z,f,q,d,w){g.namespace(z,f,d,true);if(typeof q==="function"){f.SUPER=q;f.superclass=q;f.prototype=new q(w);f.prototype.SUPER=q;f.prototype.CLASS=f}var x=z.split(".");if(f.prototype){f.prototype.CLASSPATH=x.join(".");f.prototype.CLASS_NAME=x[x.length-1];x.splice(x.length-1,1);f.prototype.PACKAGE_NAME=x.join(".")}else{f.CLASSPATH=x.join(".");f.STATIC_NAME=x[x.length-1];x.splice(x.length-1,1);f.PACKAGE_NAME=x.join(".")}return f};g.clazz("qubit.Define",g);g.clientClazz=
function(z,f,q,d,w){return g.clazz(g.clientSpaceClasspath()+"."+z,f,q,d,w)};g.STANDARD_VS_NS="qubit.vs";g.vendorsSpaceClasspath=function(z){var f=p.VENDOR_SPACE_CP;var q=f===undefined||f===null?g.STANDARD_VS_NS:f;if(z)if(q)return q+"."+z;else return z;return q};var y=g.vendorsSpaceClasspath();var r;if(y)r=g.namespace(y,{},null,true).instance;else r=g.global();g.getVendorSpace=function(){return r};g.vendorNamespace=function(z,f,q,d){z=g.vendorsSpaceClasspath(z);return g.namespace(z,f,q,d)};g.vendorClazz=
function(z,f,q,d,w){z=g.vendorsSpaceClasspath(z);return g.clazz(z,f,q,d,w)}})();(function(){function g(z){}var b="abcdefghijklmnopqrstuvwxyz"+"0123456789"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"*!-#$\x26+()@"+"'%./:\x3c\x3e?["+'"]^_`{|}~'+"\\"+";\x3d";var y={};for(var r=0;r<b.length;r++)y[b.charAt(r)]=r;p.Define.clazz("qubit.Cookie",g);g.cookieAlphabet=b;g.cookieAlphabetMap=y;g.decode=function(z){return unescape(z)};g.encode=function(z){return escape(z)};g.set=function(z,f,q,d,w){var x;if(q){var A=new Date;
A.setTime(A.getTime()+q*24*60*60*1E3);x="; expires\x3d"+A.toGMTString()}else x="";if(!w){z=g.encode(z);f=g.encode(f)}var G=z+"\x3d"+f+x+"; path\x3d/;";if(d)G+=" domain\x3d"+d;document.cookie=G};g.get=function(z,f){var q=z+"\x3d";var d=document.cookie.split(";");for(var w=0;w<d.length;w++){for(var x=d[w];x.charAt(0)===" ";)x=x.substring(1,x.length);if(x.indexOf(q)===0){var A=x.substring(q.length,x.length);if(!f)A=g.decode(A);return A}}return null};g.getAllForName=function(z,f){if(!z)return[];var q=
z+"\x3d";var d=document.cookie.split(";");var w=[];for(var x=0;x<d.length;x++){for(var A=d[x];A.charAt(0)===" ";)A=A.substring(1,A.length);if(A.indexOf(q)===0){var G=A.substring(q.length,A.length);if(f)G=g.decode(G);w.push(G)}}return w};g.getAll=function(z){var f=document.cookie.split(";");var q=[];for(var d=0;d<f.length;d++){for(var w=f[d];w.charAt(0)===" ";)w=w.substring(1,w.length);var x=w.substring(0,w.indexOf("\x3d"));var A=w.substring(x.length+1,w.length);if(z)A=g.decode(A);q.push([x,A])}return q};
g.rm=function(z,f){g.set(z,"",-1,f)}})();(function(){function g(h,B,E){this.collectLogs=!!g.isCollecting();this.collectLocally=E;this.collection=[];this.getPrefix=function(){var F="";if(B){if(typeof B==="function")F=B(this.ref);else if(B.CLASS_NAME)F=B.CLASS_NAME;else if(B.constructor&&B.constructor.name)F=B.constructor.name;if(F)F+=" -\x3e "}return(h||"")+F}}function b(h,B,E,F,m,l,v,e){var c;var k=z>=e;if(g.getCollectLevel()>=0||k){if(m)c=[F,v,E];else c=[B+h.getPrefix()+F,l,E];c[3]=e;h.collect(c,
e);if(k)h.printMessage.apply(h,c)}}var y=p.Define;var r=null;y.clazz("qubit.opentag.Log",g);g.LEVEL_FINEST=4;g.LEVEL_FINE=3;g.LEVEL_INFO=2;g.LEVEL_WARN=1;g.LEVEL_ERROR=0;g.LEVEL_NONE=-1;g.MAX_LOG_LEN=1E4;g.prototype.MAX_LOG_LEN=-1;var z=g.LEVEL_NONE;var f=g.LEVEL_NONE;var q=true;g.setLevelFromCookie=function(){var h=p.Cookie.get("qubit.opentag.Log.LEVEL");if(h){h=+h;if(!isNaN(h))if(h>0){var B=g.LEVEL_FINE;g.setCollectLevel(h>B?h:B);g.setLevel(+h)}}};g.setCollecting=function(h){q=!!h};g.isCollecting=
function(){return q||g.COLLECT};g.setLevel=function(h){z=+h};g.setCollectAndLevel=function(h){g.setLevel(h);g.setCollectLevel(h)};g.getLevel=function(){return z};g.setCollectLevel=function(h){f=+h};g.getCollectLevel=function(){return f};var d=[];g.logsCollection=d;g.rePrintAll=function(h,B,E,F){var m=z;if(h!==undefined)z=h;try{if(g.isCollecting()){try{if(!E)r.clear()}catch(c){}var l=F||g.logsCollection;var v=0;for(var e=0;e<l.length;e++)(function(c){var k=l[c];var n=k[3];if(n!==undefined&&z>=n){v++;
if(!B)g.print.apply(g,k);else p.opentag.Timed.setTimeout(function(){if(h!==undefined)z=h;try{g.print.apply(g,k)}finally{z=m}},v*B)}})(e)}}catch(c){}finally{z=m}};var w=y.global();var x=!!(w.webkitMediaStream||w.webkitURL||w.mozContact);g.isStyleSupported=function(){return x};var A={};g.setConsole=function(h){r=h||A;return r};g.delayPrint=-1;var G=(new Date).valueOf();g.prototype.printMessage=function(h,B,E,F){if(g.delayPrint>0){var m=g.delayPrint;var l=G-(new Date).valueOf();if(l>0)m+=l;try{p.opentag.Timed.setTimeout(function(){this.print(h,
B,E,F)}.bind(this),m)}catch(v){setTimeout(function(){this.print(h,B,E,F)}.bind(this),m)}G=(new Date).valueOf()+m}else this.print(h,B,E,F)};g.prototype.print=function(h,B,E,F){g.print(h,B,E,F)};g.print=function(h,B,E,F){if(F!==undefined&&z<F)return;try{if(r&&r.log)if(B&&g.isStyleSupported())if(E&&r[E])r[E]("%c"+h,B);else r.log("%c"+h,B);else if(E&&r[E])r[E](h);else r.log(h)}catch(m){}};g.prototype.collect=function(h,B){if(B===undefined)B=g.getCollectLevel();var E=false;var F=this.collectLogs&&g.isCollecting()&&
g.getCollectLevel()>=+B;if(F){d.push(h);E=true}if(this.collectLocally&&F){this.collection.push(h);E=true}if(g.MAX_LOG_LEN>0)if(d.length>g.MAX_LOG_LEN)d.splice(0,d.length-g.MAX_LOG_LEN);if(g.MAX_LOG_LEN>0||this.MAX_LOG_LEN>0){var m=g.MAX_LOG_LEN;if(this.MAX_LOG_LEN>0)m=this.MAX_LOG_LEN;if(this.collection.length>m)this.collection.splice(0,this.collection.length-m)}return E?h:null};g.clearAllLogs=function(){try{r.clear()}catch(h){}finally{d.splice(0,d.length)}};g.getCollectedByLevel=function(h,B){B=
B||d;var E=[];for(var F=0;F<B.length;F++){var m=B[F];var l=m[0];var v=l[4];if(v===h)E.push(m)}return E};g.prototype.rePrint=function(h,B,E){g.rePrintAll(h,B,!E,this.collection)};g.prototype.FINEST=function(h,B){b(this,"FINEST: ",false,h,B,"color:#CCCCCC;",false,g.LEVEL_FINEST)};g.prototype.FINE=function(h,B){b(this,"FINE: ",false,h,B,"color:#999999;",false,g.LEVEL_FINE)};g.prototype.INFO=function(h,B,E){b(this,"INFO: ","info",h,B,E,E,g.LEVEL_INFO)};g.prototype.WARN=function(h,B){b(this,"WARN: ","warn",
h,B,"color:#26A110;",false,g.LEVEL_WARN)};g.prototype.ERROR=function(h,B){b(this,"ERROR: ","error",h,B,"color:red;",false,g.LEVEL_ERROR)};g.setConsole(y.global().console);g.setLevelFromCookie()})();(function(){function g(c){return w.addToArrayIfNotExist(w.ANON_VARS,c)}function b(c){return c.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function y(c,k){var n=A.length;for(var C=0;C<n;C++)if(c===A[C][0])return A[C][1];A[A.length]=[c,k];return false}function r(c,k,n,C,I){var N=false;var O=false;var P=
false;var R=false;var T=false;var ba=false;var V=false;if(k){T=!!k.all;N=T||k.nodes;R=T||k.win;O=T;V=!!k.emptyForMaxDeep;P=k.noFunctions&&!T;if(k.noOwn!==undefined)O=!!k.noOwn;if(k.noFunctions!==undefined)P=!!k.noFunctions;if(k.win!==undefined)R=!!k.win;if(k.nodes!==undefined)N=!!k.nodes;ba=!!k.copyReference}if(n!==undefined&&!n){if(V)return;return c}else if(n!==undefined)n--;if(!c||!(c instanceof Object))return c;if(!N){try{if(c instanceof Node)return c}catch(ia){if(c instanceof ActiveXObject&&c.nodeType!==
undefined)return c}if(c===document)return c}if(!R)if(c===x)return c;var U=c instanceof Array?[]:{};if(c instanceof Date)U=new Date(c);if(!P&&c instanceof Function){var da=String(c).replace(/\s+/g,"");if(da.indexOf("{[nativecode]}")+14===da.length)U=function(){return c.apply(I||this,arguments)};else U=function(){return c.apply(this,arguments)}}if(C===undefined){A=[];C=0}var fa=y(c,U);if(fa)return fa;var X;if(U instanceof Array)for(X=0;X<c.length;X++)if(c[X]===c[X])U[U.length]=r(c[X],k,n,C+1,c);else U[U.length]=
c[X];else{X=0;for(var aa in c){if(O||c.hasOwnProperty(aa))if(c[aa]===c[aa])U[aa]=r(c[aa],k,n,C+1,c);else U[aa]=c[aa];X++}}if(k.proto)U.prototype=r(c.prototype,k,n,C+1,c);if(ba)U.___copy_ref=c;return U}function z(c,k){for(var n=0;n<k&&n<G.length;n++)if(c===G[n])return true;return false}function f(c,k,n,C,I,N,O,P){n=n||{};if(n.hasOwn===undefined)n.hasOwn=true;if(n.objectsOnly&&!(c instanceof Object))return;if(P!==undefined&&!P)return;else if(P!==undefined)P--;if(!n||!n.nodes)try{if(c instanceof Node)return}catch(da){if(c instanceof
ActiveXObject&&c.nodeType!==undefined)return}if(c===x)return;if(C===undefined){G=[];C=0}if(z(c,C))return;G[C]=c;I=I||c;if(I&&N&&I[N]!==I[N])return;var R=k(c,I,N,O);if(R)return;var T=0;var ba="";for(var V in c){if(!n.hasOwn||c.hasOwnProperty(V))try{var U=c[V];if(n.track)ba=O?O+"."+V:V;f(U,k,n,C+1,I,V,ba,P)}catch(da){}T++}}var q=p.Define;var d=p.Cookie;var w=function(){};var x=q.global();q.clazz("qubit.opentag.Utils",w);w.global=q.global;w.namespace=q.namespace;w.clazz=q.clazz;w.getObjectUsingPath=
function(c,k){k=k||x;var n=c.split(".");for(var C=0;C<n.length;C++)if(k&&n[C])k=k[n[C]];return k};w.getParentObject=function(c){var k=c.lastIndexOf(".");var n=c.substring(0,k);return w.getObjectUsingPath(n)};w.variableExists=function(c){return c!==undefined&&c!==null};w.ANON_VARS=[];w.getAnonymousAcessor=function(c){var k=w.indexInArray(c,w.ANON_VARS);if(k===-1)k=g(c);return"qubit.opentag.Utils.ANON_VARS["+k+"]"};w.replaceAll=function(c,k,n){return c.replace(new RegExp(b(k),"g"),n)};w.secureText=
function(c){if(typeof c!=="string")c+="";c=c.replace(/</g,"\x26lt;");c=c.replace(/>/g,"\x26gt;");return c};w.getUrl=function(){return document.location.href};w.getQueryParam=function(c){var k;var n;var C;var I;var N;var O;var P;I=w.getUrl();if(I.indexOf("?")>0){O=I.substring(I.indexOf("?")+1).split("\x26");for(k=0,n=O.length;k<n;k+=1){N=O[k];if(N.indexOf("\x3d")>0){P=N.split("\x3d");if(P.length===2&&P[0]===c)return P[1]}}}return null};w.getElementValue=function(c){var k=document.getElementById(c);
if(k)return k.textContent||k.innerText;return null};var A=[];w.objectCopy=function(c,k){k=k||{};var n=r(c,k,k.maxDeep);A=[];return n};var G=[];w.traverse=function(c,k,n){var C;f(c,k,n,C,C,C,C,n.maxDeep)};w.prepareQuotedString=function(c){if(typeof c==="string")return'"'+c.replace(/\"/g,'\\"')+'"';else return c};w.expressionToFunction=function(c,k){k=k||"";var n="function ("+k+") {"+c+"}";return w.gevalAndReturn(n).result};w.defineWrappedClass=function(c,k,n,C,I){var N=function(){if(I)return I.apply(this,
arguments);else return k.apply(this,arguments)};q.clazz(c,N,k,C);for(var O in n)if(n.hasOwnProperty(O)&&O!=="CONSTRUCTOR")N.prototype[O]=n[O];return N};w.copyAandAddFromB=function(c,k,n){n=n||8;var C=this.objectCopy(c,{maxDeep:n});for(var I in k)if(k.hasOwnProperty(I))C[I]=k[I];return C};w.keys=function(c){if(c instanceof Object){if(Object.keys)return Object.keys(c);var k=[];for(var n in c)if(c.hasOwnProperty(n))k[k.length]=n;return k}else throw"keys() called on non-object!";};w.getSrcElement=function(c){var k;
c=c||window.event;if(c.srcElement)k=c.srcElement;else if(c.target)k=c.target;return k};w.addToArrayIfNotExist=function(c,k,n){var C=0;for(var I=false;C<c.length;C+=1){var N=n&&n(c[C],k);if(N||c[C]===k){I=true;break}}if(!I){c[c.length]=k;C=-1}return C};w.indexInArray=function(c,k){for(var n=0;n<c.length;n++)if(c[n]===k)return n;return-1};w.existsInArray=function(c,k){for(var n=0;n<c.length;n++)if(c[n]===k)return true;return false};w.removeFromArray=function(c,k){var n=0;for(var C=0;n<c.length;)if(c[n]===
k){c.splice(n,1);C++}else n++;return C};w.addClass=function(c,k){var n;try{c.classList.add(k)}catch(C){if(c.className===null){c.className=k;return}n=c.className.split(" ");w.addToArrayIfNotExist(n,k);c.className=n.join(" ")}};w.removeClass=function(c,k){var n;try{c.classList.remove(k)}catch(C){if(c.className===null){c.className="";return}n=c.className.split(" ");w.removeFromArray(n,k);c.className=n.join(" ")}};var h="try{this.qubitopentagutilsgevalandreturn__var_test__\x3d(";var B=");}catch(ex){"+
"this.qubitopentagutilsgevalandreturn__var_test__error \x3d ex;}";w.gevalAndReturn=function(c){var k=K;k.qubitopentagutilsgevalandreturn__var_test__=undefined;k.qubitopentagutilsgevalandreturn__var_test__error=undefined;c=h+c+B;w.geval(c);var n=k.qubitopentagutilsgevalandreturn__var_test__;var C=k.qubitopentagutilsgevalandreturn__var_test__error;try{k.qubitopentagutilsgevalandreturn__var_test__=Q;k.qubitopentagutilsgevalandreturn__var_test__error=Q;delete k.qubitopentagutilsgevalandreturn__var_test__;
delete k.qubitopentagutilsgevalandreturn__var_test__error}catch(I){}return{result:n,error:C}};w.trim=function(c){try{return String(c).trim()}catch(k){return String(c).replace(/^\s+|\s+$/g,"")}};w.setIfUnset=function(c,k){if(c&&k)for(var n in k)if(k.hasOwnProperty(n)&&!c.hasOwnProperty(n))c[n]=k[n]};var E=Math.floor(Math.random()*1E12);w.UUID=function(){if(!x.__qubit_uuid_cnt_43567bdfhgtb4vt5yeh978__)x.__qubit_uuid_cnt_43567bdfhgtb4vt5yeh978__=(new Date).valueOf();return E+"."+ ++x.__qubit_uuid_cnt_43567bdfhgtb4vt5yeh978__};
w.overrideFromLeftToRight=function(c,k){if(c&&k)for(var n in k)if(k.hasOwnProperty(n))c[n]=k[n];return c};w.geval=function(c){if(window&&window.execScript)return window.execScript(c===""?" ":c);else return function(){return x["eval"].call(x,c)}()};var F=[];w.bodyAvailable=function(c){var k=!!document.body;if(k){if(F){for(var n=0;n<F.length;n++)try{F[n]()}catch(C){}F=false}c()}else F.push(c)};w.rmCookiesMatching=function(c){var k=d.getAll();for(var n=0;n<k.length;n++){var C=k[n][0];if(C.match(c)===
0)d.rm(C)}};var m=[];var l=false;var v=false;w.bodyReady=function(c){if(v){if(c)c();return true}l=l||!!(document.body&&document.readyState==="complete");if(l){v=true;for(var k=0;k<m.length;k++)try{m[k]()}catch(n){}if(c)c()}else if(c)m.push(c);return l};var e=x.onload;x.onload=function(c){try{w.bodyReady()}catch(n){try{window.qubit.opentag.Utils.bodyReady()}catch(C){}}var k=false;try{k=e}catch(n){}if(k)k(c)};(function(){var c;var k=false;var n=1;var C;var I;var N;var O;I=function(R){var T;if(R===true)n-=
1;if(!n||R!==true&&!k){if(!document.body)return setTimeout(I,1);k=true;if(R!==true){n-=1;if(n>0)return}for(;C.length>0;){T=C.shift();T()}}};O=function(){if(k)return;try{document.documentElement.doScroll("left")}catch(R){setTimeout(O,1);return}I()};N=function(){if(C)return;C=[];if(document.readyState==="complete")return setTimeout(I,1);if(document.addEventListener){document.addEventListener("DOMContentLoaded",c,false);window.addEventListener("load",I,false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",
c);window.attachEvent("onload",I);var R=false;try{R=window.frameElement===null||window.frameElement===undefined}catch(T){}if(document.documentElement.doScroll&&R)O()}};var P=function(R){N();if(k)setTimeout(R,1);else C.push(R)};if(document.addEventListener)c=function(){document.removeEventListener("DOMContentLoaded",c,false);I()};else if(document.attachEvent)c=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",c);I()}};P(function(){l=true;w.bodyReady()})})()})();
var J={};(function(){function g(A){return A<10?"0"+A:A}function b(A){f.lastIndex=0;return f.test(A)?'"'+A.replace(f,function(G){var h=w[G];return typeof h==="string"?h:"\\u"+("0000"+G.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+A+'"'}function y(A){return isFinite(A.valueOf())?A.getUTCFullYear()+"-"+g(A.getUTCMonth()+1)+"-"+g(A.getUTCDate())+"T"+g(A.getUTCHours())+":"+g(A.getUTCMinutes())+":"+g(A.getUTCSeconds())+"Z":null}function r(A,G){var h;var B;var E;var F;var m=q;var l;var v=G[A];if(v instanceof
Date)v=y(v);else if(v instanceof String||v instanceof Number||v instanceof Boolean)v=v.valueOf();if(typeof x==="function")v=x.call(G,A,v);switch(typeof v){case "string":return b(v);case "number":return isFinite(v)?String(v):"null";case "boolean":case "null":return String(v);case "object":if(!v)return"null";q+=d;l=[];if(Object.prototype.toString.apply(v)==="[object Array]"){F=v.length;for(h=0;h<F;h+=1)try{l[h]=r(h,v)||"null"}catch(e){l[h]='{"stack_exceeded": null}'}E=l.length===0?"[]":q?"[\n"+q+l.join(",\n"+
q)+"\n"+m+"]":"["+l.join(",")+"]";q=m;return E}if(x&&typeof x==="object"){F=x.length;for(h=0;h<F;h+=1)if(typeof x[h]==="string"){B=x[h];try{E=r(B,v)}catch(e){E='{"stack_exceeded": null}'}if(E)l.push(b(B)+(q?": ":":")+E)}}else for(B in v)if(Object.prototype.hasOwnProperty.call(v,B)){try{E=r(B,v)}catch(e){E='{"stack_exceeded": null}'}if(E)l.push(b(B)+(q?": ":":")+E)}E=l.length===0?"{}":q?"{\n"+q+l.join(",\n"+q)+"\n"+m+"}":"{"+l.join(",")+"}";q=m;return E}}var z=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
var f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var q;var d;var w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var x;if(typeof J.stringify!=="function")J.stringify=function(A,G,h){var B;q="";d="";if(typeof h==="number")for(B=0;B<h;B+=1)d+=" ";else if(typeof h==="string")d=h;x=G;if(G&&typeof G!=="function"&&(typeof G!=="object"||typeof G.length!=="number"))throw new Error("JSON.stringify");
return r("",{"":A})};if(typeof J.parse!=="function")J.parse=function(A,G){function h(E,F){var m;var l;var v=E[F];if(v&&typeof v==="object")for(m in v)if(Object.prototype.hasOwnProperty.call(v,m)){l=h(v,m);if(l!==undefined)v[m]=l;else delete v[m]}return G.call(E,F,v)}var B;A=String(A);z.lastIndex=0;if(z.test(A))A=A.replace(z,function(E){return"\\u"+("0000"+E.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(A.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){B=eval("("+A+")");return typeof G==="function"?h({"":B},""):B}throw new SyntaxError("JSON.parse");}})();var L={};L.html=L.html||{};(function(){function g(d){return d.replace(/^\s+/,"").replace(/\s+$/,"")}var b={callbacks:{},unfired_events:[],early_callbacks:null,currentUV:null};var y;var r="universal_variable";var z=0;var f=500;var q;b._isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"};b._targetChanged=function(d,w,x){var A;
var G;var h;if(x===null)if(w==="null")return false;else return true;else if(x===undefined)if(w===x)return false;else return true;else{A=J.parse(w);G=b._getNested(A,d);h=b._getNested(x,d);return!b._jsonIsEqual(G,h)}};b._processCallbacks=function(){var d;if(b.early_callbacks&&b.early_callbacks.length>0){for(d=0;d<b.early_callbacks.length;d+=1)b.push(b.early_callbacks[d]);b.early_callbacks=null}};b._keyStringToArr=function(d){d=g(d);if(d==="")return[];else{d=d.replace(/\[(\w+)\]/g,".$1");d=d.replace(/^\./,
"");return d.split(".")}};b._getNested=function(d,w){var x=b._keyStringToArr(w);for(var A;x.length>0;){A=x.shift();if(d.hasOwnProperty(A))d=d[A];else return}return d};b._jsonIsEqual=function(d,w){if(typeof d!=="string")d=J.stringify(d,b._stripEvents);if(typeof w!=="string")w=J.stringify(w,b._stripEvents);return d===w};b._stripEvents=function(d,w){if(d!=="events")return w;else return undefined};b._on=function(d,w){var x;var A;x=d.split(":");d=x[0];A=x[1];b.callbacks[d]=b.callbacks[d]||[];if(A)b.callbacks[d].push({keyString:A,
func:w});else b.callbacks[d].push({func:w})};b._trigger=function(d,w){var x;var A;if(b.callbacks[d])for(x=0;x<b.callbacks[d].length;x+=1)if(typeof b.callbacks[d][x].func==="function"){A=b.callbacks[d][x].keyString;if(A){if(d==="change"&&b._targetChanged(A,b.currentUV,y))b.callbacks[d][x].func(w)}else b.callbacks[d][x].func(w)}};b._eventsPush=function(d){var w;var x;y.events[y.events.length]=d;d.time=d.time||(new Date).getTime();if(b.callbacks.event){w=0;x=b.callbacks.event.length;for(w;w<x;w+=1)b.callbacks.event[w].func(d)}d.has_fired=
true};b._getUnfiredEvents=function(){var d=0;for(d=0;d<y.events.length;d+=1)if(!y.events[d].has_fired){b.unfired_events.push(y.events.splice(d,1)[0]);d-=1}};b._fireEvents=function(){for(;b.unfired_events.length>0;)y.events.push(b.unfired_events.shift())};b._resetEventsPush=function(){y.events=y.events||[];if(y.events.push.toString().indexOf("[native code]")!==-1){y.events.push=b._eventsPush;b._getUnfiredEvents();b._fireEvents()}};b._checkForChanges=function(){if(b.callbacks.change&&b.callbacks.change.length>
0)if(!b._jsonIsEqual(b.currentUV,y)){b._trigger("change",y);b.currentUV=J.stringify(y,b._stripEvents)}};b._setUVLocation=function(d){r=d;b._initUV()};b._initUV=function(){window[r]=window[r]||{events:[]};y=window[r];if(!y.events)y.events=[]};b.push=function(d){if(!b._isArray(d))return;if(d[0]==="on")b._on(d[1],d[2]);else if(d[0]==="trigger"&&d[1])b._trigger(d[1])};b.init=function(d,w){if(w)r=w;b._initUV();if(!window.uv_listener||b._isArray(window.uv_listener)){b.early_callbacks=window.uv_listener||
null;window.uv_listener=b;if(!d)b.start()}else if(w)window.uv_listener._setUVLocation(r)};b.start=function(){b.currentUV=J.stringify(y,b._stripEvents);q=setInterval(function(){b._initUV();b._resetEventsPush();b._checkForChanges()},f);b._processCallbacks()};L.html.UVListener=b})();(function(){function g(y){if(y){this._rate=y.rate||10;this._smallestRate=-1;if(y.start)this.startPooling();this.config=y}this.inervals=[];this._lck_obj={};this._binded_pool=this._pool.bind(this)}p.Define.clazz("qubit.opentag.Timer",
g);g.prototype.timers=[];g.prototype.startPooling=function(y){if(y&&this.config.dynamic)if(this._smallestRate<0||this._smallestRate>y)this._smallestRate=Math.min(Math.floor(y/2),1500);if(!this.started){this.started=true;setTimeout(this._binded_pool,0)}};g.prototype._pool=function(){this.maxFrequent(function(){var r="";if(this.config&&this.config.name)r="["+this.config.name+"]"},5E3,this._lck_obj);this.callTimers();if(this.timers.length!==0){var y=this._smallestRate>this._rate?this._smallestRate:this._rate;
setTimeout(this._binded_pool,y)}else{this.started=false;this._smallestRate=-1}};g.prototype.callTimers=function(){this.lastCalled=(new Date).valueOf();for(var y=0;y<this.timers.length;y++){var r=this.timers[y];var z=(new Date).valueOf();if(z>=r.time){try{r.execute()}catch(f){}this.timers.splice(y,1);--y}}};g.prototype.cancellAll=function(){this.timers=[]};g.prototype.setRate=function(y){this._rate=y};g.prototype.maxFrequent=function(y,r,z){if(!z){y.__maxFrequent__timer_opentag_qubit_=y.__maxFrequent__timer_opentag_qubit_||
{};z=y.__maxFrequent__timer_opentag_qubit_}var f=z.____last__timed__max__frequent____;if(!f||(new Date).valueOf()-f>r){f=(new Date).valueOf();z.____last__timed__max__frequent____=f;y()}};g.prototype.runIfNotScheduled=function(y,r,z){z=z||y;if(z.__lastRun__&&(new Date).valueOf()<r+z.__lastRun__)return this.schedule(y,r,z);else{z.__lastRun__=(new Date).valueOf();y();return true}};g.prototype.schedule=function(y,r,z){if(z.___scheduled___)return false;else{z.___scheduled___=(new Date).valueOf();this.setTimeout(function(){z.___scheduled___=
false;z.__lastRun__=(new Date).valueOf();y()},r);return true}};var b=1;g.prototype.setTimeout=function(y,r){var z={id:b++,time:(new Date).valueOf()+ +r,execute:y};this.timers.push(z);this.startPooling(r);return z};g.prototype.setInterval=function(y,r){var z=setInterval(y,r);this.inervals.push(z);return z}})();(function(){p.Define.namespace("qubit.opentag.Timed",new p.opentag.Timer({rate:37,dynamic:true}));var g=p.opentag.Timed;g.tillTrue=function(b,y,r){var z=function(){if(!b())g.setTimeout(z,r||
33);else y()};z()}})();L.html.fileLoader={};L.html.fileLoader.load=function(g,b,y,r,z,f){var q;var d;var w;var x;var A;A=false;x=function(G){return function(){if(!A){A=true;if(G&&!w)w={url:document.location.href};y(g,w,G)}}};try{if(b)d=b(g)}catch(G){d=false;y(g,"Exception loading pre",true)}finally{if(d!==false){q=L.html.fileLoader.createScriptEl(g,z,false,f);if(y){q.onload=x(false);q.onerror=x(true);q.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded")setTimeout(function(){x(false)()},
1)}}if(!r)r=window.document.getElementsByTagName("head")[0];r.appendChild(q)}}};L.html.fileLoader.createScriptEl=function(g,b,y,r){var z;var f=document.createElement("script");f.type="text/javascript";f.src=L.html.fileLoader.tidyUrl(g)+(y?"?"+(new Date).getTime():"");if(b!==false){f.async="true";f.defer="true"}else{f.async="false";if(f.async!==false)f.async=false;f.defer="false";if(f.defer!==false)f.defer=false}for(z in r)if(r.hasOwnProperty(z))f.setAttribute(z,r[z]);return f};L.html.fileLoader.tidyUrl=
function(g){if(g.substring(0,5)==="http:")return g;if(g.substring(0,6)==="https:")return g;return"//"+g};(function(){function g(r){this.calls={}}var b=p.Define;var y=p.opentag.Utils;g.prototype.on=function(r,z){if(!this.calls[r])this.calls[r]=[];return y.addToArrayIfNotExist(this.calls[r],z)};g.prototype.call=function(r,z){var f=this.calls[r];if(f)for(var q=0;q<f.length;q++)try{f[q](z)}catch(d){}};g.prototype.remove=function(r,z){if(this.calls[r])return y.removeFromArray(this.calls[r],z);return null};
g.prototype.removeAll=function(r){var z=0;for(var f in this.calls)if(this.calls.hasOwnProperty(f))z+=y.removeFromArray(this.calls[f],r);return z};g.prototype.clear=function(){this.calls={}};b.clazz("qubit.Events",g)})();(function(){function g(f){this.log=new p.opentag.Log("",function(){return this.CLASS_NAME+"["+this.config.name+"]"}.bind(this),"collectLogs");this.config={order:0,include:true,name:"Filter-"+y++,script:undefined,session:undefined,restartable:true};this.runtimeId=b.UUID();this.session=
null;if(f){for(var q in f)if(f.hasOwnProperty(q))this.config[q]=f[q];if(f.session)this.setSession(f.session);this.register(this)}this.events=new p.Events({})}var b=p.opentag.Utils;var y=0;var r=[];p.Define.clazz("qubit.opentag.filter.BaseFilter",g);g.state={DISABLED:-3,SESSION:-2,PASS:-1,FAIL:0};var z="restart";g.prototype.EVENT_TYPES={RESTART_EVENT:z};g.prototype.prepareForRestart=function(){if(this.config.restartable){this.events.call(z,this);this.reset()}};g.prototype.onRestart=function(f){this.events.on(z,
f)};g.prototype.reset=function(){this.runtimeId=b.UUID();this.enable()};g.prototype.disable=function(){this.config.disabled=true};g.prototype.enable=function(){this.config.disabled=false};g.prototype.match=function(){return true};g.prototype.setSession=function(f){this.session=f};g.prototype.getSession=function(){return this.session};g.prototype.getState=function(){var f=g.state.PASS;if(this.config.disabled)return g.state.DISABLED;if(this.config.script)f=this.config.script.call(this,f);if(isNaN(+f))f=
g.state.FAIL;this.lastState=+f;return f};g.getFilters=function(){return r};g.prototype.register=function(){g.register(this)};g.register=function(f){b.addToArrayIfNotExist(r,f)}})();(function(){var g=p.Define;var b={CONTAINS:"CONTAINS",MATCHES_EXACTLY:"MATCHES_EXACTLY",STARTS_WITH:"STARTS_WITH",ENDS_WITH:"ENDS_WITH",REGULAR_EXPRESSION:"REGULAR_EXPRESSION",ALL_URLS:"ALL_URLS"};g.namespace("qubit.opentag.filter.pattern.PatternType",b)})();(function(){function g(f){this._lockObject={};var q={patternType:z.CONTAINS,
pattern:""};if(f)for(var d in f)if(f.hasOwnProperty(d))q[d]=f[d];g.SUPER.call(this,q)}var b=p.opentag.Utils;var y=p.opentag.filter.BaseFilter;var r=p.opentag.Timed;var z=p.opentag.filter.pattern.PatternType;p.Define.clazz("qubit.opentag.filter.URLFilter",g,y);g.prototype.PATTERNS=z;g.prototype.getURL=function(f){return f||b.getUrl()};g.prototype.match=function(f){f=this.getURL(f);var q=true;var d=this.config.pattern;switch(this.config.patternType){case z.CONTAINS:q=f.toLowerCase().indexOf(d.toLowerCase())>=
0;break;case z.MATCHES_EXACTLY:q=f.toLowerCase()===this.config.pattern.toLowerCase();break;case z.STARTS_WITH:q=f.toLowerCase().indexOf(d.toLowerCase())===0;break;case z.ENDS_WITH:q=f.lastIndexOf(d.toLowerCase())+d.length===f.length;break;case z.REGULAR_EXPRESSION:q=(new RegExp(d)).test(f);break;case z.ALL_URLS:q=true;break}return q}})();(function(){function g(f){var q={};if(f){for(var d in f)if(f.hasOwnProperty(d)){if(d==="customStarter"&&f[d])this.customStarter=f[d];else if(d==="customScript"&&
f[d])this.customScript=f[d];q[d]=f[d]}this.uid="f"+z++}this.tagsToRun=[];g.SUPER.call(this,q)}var b=p.opentag.filter.BaseFilter;var y=p.opentag.filter.URLFilter;var r=p.opentag.Utils;var z=0;p.Define.clazz("qubit.opentag.filter.Filter",g,y);g.prototype.customStarter=function(f,q,d){q(false)};g.prototype.isSession=function(){if(this.config.sessionDisabled)return false;if(this.customStarter===null&&this.customScript===null)return false;return true};g.prototype.customScript=function(f){return true};
g.prototype.match=function(f){var q=true;try{if(this.customScript){if(this._matchState===undefined)this._matchState=!!this.customScript(this.getSession());q=this._matchState}}catch(d){q=false}return q&&g.SUPER.prototype.match.call(this,f)};g.prototype.runTag=function(f){r.addToArrayIfNotExist(this.tagsToRun,f);if(!this.starterExecuted){if(!this._starterWasRun){this._starterWasRun=true;var q=this.runtimeId;var d=function(w){if(q!==this.runtimeId)return;this.reRun=w;this.starterExecuted=(new Date).valueOf();
this._processQueuedTagsToRun()}.bind(this);if(this.customStarter)this.customStarter(this.getSession(),d,f);else g.prototype.customStarter.call(this,this.getSession(),d,f)}}else this._triggerTag(f)};g.prototype._processQueuedTagsToRun=function(){for(var f=0;f<this.tagsToRun.length;f++){var q=this.tagsToRun[f];this._triggerTag(q)}};g.prototype._triggerTag=function(f){if(this.reRun===true)f.run();else f.runOnce()};g.prototype.getState=function(f){if(f)this.setSession(f);var q=g.SUPER.prototype.getState.call(this);
if(q===b.state.DISABLED)return b.state.DISABLED;if(q===b.state.PASS)if(this.isSession())q=b.state.SESSION;if(this.config.script)q=this.config.script.call(this,q,this.getSession());this.lastState=q;return q};g.prototype.reset=function(){g.SUPER.prototype.reset.call(this);this._matchState=undefined;this._starterWasRun=undefined;this.starterExecuted=undefined;this.tagsToRun=[];this.reRun=undefined}})();L.html.GlobalEval={};L.html.GlobalEval.globalEval=function(g){if(window.execScript)window.execScript(g===
""?" ":g);else{var b=function(){window["eval"].call(window,g)};b()}};L.html.HtmlInjector={};L.html.HtmlInjector.inject=function(g,b,y,r,z){var f;var q;var d;var w;var x;var A;var G;if(y.toLowerCase().indexOf("\x3cscript")>=0){d=document.createElement("div");d.innerHTML="a"+y;w=d.getElementsByTagName("script");x=[];for(f=0,q=w.length;f<q;f+=1)x.push(w[f]);G=[];for(f=0,q=x.length;f<q;f+=1){A=x[f];var h={attributes:L.html.HtmlInjector.getAttributes(A)};if(A.src)h.src=A.src;else h.script=A.innerHTML;
G.push(h);A.parentNode.removeChild(A)}if(d.innerHTML)if(d.innerHTML.length>0)d.innerHTML=d.innerHTML.substring(1);L.html.HtmlInjector.doInject(g,b,d);L.html.HtmlInjector.loadScripts(G,0,r,g)}else{d=document.createElement("div");d.innerHTML=y;L.html.HtmlInjector.doInject(g,b,d);if(r)r()}};L.html.HtmlInjector.doInject=function(g,b,y){if(y.childNodes.length>0){for(var r=document.createDocumentFragment();y.childNodes.length>0;)r.appendChild(y.removeChild(y.childNodes[0]));if(b)L.html.HtmlInjector.injectAtStart(g,
r);else L.html.HtmlInjector.injectAtEnd(g,r)}};L.html.HtmlInjector.injectAtStart=function(g,b){if(g.childNodes.length===0)g.appendChild(b);else g.insertBefore(b,g.childNodes[0])};L.html.HtmlInjector.injectAtEnd=function(g,b,y){if(!y)y=1;if(g===document.body&&document.readyState!=="complete"&&y<50)setTimeout(function(){L.html.HtmlInjector.injectAtEnd(g,b,y+1)},100);else g.appendChild(b)};L.html.HtmlInjector.loadScripts=function(g,b,y,r){var z;var f;var q=false;for(z=g.length;b<z;b+=1){f=g[b];if(f.src){q=
true;break}else L.html.GlobalEval.globalEval(f.script)}if(q)L.html.fileLoader.load(f.src,null,function(){L.html.HtmlInjector.loadScripts(g,b+1,y,r)},r,false,f.attributes);if(y&&b===z)y()};L.html.HtmlInjector.getAttributes=function(g){var b;var y;var r;var z;var f;var q={};if(g){r=g.attributes;y=r.length;for(b=0;b<y;b++){z=r[b].value;f=r[b].name.toLowerCase();if(z!==""&&(f==="id"||f==="class"||f==="charset"||f.substr(0,5)==="data-"))q[f]=z}return q}};(function(){function g(){G=G||{write:document.write,
writeln:document.writeln}}function b(){document.write=G.write;document.writeln=G.writeln;G=null}var y=p.opentag.filter.BaseFilter;var r=p.opentag.Utils;var z=L.html.HtmlInjector;var f=L.html.fileLoader;var q=p.opentag.filter.Filter;var d=function(){};p.Define.clazz("qubit.opentag.TagsUtils",d);var w=false;d.bodyLoaded=function(){if(w)return true;w=!!(document.body&&document.readyState!=="loading");return w};d.bodyAvailable=function(e){return!!document.body};var x={};var A={SUCCESS:"success",FAIL:"failure",
INIT:"not started"};d.loadScript=function(e){var c=e.url;var k=function(I,N,O){x[c].error=N;if(O){x[c].state=A.FAIL;e.onerror()}else{x[c].state=A.SUCCESS;e.onsuccess()}};if(x[c]){if(e.noMultipleLoad)return k(c,x[c].error,x[c].state===A.FAIL);x[c].count+=1}else x[c]={count:1,state:null};var n=!e.async;var C=d.bodyLoaded();if(n&&C);n=n&&!C;if(n)d.writeScriptURL(c,function(I,N){k(c,N,!I)});else f.load(c,false,k,e.node,e.async)};var G=null;d.redirectDocumentWritesToArray=function(e,c){var k=e;g();document.write=
function(n){k.push(n)};document.writeln=function(n){k.push(n)}};d.flushDocWritesArray=function(e,c,k,n,C){var I=c;if(I&&e){var N=e.splice(0,e.length);try{d.injectHTML(I,k,N.join("\n"),C||M);return true}catch(P){}}else{var O="Flushing location not found!";return false}if(C)C();return true};d.unlockDocumentWrites=function(){if(G)b()};var h=d.prototype.PACKAGE_NAME+".TagsUtils._writeScriptURL_callbacks";var B={};p.Define.namespace(h,B,K,true);var E=0;var F=(new Date).valueOf();d.writeScriptURL=function(e,
c){var k="_"+F+"_"+E++;var n=h+"."+k;var C=false;B[k]=function(T){if(C)return;C=true;if(T)c(false,"error while loading script "+e);else c(true);B[k]=undefined;delete d.writeScriptURL.callbacks[k]};var I='if(this.readyState \x3d\x3d\x3d "loaded" || '+'this.readyState \x3d\x3d\x3d "complete"){ try {'+n+"(true)"+"} catch (ex) {}}";var N="try{"+n+"(false)}catch(ex){}";var O="try{"+n+"(true)}catch(ex){}";var P="scr";var R;e=f.tidyUrl(e);R="\x3c"+P+"ipt onload\x3d'"+N+"'  onerror\x3d'"+O+"' onreadystatechange\x3d'"+
I+"' type\x3d'text/javascript' "+" src\x3d'"+e+"'\x3e"+"\x3c/"+P+"ipt\x3e";if(G){b();document.write(R);g()}else document.write(R);r.bodyReady(function(){if(!C){C=true;c(true)}})};d.writeScriptURL.callbacks={};var m=y.state.SESSION;var l=y.state.PASS;var v=y.state.FAIL;d.filtersState=function(e,c,k,n){e=e.sort(function(aa,ia){try{var ga=ia.config.order;var ha=aa.config.order;if(isNaN(-ha))ha=0;if(isNaN(-ga))ga=0;return ga-ha}catch(ja){return 0}});var C=l;if(!e||e.length===0)return C;var I=null;var N=
false;var O=false;var P=0;var R;var T;var ba=[];var V;var U;for(var da=0;da<e.length;da++){V=e[da];V.setSession(c);if(V.match()){R=V.getState();if(R>0){if(P===0||P>R)P=R}else if(R===y.state.DISABLED)N=true;else if(R===m){O=true;I=V;T=V;ba.push(V)}else I=V}else U=V}var fa=false;if(I===null){fa=true;if(!N)C=v;else C=l}else if(I.config.include)C=R;else C=R===l?v:l;if(P>0&&(C===l||fa))C=P;if(C===m||C===l&&O){if(!T.config.include)return v;C=m;if(T instanceof q&&T.isSession())if(n)for(var X=0;X<ba.length;X++)try{ba[X].runTag(k)}catch(aa){}}if(k.config.dedupe&&
C===l)if(U&&U instanceof q&&U.isSession()){k.sendDedupePing=true;C=v}return C};d.injectHTML=function(e,c,k,n){return z.inject(e,!c?1:0,k,n||M)};d.getHTMLLocationForTag=function(e){var c;var k=e.prepareLocationObject(e.config.locationObject);switch(k){case "HEAD":c=document.getElementsByTagName("head")[0];break;case "BODY":c=document.body;break;default:if(k)c=document.getElementById(k);else c=document.body}return c}})();(function(){function g(d){this.config={};this.handlers=[];this.parameters=null;
this.callHandlersOnRead=false;if(d){this.uniqueId="BV"+z++;g.ALL_VARIABLES[this.uniqueId]=this;for(var w in d)if(d.hasOwnProperty(w)){this.config[w]=d[w];if(w==="value")this.value=d.value}var x=g.register(this);if(x&&x!==this);return x}}function b(){if(q)return false;for(var d=0;d<f.length;d++)try{var w=f[d];w.getValue()}catch(x){}r.setTimeout(b,g.CHECK_POLL_RATE);return true}var y=p.opentag.Utils;var r=p.opentag.Timed;var z=0;p.Define.clazz("qubit.opentag.pagevariable.BaseVariable",g);g.ALL_VARIABLES=
{};var f=[];g.OBSERVED_VARIABLES=f;g.pageVariables=[];g.register=function(d){if(d instanceof g){for(var w=0;w<g.pageVariables.length;w++){var x=g.pageVariables[w];if(d===x)return x}g.pageVariables.push(d);return d}return null};g.prototype.getValue=function(){this._updateCurrentValue(this.value);return this.currentValue};g.prototype._updateCurrentValue=function(d){if(!this.valuesAreEqual(d,this.currentValue)){this.oldValue=this.currentValue;this.currentValue=d;if(!q||this.callHandlersOnRead)this._handleValueChanged();
return true}return false};g.prototype.getDefaultValue=function(){return this.defaultValue};g.prototype.setDefaultValue=function(d){this.defaultValue=d};g.prototype.exists=function(d){var w=y.variableExists(this.getValue());if(d)w=w||y.variableExists(this.getDefaultValue());return w};g.prototype.getRelativeValue=function(d,w){var x=this.getValue();if(!y.variableExists(x))x=w;var A;if(d&&!y.variableExists(x)){A=this.getDefaultValue();if(y.variableExists(A))x=A}return x};g.prototype.replaceToken=function(d,
w,x,A){var G=this.exists();var h=G?this.getValue():x;d="\\$\\{"+d+"\\}";if(A||h instanceof Array){var B;if(G)B=this.getValueAccessorString();else B=y.getAnonymousAcessor(h);return w.replace(new RegExp(d,"g"),B)}else return w.replace(new RegExp(d,"g"),h)};g.prototype.getAccessorString=function(){return"qubit.opentag.pagevariable.BaseVariable.ALL_VARIABLES."+this.uniqueId};g.prototype.getValueAccessorString=function(){return this.getAccessorString()+".getValue()"};g.prototype.onValueChanged=function(d,
w){if(y.addToArrayIfNotExist(this.handlers,d)===-1);if(w!==false)this.startObservingForChanges()};g.prototype.deatchOnValueChanged=function(d){if(y.removeFromArray(this.handlers,d)>0);};g.prototype._handleValueChanged=function(){var d={oldValue:this.oldValue,newValue:this.currentValue,variable:this};for(var w=0;w<this.handlers.length;w++)try{this.handlers[w](d)}catch(x){}};var q=true;g.CHECK_POLL_RATE=333;g.prototype.startObservingForChanges=function(){this.addToObservedVariables();if(q){q=false;
b()}};g.prototype.stopObservingForChanges=function(){this.removeFromObservedVariables();if(f.length===0)q=true};g.prototype.addToObservedVariables=function(){y.addToArrayIfNotExist(f,this)};g.prototype.removeFromObservedVariables=function(){y.removeFromArray(f,this)};g.prototype.getObservedVariables=function(){return f};g.prototype.valuesAreEqual=function(d,w){return d===w}})();(function(){function g(r){this._lockExprObject={};g.SUPER.apply(this,arguments)}var b=p.opentag.Utils;var y=p.opentag.Timed;
p.Define.clazz("qubit.opentag.pagevariable.Expression",g,p.opentag.pagevariable.BaseVariable);g.prototype.getValue=function(){var r;var z;var f=this.value;try{if(f&&f.indexOf("[#]")===-1){var q=b.gevalAndReturn(f);r=q.result;this.failMessage=null;z=q.error}else r=g.parseUVArray(f)}catch(x){z=x}if(z){var d="could not read value of expression: \n"+f+"\nexact cause: "+z;if(this.failMessage!==d)this.failMessage=d;r=null}var w=this._updateCurrentValue(r);return r};g.parseUVArray=function(r){var z=r.split("[#]");
var f=b.gevalAndReturn(z[0]).result;var q=[];var d=z[1];if(d.indexOf(".")===0)d=d.replace(".","");for(var w=0;w<f.length;w++){var x=b.getObjectUsingPath(d,f[w]);q.push(x)}return q};g.prototype.replaceToken=function(r,z,f,q){if(this.getValue()instanceof Array)q=true;return g.SUPER.prototype.replaceToken.call(this,r,z,f,q)}})();(function(){function g(y){g.SUPER.apply(this,arguments)}var b=p.opentag.Utils;p.Define.clazz("qubit.opentag.pagevariable.DOMText",g,p.opentag.pagevariable.BaseVariable);g.prototype.getValue=
function(){var y=b.getElementValue(this.value);this._updateCurrentValue(y);return y}})();(function(){function g(b){g.SUPER.apply(this,arguments);this._lockObject={}}p.Define.clazz("qubit.opentag.pagevariable.Cookie",g,p.opentag.pagevariable.BaseVariable);g.prototype.getValue=function(){var b=p.Cookie.get(this.value);this._updateCurrentValue(b);return b}})();(function(){function g(y){g.SUPER.apply(this,arguments)}var b=p.opentag.Utils;p.Define.clazz("qubit.opentag.pagevariable.URLQuery",g,p.opentag.pagevariable.BaseVariable);
g.prototype.getValue=function(){var y=b.getQueryParam(this.value);this._updateCurrentValue(y);return y}})();(function(){function g(b){g.SUPER.apply(this,arguments)}p.Define.clazz("qubit.opentag.pagevariable.UniversalVariable",g,p.opentag.pagevariable.Expression)})();(function b(){function y(){function r(l){F.level=l}function z(l,v){F.info(l,"event emitted");v=A(v||{});v.meta=v.meta||{};v.meta.type=l;B.push(v);d();m.listeners=h(m.listeners,function(e){return!e.disposed})}function f(l,v,e){function c(){F.info("Replaying events");
q(function(){x(m.events,function(I){if(n.disposed)return;if(!G(l,I.meta.type))return;v.call(e,I)})});return C}function k(){F.info("Disposing event handler");n.disposed=true;return C}F.info("Attaching event handler for",l);var n={type:l,callback:v,disposed:false,context:e||window};m.listeners.push(n);var C={replay:c,dispose:k};return C}function q(l){F.info("Calling event handlers");E++;try{l()}catch(v){F.error("UV API Error",v.stack)}E--;d()}function d(){if(B.length===0)F.info("No more events to process");
if(B.length>0&&E>0)F.info("Event will be processed later");if(B.length>0&&E===0){F.info("Processing event");var l=B.shift();m.events.push(l);q(function(){x(m.listeners,function(v){if(v.disposed)return;if(!G(v.type,l.meta.type))return;try{v.callback.call(v.context,l)}catch(e){F.error("Error emitting UV event",e.stack)}})})}}function w(l,v,e){var c=m.on(l,function(){v.apply(e||window,arguments);c.dispose()});return c}function x(l,v){var e=l.length;for(var c=0;c<e;c++)v(l[c],c)}function A(l){var v={};
for(var e in l)if(l.hasOwnProperty(e))v[e]=l[e];return v}function G(l,v){return typeof l==="string"?l===v:l.test(v)}function h(l,v){var e=l.length;var c=[];for(var k=0;k<e;k++)if(v(l[k]))c.push(l[k]);return c}var B=[];var E=0;var F={info:function v(){if(F.level>r.INFO)return;if(console&&console.info)console.info.apply(console,arguments)},error:function e(){if(F.level>r.ERROR)return;if(console&&console.error)console.error.apply(console,arguments)}};r.ALL=0;r.INFO=1;r.ERROR=2;r.OFF=3;r(r.ERROR);var m=
{on:f,emit:z,once:w,events:[],listeners:[],logLevel:r};return m}if(typeof module==="object"&&module.exports)module.exports=y;else if(window&&window.uv===undefined)window.uv=y()})();var S={};var W=[];var Z=false;var Y=false;var ea=p.Define.global();var ca={allEventsByType:S,subscribe:function(b,y){if(Y){var r=u();r.on(b,y)}else W.push({on:[b,y]})},getEventHistory:function(b){return this.allEventsByType[b]},publish:function(b,y){if(Y){var r=u();r.emit(b,y)}else W.push({emit:[b,y]})},connect:function(){a()}};
ca.connect();p.Define.namespace("qubit.qprotocol.PubSub",ca);(function(){function b(f){b.SUPER.apply(this,arguments)}var y=p.qprotocol.PubSub;var r=p.opentag.Utils;var z=":";p.Define.clazz("qubit.opentag.pagevariable.QProtocolVariable",b,p.opentag.pagevariable.BaseVariable);b.prototype.init=function(){if(this.initialized)return false;else this.initialized=(new Date).valueOf();this.callHandlersOnRead=true;if(!this.handlerAttached){var f=this;var q=this.getValueAndPath(this.value);this.eventName=q[0];
this.objectPath=q[1];this.updateValue();y.subscribe(this.eventName,function(d){f.updateValue(d)});this.handlerAttached=(new Date).valueOf()}};b.prototype.getValueAndPath=function(f){var q=f;var d;if(q){var w=f.indexOf(z);if(w!==-1){q=f.substring(0,w);d=f.substring(w+1)}}return[q,d]};b.prototype.getValue=function(){this.init();return this.currentValue};b.prototype.getEventsHistory=function(){return y.getEventHistory(this.eventName)};b.prototype.updateValue=function(f){if(!f){var q=this.getEventsHistory();
if(q)f=q.current}var d;var w=this.objectPath;if(f&&w)d=r.getObjectUsingPath(w,f);else d=f;this._updateCurrentValue(d);return d};b.prototype.startObservingForChanges=function(){};b.prototype.stopObservingForChanges=function(){}})();(function(){function b(){}function y(l,v){var e=[];try{var c=l.parameters;if(c)for(var k=0;k<c.length;k++)if(l.getVariableForParameter(c[k])===v)e.push(c[k])}catch(n){}return e}var r=p.opentag.Utils;var z=p.opentag.TagsUtils;var f=p.opentag.Timed;var q=p.opentag.pagevariable.BaseVariable;
var d=p.opentag.pagevariable.Expression;var w=p.opentag.pagevariable.UniversalVariable;var x=p.opentag.pagevariable.DOMText;var A=p.opentag.pagevariable.Cookie;var G=p.opentag.pagevariable.URLQuery;p.Define.clazz("qubit.opentag.TagHelper",b);b.injectHTMLForLoader=function(l,v,e,c){var k=c!==undefined?c:l.getHtml();if(k){var n=l.config.locationPlaceHolder==="END";var C=z.getHTMLLocationForTag(l);l.injectHTMLNotFinished=true;try{if(C)z.injectHTML(C,n,k,function(){l.injectHTMLNotFinished=false;if(v)try{v()}catch(I){}}.bind(l));
else if(e&&document.readyState==="loading"){document.write(k);l.injectHTMLNotFinished=false}else l.injectHTMLFailed=(new Date).valueOf()}catch(I){l.injectHTMLNotFinished=false;l.injectHTMLFailed=(new Date).valueOf()}}};b.getAllVariablesWithParameters=function(l){var v=l.getPageVariables();var e=[];for(var c=0;c<v.length;c++){var k=v[c];var n=y(l,k);for(var C=0;C<n.length;C++)e.push({parameter:n[C],variable:k})}return e};var h={};b.allParameterVariablesReadyForTag=function(l,v){var e=v;var c=true;
var k=l.getPageVariables();for(var n=0;n<k.length;n++){var C=k[n];try{var I=y(l,C);var N=C.exists();if(!N&&e){if(I.length>0)N=!!I[0].defaultValue;N=N||C.exists(true)}if(!N){c=false;break}}catch(O){c=false;break}}return c};var B="2";var E="3";var F="4";var m="5";b.validateAndGetVariableForParameter=function(l){if(l.hasOwnProperty("variable")&&l.variable)l.variable=b.initPageVariable(l.variable);return l.variable};b.initPageVariable=function(l){if(!l||l instanceof q)return l;if(typeof l==="string"){var v=
r.getObjectUsingPath(l);if(v&&v instanceof q)return v}switch(l.type){case B:return new d(l);case E:return new G(l);case F:return new A(l);case m:return new x(l);case "EPRESSION":return new d(l);case "URL_PARAMETER":return new G(l);case "COOKIE_VALUE":return new A(l);case "DOM_VALUE":return new x(l);default:return new q(l)}}})();(function(){function b(h){this.log=new w("",function(){return this.CLASS_NAME+"["+this.config.name+"]"}.bind(this),"collectLogs");this.urlsLoaded=0;this.urlsFailed=0;this.runCounter=
0;this.events=new p.Events({});this._depLoadedHandler=function(){if(this.dependenciesLoaded()&&this.awaitingDependencies)this._triggerLoadingAndExecution()}.bind(this);this.config={name:"Tag-"+d++,async:true,usesDocumentWrite:false,timeout:this.LOADING_TIMEOUT,dependencies:[],url:null,urlLocation:null,locationPlaceHolder:"END",locationObject:null,dontWaitForInjectionLocation:false,noMultipleLoad:false,loadDependenciesOnLoad:false,restartable:true};this.restartCounter=0;this.cancelled=false;this.runtimeId=
r.UUID();this.delayDocWrite=false;this.dependencies=[];this._lockObject={count:0};this._lockObjectDepsLoaded={};this.genericDependencies=[];if(h){if(!h.name){var B="Tag-"+d++;this.config.name=B}this.addState("INITIAL");for(var E in h)this.config[E]=h[E];if(h.genericDependencies)this.genericDependencies=this.genericDependencies.concat(h.genericDependencies);if(h.dependencies)this.dependencies=h.dependencies.concat(this.dependencies);if(h.PACKAGE)this._package=h.PACKAGE;this.onInit()}}function y(){if(this.cancelled){this._handleCancel();
return}this.waitForDependenciesFinished=(new Date).valueOf();var h=this._fullBodyNeededAndUnLoaded();var B=this._bodyNeededButNotAvailable();if(h||B)this.waitForDependenciesFinished=false;else{if(!this.timeoutCountdownStart)this.timeoutCountdownStart=(new Date).valueOf();if(this.allDependenciesLoaded())this._markLoadedSuccesfuly();else if(this._loadingOutOfTimeFrames()){this.loadingTimedOut=(new Date).valueOf();if(this.allDependenciesLoaded(true))this._markLoadedSuccesfuly();else{this.addState("TIMED_OUT");
this._markLoadingDependenciesFailed();this._triggerOnLoadTimeout()}}else this.waitForDependenciesFinished=false}if(!this.waitForDependenciesFinished)this._setTimeout(y.bind(this),65);else this.addState("LOADED_DEPENDENCIES")}var r=p.opentag.Utils;var z=p.opentag.TagsUtils;var f=p.opentag.Timed;var q=p.opentag.TagHelper;var d=0;var w=p.opentag.Log;p.Define.clazz("qubit.opentag.GenericLoader",b);var x="after";var A="before";var G="restart";b.prototype.EVENT_TYPES={AFTER_EVENT:x,BEFORE_EVENT:A,RESTART_EVENT:G};
b.prototype.onInit=M;b.prototype.LOADING_TIMEOUT=5*1E3;b.prototype.getHtml=function(){if(this.config.html)return this.config.html;if(this.htmlContent)return r.trim(this.htmlContent);return null};b.prototype._executeScript=function(){var h=false;try{this.script();h=true}catch(B){this.addState("EXECUTED_WITH_ERRORS");this.executedWithErrors=(new Date).valueOf();this._onError(B)}finally{this._onExecute(h)}};b.prototype.getTimeout=function(){return this._getTimeout()};b.prototype._getTimeout=function(h){var B=
+this.config.timeout;var E=this.dependencies;if(B!==-1&&E.length>0){var F=0;h=h||[];var m=r.indexInArray(h,this)!==-1;if(!m){h[h.length]=this;for(var l=0;l<E.length;l++){var v=E[l]._getTimeout(h);if(v>F)F=v}if(F>0)B+=F}else return 0}return B};b.prototype._onExecute=function(h){this.onExecute(h)};b.prototype.onExecute=M;b.prototype._flushDocWrites=function(h){var B=true;this._docWriteNotFlushed=false;try{var E=z.getHTMLLocationForTag(this);if(E&&this._securedWrites&&this._securedWrites.length>0){var F=
this.config.locationPlaceHolder==="END";B=z.flushDocWritesArray(this._securedWrites,E,F,this.log,h);if(B)this._docWriteFlushed=(new Date).valueOf();else this._docWriteNotFlushed=(new Date).valueOf()}}catch(m){this._onError(m)}if(h)h();if(this._securedWrites&&this._securedWrites.length>0){B=false;this._docWriteNotFlushed=(new Date).valueOf()}return B};b.prototype.log=M;b.prototype.finished=function(){return!!this.runIsFinished};b.prototype.script=function(){};b.prototype.before=function(){this.beforeRun=
(new Date).valueOf();try{this.events.call(A,this)}catch(h){this._onError(h)}};b.prototype.onBefore=function(h){this.events.on(A,h)};b.prototype.after=function(h){this.afterRun=(new Date).valueOf();try{this.events.call(x,{success:h,tag:this})}catch(B){this._onError(B)}};b.prototype.onAfter=function(h){this.events.on(x,h)};b.prototype.runOnce=function(){if(!this._runOnceTriggered&&!this.scriptExecuted){this._runOnceTriggered=(new Date).valueOf();this.run()}};b.CANCEL_ALL=false;b.prototype.run=function(){if(!isNaN(this.config.runningLimit))if(this.config.runningLimit<=
this.runCounter)return false;if(this.cancelled||b.CANCEL_ALL){this._handleCancel();return false}if(this.isRunning)return false;if(this.lastRun)this.reset();this.lastRun=this.isRunning=(new Date).valueOf();this.runCounter++;this._ignoreDeps=!!this.ignoreDependencies;if(!this._ignoreDeps&&!this.dependenciesLoaded()){this._attachDepsEventsToContinue();return false}return this._triggerLoadingAndExecution()};b.prototype._triggerLoadingAndExecution=function(){this.awaitingDependencies=-(new Date).valueOf();
this.load();if(this._ignoreDeps)this.execute();else this.waitForDependenciesAndExecute();return true};b.prototype._attachDepsEventsToContinue=function(){this.awaitingDependencies=(new Date).valueOf();var h=this.dependencies;for(var B=0;B<h.length;B++)try{h[B].events.on("success",this._depLoadedHandler)}catch(E){}};b.prototype.dependenciesLoaded=function(){var h=this.dependencies;for(var B=0;B<h.length;B++)if(h[B]!==this){var E=+h[B].scriptExecuted>0;if(!E)return false}return true};b.prototype._setTimeout=
function(h,B){this._wasTimed=(new Date).valueOf();var E=this.runtimeId;var F=function(){if(this.runtimeId===E)return h()}.bind(this);return f.setTimeout(F,B)};b.prototype._handleCancel=function(){this.addState("CANCELLED");try{this.onCancel()}catch(h){this._onError(h)}};b.prototype.waitForDependenciesAndExecute=function(){if(this.loadedDependencies)this.execute();else if(this.loadingDependenciesFailed){this._markFailure();this._markFinished()}else this._setTimeout(this.waitForDependenciesAndExecute.bind(this),
30)};b.prototype.execute=function(){this._triggerExecution()};b.prototype._triggerExecution=function(){if(this.cancelled){this._handleCancel();return}if(this.scriptExecuted)return;var h=true;if(this.shouldWaitForDocWriteProtection())h=false;else{if(!this._beforeEntered){this._beforeEntered=(new Date).valueOf();var B=false;try{B=this.before()}catch(F){this._onError(F)}if(B){this._markFailure();this._markFinished();return}}h=this.loadExecutionURLsAndHTML(this._triggerExecution.bind(this))}if(this.scriptExecuted)return;
if(this.unexpectedFail)h=true;if(!h)this._setTimeout(this._triggerExecution.bind(this),30);else{this._flushDocWrites();if(this.scriptLoadingFailed||this.injectHTMLFailed||this.unexpectedFail)this._markFailure();else{this.scriptExecuted=(new Date).valueOf();this.addState("EXECUTED");this._executeScript()}if(this.cancelled){this._handleCancel();return false}else{var E=this.scriptExecuted>0;try{if(!this.afterRun){this.afterRun=(new Date).valueOf();this.after(E)}}catch(F){this.executedWithErrors=(new Date).valueOf()}if(!this.executedWithErrors)if(E)this.events.call("success")}this._flushDocWrites();
this._markFinished()}};b.prototype._markFailure=function(){this.scriptExecuted=-(new Date).valueOf();this.addState("FAILED_TO_EXECUTE")};b.prototype._markFinished=function(){this.runIsFinished=(new Date).valueOf();this.isRunning=false;if(b.LOCK_DOC_WRITE===this){this._flushDocWrites();z.unlockDocumentWrites();b.LOCK_DOC_WRITE=false}this.onFinished(true)};b.prototype.onFinished=M;b.prototype.onCancel=M;b.prototype.onFinished=M;b.prototype.shouldWaitForDocWriteProtection=function(){if(this.willSecureDocumentWrite())if(!b.LOCK_DOC_WRITE){b.LOCK_DOC_WRITE=
this;this._secureWriteAndCollectForExecution()}else if(b.LOCK_DOC_WRITE!==this){if(!this._lockedDocWriteInformed)this._lockedDocWriteInformed=(new Date).valueOf();return true}return false};b.prototype.runWithoutDependencies=function(){this.ignoreDependencies=true;this.run()};b.prototype.loadExecutionURLsAndHTML=function(h){if(this.cancelled){this._handleCancel();return true}if(!this._loadExecutionURLsAndHTMLInformed)this._loadExecutionURLsAndHTMLInformed=true;this._triggerURLsLoading(h);if(!this.loadURLsNotFinished){this._flushDocWrites();
this._triggerHTMLInjection();this._flushDocWrites();if(!this.injectHTMLNotFinished){this._flushDocWrites();if(!this._docWriteNotFlushed){if(this._docWriteFlushed);return true}}}return false};b.prototype._triggerURLsLoading=function(h){if(!this._urlLoadTriggered&&this.config.url){this._urlLoadTriggered=true;this.loadURLs(false,h)}};b.prototype._triggerHTMLInjection=function(){if(!this._injectHTMLTriggered&&this.getHtml()){this._injectHTMLTriggered=true;this.injectHTML()}};b.prototype.STATE={INITIAL:0,
STARTED:1,LOADING_DEPENDENCIES:2,LOADED_DEPENDENCIES:4,LOADING_URL:8,LOADED_URL:16,EXECUTED:32,EXECUTED_WITH_ERRORS:64,FAILED_TO_LOAD_DEPENDENCIES:128,FAILED_TO_LOAD_URL:256,FAILED_TO_EXECUTE:512,TIMED_OUT:1024,UNEXPECTED_FAIL:2048,CANCELLED:2048*2};b.prototype.addState=function(h){if(this.STATE.hasOwnProperty(h)){this.state=this.state|this.STATE[h];try{this.onStateChange(h)}catch(B){this._onError(B)}}};b.prototype.onStateChange=M;b.prototype.cancel=function(){this.cancelled=(new Date).valueOf()};
b.prototype.unCancel=function(){this.cancelled=false};b.prototype.state=b.prototype.STATE.INITIAL;b.prototype._markLoadedSuccesfuly=function(){this.loadedDependencies=(new Date).valueOf();this.onAllDependenciesLoaded()};b.prototype._secureWriteAndCollectForExecution=function(){if(!this._securedWrites){this._securedWrites=[];z.redirectDocumentWritesToArray(this._securedWrites,this.log)}};b.prototype._markLoadingDependenciesFailed=function(){this.addState("FAILED_TO_LOAD_DEPENDENCIES");this.loadingDependenciesFailed=
(new Date).valueOf()};b.prototype.allDependenciesLoaded=function(h,B){return this.getDependenciesToBeLoaded(h,B).length===0};b.prototype.getDependenciesToBeLoaded=function(h,B){var E=B||[];if(!this.injectionLocationReady())E.push("injection location");var F;var m=this.dependencies;for(F=0;F<m.length;F++)if(m[F]!==this){var l=+m[F].scriptExecuted>0;if(!l){var v=m[F].config?m[F].config.name:"anonymous";E.push("dependant Tag with name -\x3e "+v)}}for(F=0;F<this.genericDependencies.length;F++){var e=
this.genericDependencies[F](this);if(!e)E.push("this.genericDependencies["+F+"] (index: "+F+")")}if(E!=="");return E};b.prototype.docWriteAsksToWaitForBody=function(){return!!(this.delayDocWrite&&this.config.usesDocumentWrite)};b.prototype._bodyNeededButNotAvailable=function(){if(this._dontWaitForInjections())return false;return this._isBodyLocationNeeded()&&!z.bodyAvailable()};b.prototype._isBodyLocationNeeded=function(){if(!this.isLoadingAsynchronously())return false;if(this._isBodyLocationSet())return true;
else{var h=this.config.locationObject==="HEAD";return h&&this.config.locationPlaceHolder==="END"}};b.prototype._isBodyLocationSet=function(){var h=this.config.locationObject;return!h||h==="BODY"};b.prototype._fullBodyNeededAndUnLoaded=function(){if(this._dontWaitForInjections())return false;var h=false;if(this._isBodyLocationNeeded())h=this.config.locationPlaceHolder==="END";h=h||(this.fullbodyNeeded||this.docWriteAsksToWaitForBody());return h&&!r.bodyReady()};b.prototype._dontWaitForInjections=function(){return this.config.dontWaitForInjectionLocation||
this.dontWaitForInjectionLocation||b.dontWaitForInjectionLocation};b.prototype.injectionLocationReady=function(){if(this._dontWaitForInjections())return true;if(this._fullBodyNeededAndUnLoaded())return false;if(!this.isLoadingAsynchronously())return true;return!!z.getHTMLLocationForTag(this)};b.prototype._loadingOutOfTimeFrames=function(){if(this.getTimeout()<0)return false;return(new Date).valueOf()-this.timeoutCountdownStart>this.getTimeout()};b.prototype.loadDependencies=function(){this._loadDependencies()};
b.prototype.addClientDependenciesList=function(h,B){return this.addDependenciesList(h,p.Define.clientSpaceClasspath())};b.prototype.addDependenciesList=function(h,B){if(!h||h.length===0)return;if(!this.failedDependenciesToParse)this.failedDependenciesToParse=[];var E=this.dependencies;for(var F=0;F<h.length;F++){var m=h[F];var l=false;if(m instanceof b)E.push(m);else if(typeof m==="string"){var v=m;if(B)m=B+"."+m;var e=r.getObjectUsingPath(m);if(e)if(e instanceof b)E.push(e);else l=true;else this.failedDependenciesToParse.push(v)}else l=
true;if(l){this.badDepsObjects=this.badDepsObjects||[];r.addToArrayIfNotExist(this.badDepsObjects,m)}}};b.prototype._loadDependencies=function(h){h=h||[];var B=this.dependencies;var E=r.indexInArray(h,this)!==-1;if(!E){h[h.length]=this;for(var F=0;F<B.length;F++)B[F].load(h)}};b.prototype.onError=M;b.prototype._onError=function(h){try{this.onError(h)}catch(B){}};b.prototype._triggerOnLoadTimeout=function(){this.onLoadTimeout()};b.prototype.onLoadTimeout=M;b.prototype.onScriptsLoadSuccess=M;b.prototype.onScriptLoadError=
M;b.prototype.onAllDependenciesLoaded=M;b.prototype.onBeforeLoad=null;b.prototype.load=function(){if(this.loadStarted)return;else{this.loadStarted=(new Date).valueOf();try{if(this.onBeforeLoad)this.onBeforeLoad()}catch(h){this._onError(h)}}this.addState("LOADING_DEPENDENCIES");try{if(!this._ignoreDeps&&this.config.loadDependenciesOnLoad)this.loadDependencies()}catch(h){throw h;}y.call(this)};b.prototype._singleUrlLoadHandler=function(h,B,E){++this.urlsLoaded;if(!h)++this.urlsFailed;if(this.urlsLoaded===
B.length){this.loadURLsNotFinished=false;if(h&&this.urlsFailed===0){this.addState("LOADED_URL");this.urlsLoaded=(new Date).valueOf();try{if(E)E(true)}catch(m){this._onError(m)}finally{this.onScriptsLoadSuccess()}}else{var F="error loading urls. Failed "+this.urlsFailed;this._onError(F);this.addState("FAILED_TO_LOAD_URL");this.urlsLoaded=-(new Date).valueOf();try{this.scriptLoadingFailed=true;if(E)E(false)}catch(m){this._onError(m)}finally{this.onScriptLoadError(F)}}}};b.prototype.loadURLs=function(h,
B){var E=h||this.config.url;this.addState("LOADING_URL");try{if(E&&!(E instanceof Array))E=[E];for(var F=0;F<E.length;F++){this.loadURLsNotFinished=true;var m=E[F];m=this.prepareURL(m);this.loadURL(m,function(l){this._singleUrlLoadHandler(l,E,B)}.bind(this))}}catch(l){this.loadURLsNotFinished=false;this.addState("UNEXPECTED_FAIL");this.unexpectedFail=(new Date).valueOf();this._onError(l)}};b.prototype.prepareLocationObject=function(h){return h};b.prototype.prepareURL=function(h){return h};b.prototype.prepareHTML=
function(h){return h};b.prototype.loadURL=function(h,B,E){var F=h;this.addState("LOADING_URL");z.loadScript({onsuccess:function(){try{if(B)B(true)}catch(m){}}.bind(this),onerror:function(){try{if(B)B(false)}catch(m){}}.bind(this),url:F,node:E||this.config.urlLocation,async:this.isLoadingAsynchronously(),noMultipleLoad:this.config.noMultipleLoad})};b.prototype.onRestart=function(h){this.events.on(G,h)};b.prototype.prepareForRestart=function(){if(this.config.restartable){var h=this.restartCounter+1;
this.events.call(G,this);this.reset();this.restartCounter=h}};b.prototype.restart=function(){if(this.config.restartable){this.prepareForRestart();this.run()}};b.prototype.reset=function(){var h;this._injectHTMLTriggered=h;this._loadExecutionURLsAndHTMLInformed=h;this._lockedDocWriteInformed=h;this._runOnceTriggered=h;this._urlLoadTriggered=h;this.afterRun=h;this.beforeRun=h;this.filtersRunTriggered=h;this.injectHTMLFailed=h;this.loadStarted=h;this.loadURLsNotFinished=h;this.loadedDependencies=h;this.loadingDependenciesFailed=
h;this.loadingTimedOut=h;this.runIsFinished=h;this.scriptExecuted=h;this.scriptLoadingFailed=h;this.delayDocWrite=h;this._securedWrites=h;this.state=0;this.unexpectedFail=h;this.urlsFailed=0;this.urlsLoaded=0;this.waitForDependenciesFinished=h;this.isRunning=h;this.lastRun=h;this.cancelled=h;this._beforeEntered=h;this.awaitingDependencies=h;this.timeoutCountdownStart=h;this.restartCounter=0;this.runtimeId=r.UUID();this.addState("INITIAL")};b.prototype.isLoadingAsynchronously=function(){if(this._wasTimed)return true;
return!!(this.config.async||this.forceAsynchronous)};b.prototype.willSecureDocumentWrite=function(){return this.config.usesDocumentWrite&&this.isLoadingAsynchronously()};b.prototype.injectHTML=function(h){var B=!this.docWriteAsksToWaitForBody();var E=this.prepareHTML(this.getHtml());if(E)q.injectHTMLForLoader(this,h,B,E)};b.prototype.clone=function(){var h=new b(this.config);return h}})();(function(){function b(e){var c={filterTimeout:e&&e.filterTimeout||this.FILTER_WAIT_TIMEOUT,PACKAGE:e&&e.PACKAGE,
dedupe:false,needsConsent:false,inactive:false,variables:null,runner:null,disabled:false,locked:false,reRunOnVariableChange:false};r.setIfUnset(e,c);b.SUPER.apply(this,arguments);this.namedVariables={};this._runtimeMarkers={};this.parameters=[];this.filters=[];this.session=null;this.owningContainer=null;this.pingSent=false;this.oldPingSent=false;this.dedupePingSent=false;this.oldDedupePingSent=false;this.reRunCounter=0;if(e){this.addState("INITIAL");try{b.register(this)}catch(k){}this.setupConfig(e);
this.uniqueRefString=null;if(e.init)try{e.init.call(this,e)}catch(k){}this.onTagInit();this.handleVariableChange=this._handleVariableChange.bind(this)}}function y(e,c){var k=e.namedVariables;var n=w.initPageVariable(k[c]);k[c]=n;return n}var r=p.opentag.Utils;var z=p.opentag.TagsUtils;var f=p.opentag.Timed;var q=p.opentag.filter.BaseFilter;var d=p.opentag.GenericLoader;var w=p.opentag.TagHelper;var x=p.opentag.pagevariable.BaseVariable;var A=p.Cookie;var G=p.Define;G.clazz("qubit.opentag.BaseTag",
b,d);b.prototype.setupConfig=function(e){if(!e)return;if(e.filters)this.addFilters(e.filters);if(e.parameters)this.addParameters(e.parameters);if(e.variables)for(var c in e.variables)if(e.variables.hasOwnProperty(c)){var k=this.getParameterByTokenName(c);if(k){var n=e.variables[c];k.variable=n;if(n.defaultValue!==undefined)k.defaultValue=n.defaultValue;if(n.uv!==undefined)k.uv=n.uv}}if(e.locked)this.lock()};b.prototype.valueForToken=function(e,c){var k=this.getParameterByTokenName(e);if(k){if(c===
undefined)if(this.loadingTimedOut)c=true;return this.getParameterValue(k,c)}var n=this.namedVariables;if(n&&n[e]){var C=y(this,e);if(C)return C.getRelativeValue(c)}return undefined};b.prototype.addParameters=function(e){this.parameters=this.parameters.concat(e)};b.prototype.LOADING_TIMEOUT=5*1E3;b.prototype.FILTER_WAIT_TIMEOUT=-1;b.prototype._isVariable=function(e){return e!==null&&e!==undefined};b.prototype.run=function(){if(this.destroyed)throw"Tag is destroyed.";this.resolveAllDynamicData();this.runPostInitialisationSection();
var e=this.parameters;if(e)for(var c=0;c<e.length;c++){var k=this.getVariableForParameter(e[c]);if(!this._isVariable(k)){this._markLoadingDependenciesFailed();this._markFinished();return}}if(this.config.runner){var n=false;try{this.addState("AWAITING_CALLBACK");n=this._runner=(new Date).valueOf();this.config.runner.call(this)}catch(C){}return n}else{this._runner=false;return this.start()}};b.prototype.lock=function(){this.locked=true;this._unlock=null};b.prototype.unlock=function(){this.locked=false;
if(this._unlock){this._unlock();this._unlock=false}};b.prototype.start=function(){if(!this.locked)return b.SUPER.prototype.run.call(this);else{this._unlock=function(){return b.SUPER.prototype.run.call(this)}.bind(this);return false}};b.prototype.startOnce=function(){if(!this.locked)return b.SUPER.prototype.runOnce.call(this);else{this._unlock=function(){return b.SUPER.prototype.runOnce.call(this)}.bind(this);return false}};b.prototype.getFilters=function(){return this.filters};b.prototype.runOnceIfFiltersPass=
function(){if(!this._runOnceIfFiltersPassTriggered&&!this.scriptExecuted){this._runOnceIfFiltersPassTriggered=(new Date).valueOf();this.runIfFiltersPass()}};b.prototype.runIfFiltersPass=function(){if(this.destroyed)throw"Tag is destroyed.";this.resolveAllDynamicData();this.runPostInitialisationSection();var e=this.filtersState(true);this.addState("FILTER_ACTIVE");if(!this.filtersRunTriggered)this.filtersRunTriggered=(new Date).valueOf();if(e===q.state.SESSION){this.addState("AWAITING_CALLBACK");this.awaitingCallback=
(new Date).valueOf()}else if(e===q.state.PASS){this.filtersPassed=(new Date).valueOf();try{this.onFiltersPassed()}catch(k){}this.run()}else if(e===q.state.FAIL){this._markFiltersFailed();this._markFinished()}else if(e>0){var c=this.config.filterTimeout;if(c<0||(new Date).valueOf()-this.filtersRunTriggered>c){if(!this._awaitingForFilterInformed){this._awaitingForFilterInformed=(new Date).valueOf();try{this.onFiltersDelayed()}catch(k){}}this._setTimeout(this.runIfFiltersPass.bind(this),e)}else{this._markFiltersFailed();
this._markFinished();this.filtersRunTimedOut=(new Date).valueOf()}}try{this.onFiltersCheck(e)}catch(k){}return e};b.prototype._markFiltersFailed=function(){this.addState("FILTERS_FAILED");this.filtersPassed=-(new Date).valueOf()};b.prototype.STATE={INITIAL:0,FILTER_ACTIVE:1,AWAITING_CALLBACK:2,FILTERS_FAILED:4,STARTED:8,LOADING_DEPENDENCIES:16,LOADED_DEPENDENCIES:32,LOADING_URL:64,LOADED_URL:128,EXECUTED:256,EXECUTED_WITH_ERRORS:512,FAILED_TO_LOAD_DEPENDENCIES:1024,FAILED_TO_LOAD_URL:2048,FAILED_TO_EXECUTE:4096,
TIMED_OUT:4096*2,UNEXPECTED_FAIL:4096*2*2,CANCELLED:4096*2*2*2};b.prototype.addState=function(e){b.SUPER.prototype.addState.call(this,e);try{b.onStateChange(this)}catch(C){}this.stateStack=[];var c=this.STATE;var k=this.state;var n=this.stateStack;if(k&c.INITIAL)n.push("Initial state.");if(k&c.FILTER_ACTIVE)n.push("Tag running with filters pass triggered.");if(k&c.FILTERS_FAILED)n.push("Filters failed to pass.");if(k&c.AWAITING_CALLBACK)n.push("Awaiting callback to run this tag. Not pooling.");if(k&
c.STARTED)n.push("Tag is initialised and loading has been started.");if(k&c.LOADING_DEPENDENCIES)n.push("Dependencies are being loaded.");if(k&c.LOADED_DEPENDENCIES)n.push("Dependencies loading process has been finished.");if(k&c.LOADING_URL)n.push("External URL is being loaded.");if(k&c.LOADED_URL)n.push("External URL has been loaded.");if(k&c.EXECUTED)n.push("Main script has been executed.");if(k&c.EXECUTED_WITH_ERRORS)n.push("Main script has been executed but errors occured.");if(k&c.FAILED_TO_LOAD_DEPENDENCIES)n.push("Dependencies has failed to load.");
if(k&c.FAILED_TO_LOAD_URL)n.push("URL location failed to load.");if(k&c.FAILED_TO_EXECUTE)n.push("Script failed to execute.");if(k&c.TIMED_OUT)n.push("Script timed out awaiting for dependencies.");if(k&c.UNEXPECTED_FAIL)n.push("Script occured UNEXPECTED exception and is failed.");if(k&c.CANCELLED)n.push("Tag has been cancelled.")};b.prototype.onTagInit=M;b.prototype.postInitialisationSection=M;b.onStateChange=M;b.prototype.onFiltersDelayed=M;b.prototype.onFiltersPassed=M;b.prototype.onFiltersCheck=
M;b.prototype.state=b.prototype.STATE.INITIAL;b.prototype.arePageVariablesLoaded=function(e){return w.allParameterVariablesReadyForTag(this,e)};b.prototype.getDependenciesToBeLoaded=function(e,c){var k=c||[];if(!this.arePageVariablesLoaded(e))k.push("page variables");return b.SUPER.prototype.getDependenciesToBeLoaded.call(this,e,k)};b.prototype.resolveAllDynamicData=function(){this.resolvePageVariables();this.resolveDependencies();this.resolveFilters()};b.prototype.resolveDependencies=function(){var e=
this.failedDependenciesToParse;if(e){this.failedDependenciesToParse=null;this.addDependenciesList(e,G.clientSpaceClasspath())}return this.dependencies};b.prototype.addClientVariablesMap=function(e){this.unresolvedClientVariablesMap=this._addVariablesMap(e,G.clientSpaceClasspath());return this.unresolvedClientVariablesMap};b.prototype.resolvePageVariables=function(){var e=this.unresolvedClientVariablesMap;if(e){this.unresolvedClientVariablesMap=null;this.addClientVariablesMap(e)}e=this.unresolvedVariablesMap;
if(e){this.unresolvedVariablesMap=null;this.addVariablesMap(e)}return this.getPageVariables()};b.prototype.addVariablesMap=function(e){this.unresolvedVariablesMap=this._addVariablesMap(e);return this.unresolvedVariablesMap};b.prototype._addVariablesMap=function(e,c){if(!e)return;var k={};var n=this.namedVariables;for(var C in e)if(e.hasOwnProperty(C)){var I=e[C];if(I instanceof x)n[C]=I;else if(typeof I==="string"){var N=I;if(c)I=c+"."+I;var O=r.getObjectUsingPath(I);if(O)if(O instanceof x)n[C]=O;
else n[C]=I;else k[C]=N}else;}return k};b.prototype.prepareURL=function(e){return this.replaceTokensWithValues(e)};b.prototype.prepareLocationObject=function(e){return this.replaceTokensWithValues(e)};b.prototype.prepareHTML=function(e){if(e)e=this.replaceTokensWithValues(e);return e};b.prototype._executeScript=function(){if(this.config&&this.config.script)if(typeof this.config.script==="function")this.script=this.config.script;else{var e=this.replaceTokensWithValues(String(this.config.script));this.script=
r.expressionToFunction(e).bind(this)}b.SUPER.prototype._executeScript.call(this)};b.prototype.replaceTokensWithValues=function(e){if(!e||e.indexOf("${")===-1)return e;var c=this.parameters;if(c)for(var k=0;k<c.length;k++){var n=c[k];var C=this.getVariableForParameter(n);if(C){var I=c[k].token;var N=this.valueForToken(I);e=C.replaceToken(I,e,N)}}return e};b.prototype.getParameter=function(e){var c=this.parameters;var k=null;if(c)for(var n=0;n<c.length;n++)if(c[n].name===e)k=c[n];return k};b.prototype.setParameterValueByTokenName=
function(e,c){var k=this.getParameterByTokenName(e);if(k!==null){k.variable={value:c};return true}return false};b.prototype.getParameterValue=function(e,c){var k=typeof e==="string"?this.getParameter(e):e;if(k){var n=this.getVariableForParameter(k);if(n)try{var C;if(c&&k.defaultValue!=="")C=r.gevalAndReturn(k.defaultValue).result;C=n.getRelativeValue(c,C);return C}catch(I){return undefined}}return undefined};b.prototype.filtersState=function(e){var c=e;return z.filtersState(this.filters,this.session,
this,c)};b.prototype.addFilter=function(e){r.addToArrayIfNotExist(this.filters,e)};b.prototype.addFilters=function(e){for(var c=0;c<e.length;c++)this.addFilter(e[c])};b.prototype.addClientFiltersList=function(e){this.unresolvedClientFilterClasspaths=this.addFiltersList(e,G.clientSpaceClasspath());return this.unresolvedClientFilterClasspaths};b.prototype.resolveFilters=function(){var e=this.unresolvedClientFilterClasspaths;if(e){this.unresolvedClientFilterClasspaths=null;this.addClientFiltersList(e)}return this.filters};
b.prototype.addFiltersList=function(e,c){var k=[];for(var n=0;n<e.length;n++)try{var C=e[n];var I=C;var N=null;if(typeof C==="string"){N=C;if(c)C=c+"."+C;C=r.getObjectUsingPath(C)}if(typeof C==="function"){var O=C;C=new O}if(!C);if(!C instanceof q)C=null;if(C)this.addFilter(C);else if(N)r.addToArrayIfNotExist(k,N)}catch(P){this.failedFilters=this.failedFilters||[];this.failedFilters.push(e[n])}return k};b.prototype.reset=function(){b.SUPER.prototype.reset.call(this);var e;this.filtersPassed=e;this.dedupePingSent=
false;this.oldDedupePingSent=false;this.pingSent=false;this.oldPingSent=false;this._runOnceIfFiltersPassTriggered=e;this.filtersRunTriggered=e;this._runner=e;this.reRunCounter=0;this.detachVariablesChangedListeners()};b.prototype.resetFilters=function(){for(var e=0;e<this.filters.length;e++)this.filters[e].reset()};b.prototype.getParameterByTokenName=function(e){var c=null;if(this.parameters){var k=this.parameters;for(var n=0;n<k.length;n++)if(k[n].token===e)c=k[n]}return c};b.prototype.removeFilter=
function(e){r.removeFromArray(this.filters,e)};var h=0;var B=[];var E={};var F={};b.register=function(e){var c=r.addToArrayIfNotExist(B,e);if(c===-1)e._tagIndex=B.length-1;else e._tagIndex=c;if(e.config.id){var k="Q"+e.config.id;F[k]=e;e.uniqueId=k}else F[e.CLASSPATH]=e};b.getById=function(e){return F[String(e)]};b.prototype.getById=b.getById;b.prototype.unregister=function(e){b.unregister(e||this)};b.prototype.destroy=function(){this.destroyed=true;this.cancel();b.unregister(this)};b.unregister=
function(e){var c=r.removeFromArray(B,e);e._tagIndex=-1};b.getTags=function(){return B};b.getAccessorsMap=function(){return E};b.prototype.getTags=function(){return B};b.prototype.getPageVariables=function(){var e=this.parameters;var c=[];if(e)for(var k=0;k<e.length;k++){var n=this.getVariableForParameter(e[k]);if(this._isVariable(n))r.addToArrayIfNotExist(c,n)}if(this.namedVariables)for(var C in this.namedVariables)r.addToArrayIfNotExist(c,y(this,C));return c};b.prototype.getAccessorString=function(){if(!this._accessorsMapKey){this._accessorsMapKey=
"_"+h++;E[this._accessorsMapKey]=this}return"qubit.opentag.BaseTag.getAccessorsMap()."+this._accessorsMapKey};b.prototype.getVariableForParameter=function(e){var c;var k=this.namedVariables;if(k&&k[e.token])c=y(this,e.token);if(!c)c=w.validateAndGetVariableForParameter(e);return c};b.prototype.printVariablesState=function(){var e=[];var c=w.getAllVariablesWithParameters(this);for(var k=0;k<c.length;k++){var n=c[k].parameter;var C=c[k].variable;var I;if(n&&n.token)I=this.valueForToken(n.token);else I=
C.getRelativeValue(true);var N={name:C.config.name,exists:C.exists(),token:n?n.token:null,value:I,variable:C};e.push(N)}return e};b.prototype._triggerOnLoadTimeout=function(){this.onLoadTimeout()};b.prototype.getId=function(){return this._getUniqueId()};b.prototype._getUniqueId=function(){if(this.config.id)return this.config.id;if(String(this.CLASSPATH).indexOf(G.STANDARD_CS_NS)===0)return this.CLASSPATH.substring(G.STANDARD_CS_NS.length+1);else return this.CLASSPATH+"#"+this.config.name};var m="qubit.tag.forceRunning_";
var l="qubit.tag.disableRunning_";var v="qubit.tag.forceAllToRun";b.prototype.cookieSaysToRunEvenIfDisabled=function(){var e=this._getUniqueId();var c=!!A.get(v);if(!c)c=!!A.get(m+e);return c};b.prototype.setCookieForcingTagToRun=function(){var e=this._getUniqueId();A.set(m+e,"true")};b.setCookieForcingTagsToRun=function(){A.set(v,"true")};b.prototype.setCookieToDisable=function(){var e=this._getUniqueId();A.set(l+e,"true")};b.prototype.rmCookieToDisable=function(){var e=this._getUniqueId();A.rm(l+
e)};b.prototype.disabledByCookie=function(){var e=this._getUniqueId();return!!A.get(l+e)};b.rmCookieForcingTagsToRun=function(){A.rm(v)};b.prototype.rmCookieForcingTagToRun=function(){var e=this._getUniqueId();A.rm(m+e)};b.rmAllDisablingCookies=function(){r.rmCookiesMatching(l)};b.rmAllCookiesForcingTagToRun=function(){r.rmCookiesMatching(m);b.rmCookieForcingTagsToRun()};b.prototype.onVariableChanged=function(e){this.attachVariablesChangedListeners(true);this.events.on("variableChanged",e)};b.prototype._handleVariableChange=
function(e){this.events.call("variableChanged",e);if(!this.isRunning&&this.config.reRunOnVariableChange){if(!isNaN(this.config.reRunLimit))if(this.config.reRunLimit<=this.reRunCounter)return;var c=this.reRunCounter+1;this.reset();this.reRunCounter=c;this.resetFilters();this.runIfFiltersPass()}};b.prototype.attachVariablesChangedListeners=function(e){var c=this.getPageVariables();var k=!!(this.config.reRunOnVariableChange||this.config.observeVariables||e);if(k)for(var n=0;n<c.length;n++){var C=c[n];
C.onValueChanged(this.handleVariableChange,k)}};b.prototype.detachVariablesChangedListeners=function(){var e=this.getPageVariables();for(var c=0;c<e.length;c++){var k=e[c];k.deatchOnValueChanged(this.handleVariableChange)}};b.prototype._markFinished=function(){b.SUPER.prototype._markFinished.call(this);this.attachVariablesChangedListeners()};b.prototype.prepareForRestart=function(e){if(this.config.restartable){b.SUPER.prototype.prepareForRestart.call(this,false);if(!e){var c=this.getFilters();for(var k=
0;k<c.length;k++)c[k].prepareForRestart()}}};b.prototype.restart=function(e){if(this.config.restartable){this.prepareForRestart(e);this.runIfFiltersPass()}};b.prototype.runPostInitialisationSection=function(){if(!this._postInitialisationRun){this._postInitialisationRun=true;if(this.postInitialisationSection)try{this.postInitialisationSection()}catch(e){}}}})();(function(){function b(f){r.setIfUnset(f,b.defaultConfig);if(this.singleton){var q=this.PACKAGE_NAME+"."+this.CLASS_NAME;var d=p.opentag.Utils.getObjectUsingPath(q,
t);if(d.__instance)return d.__instance;d.__instance=this}b.SUPER.call(this,f)}function y(f,q){var d=f.toString();d=d.replace(/\s*function\s*\([\w\s,_\d\$]*\)\s*\{/,"");d=d.substring(0,d.lastIndexOf("}"));d=d.replace(/(["']\s*\+\s*)\s*_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'\s*\)/g,'$1"${$2}"');d=d.replace(/\s*_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'\s*\)(\s*\+\s*["'])/g,'"${$1}"$2');d=d.replace(/(["']\s*\+\s*)\s*_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"\s*\)/g,'$1"${$2}"');d=d.replace(/\s*_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"\s*\)(\s*\+\s*["'])/g,
'"${$1}"$2');d=d.replace(/(\s*)_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'(\s*)\)/g,"$1${$2}$3");d=d.replace(/(\s*)_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"(\s*)\)/g,"$1${$2}$3");d=q.replaceTokensWithValues(d);r.geval(d)}var r=p.opentag.Utils;var z=p.Define;p.Define.clazz("qubit.opentag.LibraryTag",b,p.opentag.BaseTag);b.defaultConfig={vendor:null,imageUrl:null,description:"",async:false,isPrivate:false,upgradeable:true,html:"",parameters:[],prePostWindowScope:false};b.prototype.pre=function(){};
b.prototype.post=function(){};b.prototype.before=function(){b.SUPER.prototype.before.call(this);try{var f=this.config;if(f&&f.pre)if(typeof f.pre==="function")this.pre=f.pre;else{var q=this.replaceTokensWithValues(String(f.pre));this.pre=r.expressionToFunction(q).bind(this)}if(this.config.prePostWindowScope&&this.pre!==b.prototype.pre&&this.pre.toString)y(this.pre,this);else this.pre()}catch(d){return true}return false};b.prototype.after=function(f){b.SUPER.prototype.after.call(this,f);try{var q=
this.config;if(q&&q.post)if(typeof q.post==="function")this.post=q.post;else{var d=this.replaceTokensWithValues(String(q.post));this.post=r.expressionToFunction(d).bind(this)}if(this.config.prePostWindowScope&&this.post!==b.prototype.post&&this.post.toString)y(this.post,this);else this.post(f)}catch(w){}};b.define=function(f,q){f=f.replace(/^[\.]+/g,"").replace(/[\.]+$/g,"").replace(/\.+/g,".");f=p.Define.vendorsSpaceClasspath(f);var d={};if(q.getDefaultConfig)d=q.getDefaultConfig();var w=q.CONSTRUCTOR;
var x={};for(var A in q)if(A!=="config")x[A]=q[A];var G=function(E){E=E||{};E=r.overrideFromLeftToRight(d,E);var F=p.opentag.LibraryTag.call(this,E);if(w)w.call(this,E);if(F)return F};var h=p.opentag.Utils.defineWrappedClass(f,b,x,K,G);var B=z.STANDARD_VS_NS+".";if(f.indexOf(B)!==0)r.namespace(B+f,h);return h};b.getLibraryByClasspath=function(f){return r.getObjectUsingPath(f,p.Define.getVendorSpace())}})();(function(){function b(r){var z={url:null,html:"",locationPlaceHolder:"NOT_END",locationObject:"BODY",
async:true};y.setIfUnset(r,z);b.SUPER.call(this,r)}var y=p.opentag.Utils;p.Define.clazz("qubit.opentag.CustomTag",b,p.opentag.LibraryTag)})();(function(){var b=p.opentag.Utils;var y=p.opentag.filter.BaseFilter;var r=function(){};p.Define.clazz("qubit.opentag.Tags",r);r.getById=function(f){return p.opentag.BaseTag.getById(String(f))};r.getAllTagsByState=function(){return p.opentag.Container.getAllTagsByState(r.getTags())};r.findTagByName=function(f){var q=this.getTags();var d=[];for(var w=0;w<q.length;w++)if(q[w].config.name===
f)d.push(q[w]);return d};r.findTagByMatch=function(f){var q=this.getTags();var d=[];for(var w=0;w<q.length;w++)if(q[w].config.name.match(f))d.push(q[w]);return d};r.findTagContainers=function(f){var q=r.getContainers();var d=[];for(var w=0;w<q.length;w++){var x=q[w].tags;for(var A in x)if(x[A]===f){d.push(q[w]);break}}return d};r.getTags=function(){return p.opentag.BaseTag.getTags()};r.resetAllTags=function(f){var q=r.getTags();for(var d=0;d<q.length;d++){q[d].reset();if(!f)q[d].resetFilters()}};
r.getContainersPageVariables=function(){var f=r.getContainers();var q=[];for(var d=0;d<f.length;d++)q=q.concat(f.getPageVariables());return q};r.getAllPageVariables=function(){var f=r.getTags();var q=[];for(var d=0;d<f.length;d++)q=q.concat(f[d].getPageVariables());return q};r.cancelAll=function(){var f=r.getTags();for(var q=0;q<f.length;q++)f[q].cancel()};r.resetAll=function(f){var q=r.getTags();for(var d=0;d<q.length;d++){q[d].reset();if(!f)q[d].resetFilters()}};r.getPageVariableByName=function(f){var q=
r.getAllPageVariables();var d=[];for(var w=0;w<q.length;w++)if(q[w].config.name===f)d.push(q[w]);return d};r.getLoadTime=function(f){var q=f.beforeRun;var d=f.runIsFinished;if(isNaN(d))return{tag:f,loadTime:null};else return{tag:f,loadTime:d-q}};r.getLoadTimes=function(f){var q=[];if(f instanceof p.opentag.BaseTag){q.push([r.getLoadTime(f[x])]);return q}f=f||r.getTags();var d=f instanceof Array;if(d)for(var w=0;w<f.length;w++){if(f[w]instanceof p.opentag.BaseTag)q.push(r.getLoadTime(f[w]))}else for(var x in f)if(f[x]instanceof
p.opentag.BaseTag)q.push(r.getLoadTime(f[x]));return q};r.forceAllContainersAndTagsToRunIfDisabled=function(){p.opentag.Container.setCookieForDisabledContainersToRun();p.opentag.BaseTag.setCookieForcingTagsToRun()};r.rmAllContainersAndTagsForcingFlags=function(){p.opentag.Container.rmCookieForDisabledContainersToRun();p.opentag.BaseTag.rmAllCookiesForcingTagToRun()};r.getContainers=function(){return p.opentag.Container.getContainers()};r.findAllTagsByClassPath=function(f){var q=(new Date).valueOf();
var d=[];var w=[];try{w.push(p.opentag.CustomTag);w.push(p.opentag.LibraryTag)}catch(h){}var x=r.getTags();for(var A=0;A<x.length;A++){var G=x[A];if(b.indexInArray(w,G)<0&&G.PACKAGE_NAME.indexOf(f)===0)d.push(G)}return d};r.findAllTags=function(f,q){var d=p.opentag.BaseTag;var w;var x=[];var A=(new Date).valueOf();try{x.push(p.opentag.CustomTag);x.push(p.opentag.LibraryTag)}catch(G){}w=r.findAllInstances(f,d,x,q);return w};var z=function(f,q,d,w){var x=[];if(typeof f==="string")f=b.getObjectUsingPath(f);
if(f){var A={objectsOnly:true};if(w)A.maxDeep=true;var G=function(h,B,E,F){if(q(h)){for(var m=0;m<d.length;m++)if(d[m]===h)return true;b.addToArrayIfNotExist(x,h);return true}return false}.bind(this);b.traverse(f,G,A)}return x};r.findAllInstances=function(f,q,d,w){var x=function(A){return A instanceof q};return z(f,x,d,w)};r.findAllInheriting=function(f,q,d,w){var x=function(A){return A.prototype instanceof q};return z(f,x,d,w)};r.findAllFilters=function(f,q){var d=[];try{d.push(p.opentag.filter.Filter);
d.push(p.opentag.filter.URLFilter)}catch(w){}return r.findAllInheriting(f,y,d,q)}})();L.cookie={};L.cookie.PageView={};L.cookie.PageView.update=function(){var b;var y;y=function z(){return Math.floor(1+Math.random()*65536).toString(36).substring(1)};if(!window.__pageViewId__){b=(new Date).getTime().toString(36);window.__pageViewId__=b+y()+y()+y()}return window.__pageViewId__};L.html.PostData=function(b,y,r,z){var f;var q;var d;var w;var x;var A;var G;var h;var B;var E;E=2;B=5E3;G=false;h=function(){if(E>
0)setTimeout(function(){if(!G){E-=1;f()}},B)};q=navigator.userAgent.toLowerCase();d=q.indexOf("msie")!==-1;w=q.indexOf("msie 9")!==-1;x=q.indexOf("msie 7")!==-1||q.indexOf("msie 6")!==-1;A=("https:"===document.location.protocol?"https:":"http:")+b;r=r||"POST";f=function(){var F;try{F=null;try{F=new XMLHttpRequest}catch(m){}if(F&&!d)F.open(r,A,true);else if(typeof XDomainRequest!=="undefined"){F=new XDomainRequest;F.open(r,A)}else F=null;try{F.withCredentials=false}catch(m){}if(F.setRequestHeader)if(z)F.setRequestHeader("Content-Type",
z);else F.setRequestHeader("Content-Type","text/plain;charset\x3dUTF-8");F.onload=function(){G=true};F.onreadystatechange=function(){};F.ontimeout=function(){};F.onerror=function(){};F.onprogress=function(){};F.send(y)}catch(m){try{try{L.html.fileLoader.load(A)}catch(l){if(window.console&&window.console.log)window.console.log(m)}}catch(l){}}};if(x){L.html.fileLoader.load(A);return}else f()};(function(){function b(){}function y(z,f){var q={};q.clientId=""+f.clientId;q.containerId=""+z.getContainerId();
q.classpath=""+z.PACKAGE_NAME;q.opentagStats=true;if(z.sentPing)q.containerLoad=false;else{z.sentPing=(new Date).valueOf();q.containerLoad=true}q.isS3=false;q.pageViewId=L.cookie.PageView.update();q.tags=[];return q}var r="text/plain;charset\x3dUTF-8";p.Define.clazz("qubit.opentag.Ping",b);b.prototype.sendErrors=function(z,f){};b.getPingID=function(z){if(z.config.id)return z.config.id;var f=z.PACKAGE_NAME.lastIndexOf(".");if(f!==-1)return z.PACKAGE_NAME.substring(f+1);else return z.PACKAGE_NAME};
b.prototype.send=function(z,f){var q=z.config;var d=y(z,q);var w=d.tags;var x=q.pingServerUrl;for(var A=0;A<f.length;A++){var G=f[A].tag;var h=f[A].loadTime;if(h===null||isNaN(h))continue;var B={};var E=b.getPingID(G);if(!G.pingSent&&E&&h!==null)if(E!==undefined){B.tagId=E;B.loadTime=h;B.fired=true;w.push(B);G.pingSent=true}else;else if(G.pingSent);else if(h===null);}if(x&&(w.length>0||d.containerLoad)){var F=J.stringify(d);var m="//"+x;L.html.PostData(m,F,"POST",r)}else{if(!w.length);if(!x);}};b.prototype.sendDedupe=
function(z,f){var q=z.config;var d=y(z,q);var w=q.pingServerUrl;var x=d.tags;for(var A=0;A<f.length;A++){var G=f[A];var h=b.getPingID(G);var B={};if(h===undefined);else if(!G.dedupePingSent){B.tagId=""+h;B.fired=false;B.loadTime=0;x.push(B);G.dedupePingSent=true}}if(w&&(x.length>0||d.containerLoad)){var E=J.stringify(d);var F="//"+w;L.html.PostData(F,E,"POST",r)}else{if(!x.length);if(!w);}}})();L.cookie.SimpleSessionCounter={};L.cookie.SimpleSessionCounter._cookieName="_qst_s";L.cookie.SimpleSessionCounter._sessionCookie=
"_qsst_s";L.cookie.SimpleSessionCounter.update=function(b){var y;var r;var z;var f=30;y=p.Cookie.get(L.cookie.SimpleSessionCounter._cookieName);r=p.Cookie.get(L.cookie.SimpleSessionCounter._sessionCookie);if(!y)y=1;else{y=parseInt(y,10);if(!r||parseInt(r,10)<(new Date).getTime()-f*60*1E3)y+=1}p.Cookie.set(L.cookie.SimpleSessionCounter._cookieName,y,365,b);p.Cookie.set(L.cookie.SimpleSessionCounter._sessionCookie,(new Date).getTime().toString(),null,b);return y};(function(){function b(x){if(x)if(x.alphabet){this.alphabet=
x.alphabet;this.dict={};for(var A=0;A<this.alphabet.length;A++)this.dict[this.alphabet[A]]=A}else{this.alphabet=r;this.dict=q}}function y(x,A){for(var G in A)if(x===A[G])return G;return null}var r=[];var z=Math.pow(2,8);for(var f=0;f<z;f++)r.push(String.fromCharCode(f));var q={};for(var d=0;d<r.length;d++)q[r[d]]=d;var w=p.Define;w.clazz("qubit.compression.LZW",b);b.prototype.encode=function(x){var A=this.alphabet.length;var G={};var h=[];var B=0;var E=x.charAt(B++);var F;for(var m=this.dict;!!(F=
x.charAt(B++));){var l=E+F;if(m.hasOwnProperty(l)||G.hasOwnProperty(l))E=l;else{var v=m.hasOwnProperty(E)?m[E]:G[E];if(v===undefined)throw"Dictionary base is to small for those contents: "+E;h.push(v);G[l]=A++;E=F}}if(E!=="")h.push(G.hasOwnProperty(E)?G[E]:m[E]);return h};b.prototype.decode=function(x){var A=this.dict;var G=this.alphabet.length;var h;var B={};var E=y(x[0],A);var F=E;var m=[E];for(var l=1;l<x.length;l++){var v=x[l];h=y(v,A);if(h===null){if(B.hasOwnProperty(v))h=B[v];if(h===null)h=
F+E}m.push(h);E=h.charAt(0);B[G++]=F+E;F=h}return m.join("")}})();(function(){function b(m){var l=0;var v=m<0;if(v)m=-m;var e="";var c=true;do{l=m%B;if(c){e=A[h[l]];c=false}else e=h[l]+e;m=(m-l)/B}while(m>0);if(v)return"-"+e;return e}function y(m){var l=0;var v=0;var e=true;for(var c=0;c<m.length;c++){var k=m.charAt(m.length-1-c);if(e){e=false;k=z.charAt(w[k])}l+=q[k]*Math.pow(B,v++)}return l}function r(m){}var z="abcdefghijklmnopqrstuvwxyz"+"0123456789"+"'%./:\x3c\x3e?[";var f="ABCDEFGHIJKLMNOPQRSTUVWXYZ"+
"*!-+()@{|}"+'"]^_`~$\x26#';var q={};for(var d=0;d<z.length;d++)q[z.charAt(d)]=d;var w={};for(var x=0;x<z.length;x++)w[f.charAt(x)]=x;var A={};for(var G=0;G<z.length;G++)A[z.charAt(G)]=f.charAt(G);var h=z.split("");var B=h.length;var E=new p.compression.LZW({});var F=p.Define;F.clazz("qubit.compression.Compressor",r);r.prototype.compress=function(m,l){var v=(l||E).encode(m);var e=[];for(var c=0;c<v.length;c++)e.push(String.fromCharCode(v[c]));return e.join("")};r.prototype.compressAnsi=function(m,
l){var v=(l||E).encode(m);var e=[];for(var c=0;c<v.length;c++){var k=b(v[c]);e.push(k)}return e.join("")};r.prototype.decompressAnsi=function(m,l){var v=[];var e="";for(var c=0;c<m.length;c++){var k=m.charAt(c);if(w.hasOwnProperty(k)){var n=e+k;e="";n=y(n);v.push(n)}else e+=k}return(l||E).decode(v)};r.prototype.decompress=function(m,l){var v=[];for(var e=0;e<m.length;e++)v.push(m.charCodeAt(e));return(l||E).decode(v)}})();(function(){function b(v){var e=[];for(var c=0;c<v.length;c++){var k=q(v[c][0]);
e.push([new RegExp(k,"g"),"*"+v[c][1]])}return e}function y(v,e){for(var c=0;c<e.length;c++)if(e[c][1]===v)return e[c][0];return null}function r(v){this._regexDefs=h;this._defs=G;if(v)if(v.definitions){this._regexDefs=b(v.definitions);this._defs=v.definitions}}function z(v,e){var c=[];for(var k=0;k<v.length;k++){var n=true;if(e)n=v.charCodeAt(k)<=e;var C=A.cookieAlphabetMap.hasOwnProperty(v.charAt(k));if(n&&!C)c.push("*"+v.charCodeAt(k)+".");else c.push(v.charAt(k))}return c.join("")}function f(v,
e){e=e.replace(/@/g,"@@");var c=[];var k=0;for(var n=0;k<v.length;k++){var C=v[k][0];var I=new RegExp(q(C),"g");var N=e.replace(I,"@"+n+"-");if(N!==e){c.push(v[k][0]);n++;e=N}}return[e,c]}function q(v){return v.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function d(v){var e={};var c="";for(var k=0;k<v.length;k++){var n=v.charAt(k);if(!E[n]){if(isNaN(e[c]))e[c]=v.split(c).length-1;c=""}else c+=n}var C=[];for(var I in e)if(e.hasOwnProperty(I)){var N=e[I];if(N>=l&&I.length>=m)C.push([I,N])}C=C.sort(function(O,
P){if(O[0].length===P[0].length)return 0;if(P[0].length>O[0].length)return 1;else return-1});return C}function w(v,e){if(!e||e.length===0||!v)return v;var c="";var k=false;var n=false;var C="";for(var I=0;I<v.length;I++){var N=v.charAt(I);if(N==="@"||k||n)if(k||n){k=false;if(N==="@")c+="@";else if(!isNaN(+("-"+N))){n=true;C=C+N}else if(n){if(e&&N==="-"&&e[+C])c+=e[+C];else c+="@"+C+N;C="";n=false}else c+="@"+N}else k=true;else c+=N}if(C)c+="@"+C;if(k)c+="@";return c}var x=p.Define;var A=p.Cookie;
var G=[['","referrer":[{"url":"http://',"1-"],['","referrer":[{"url":"https://',"2-"],[',"referrer":[{"url":"http://',"3-"],[',"referrer":[{"url":"https://',"4-"],[',"sessionStartTime":',"5-"],["www.google.co.uk","6-"],["www.google.","7-"],['"sessionStartTime":',"8-"],['"landing":"',"9-"],["http%3A%2F%2Fwww","10-"],['"landing":',"L"],['"time":',"A"],['"pageViews":',"P"],['"sessionCount":',"B"],['"referrer":',"R"],['"url":"http://www.',"J"],['"url":"https://www.',"M"],['"url":"',"I"],['"url":',"U"],
["http://www.","W"],["https://www.","V"],["%2Fen%2Ftsuk%2F","K"],['"sessionLandingPage":',"F"],["http%3A%2F%2F","D"],["http://","H"],["https://","X"],['""',"O"],['",',"Y"],['":{}}',"z"],["\x3c","S"],["\x3e","G"],["[","Z"],["]","E"],["{","a"],["}","b"],["(","c"],[")","d"],["!","e"],["#","f"],["$","g"],["!","q"],["'","i"],[":","j"],["?","k"],["^","x"],["`","m"],["|","n"],["~","o"],["%","v"],[",","C"]];var h=b(G);x.clazz("qubit.opentag.compression.Encoder",r);r.prototype.encode=function e(c,k){var n=
c.replace(/\*/g,"**");var C=d(n);for(var I=0;I<this._regexDefs.length;I++){var N=this._regexDefs[I];n=n.replace(N[0],N[1])}n=n.replace(/;/g,"*-");n=n.replace(/&/g,"*.");n=n.replace(/\\/g,"*/");n=n.replace(/=/g,"*+");n=n.replace(/\n/g,"*N");n=n.replace(/ /g,"*_");n=n.replace(/\t/g,"*T");n=n.replace(/"/g,"*Q");var O=d(n);O.concat(C);var P=f(O,n);var R=P[1];var T=R.length>0;if(T)n=P[0];if(!k)n=z(n);else n=z(n,k);if(T)return"Y"+R.join("*")+"@"+n;else return"N"+n};var B="abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ+_.";
var E={};for(var F=0;F<B.length;F++)E[B.charAt(F)]=true;var m=4;var l=2;r.prototype.decode=function(e){var c=null;if(e.charAt(0)==="N")e=e.substring(1);else if(e.charAt(0)==="Y"){var k=e.indexOf("@");if(k>=0){c=e.substring(1,k);c=c.split("*");e=e.substring(k+1);e=w(e,c)}}var n="";var C=false;var I=false;var N="";for(var O=0;O<e.length;O++){var P=e.charAt(O);if(P==="*"||C||I)if(C||I){C=false;if(!isNaN(+("-"+P))){N=N+P;I=true}else if(I){if(P===".")n+=String.fromCharCode(+N);else if(P==="-"&&y(N+"-",
this._defs))n+=y(N+"-",this._defs);else n+="*"+N+P;N="";I=false}else if(P==="*")n+="*";else if(P==="-")n+=";";else if(P==="/")n+="\\";else if(P===".")n+="\x26";else if(P==="+")n+="\x3d";else if(P==="N")n+="\n";else if(P==="_")n+=" ";else if(P==="T")n+="\t";else if(P==="Q")n+='"';else if(y(P,this._defs)!==null){var R=y(P,this._defs);n+=R}else n+="*"+P}else C=true;else n+=P}if(N)n+="*"+N;if(C)n+="*";return n}})();(function(){function b(f){this.testBinary=false;this.binSupported=z;if(f){this.compressor=
new p.compression.Compressor;this.encoder=new p.opentag.compression.Encoder({})}}var y=p.Define;var r=p.Cookie;var z=false;y.clazz("qubit.opentag.compression.CookieCompressor",b);b.prototype.compress=function(f,q){if(typeof f!=="string"||f==="")return f;var d=this.encoder.encode(f);var w;if(this.binSupported||this.testBinary){var x=this.compressor.compress(d);w='"B'+this.encoder.encode(x,128)+'"';r.set("__qtag_test_bin__",w,undefined,undefined,true);var A=r.get("__qtag_test_bin__",true);r.rm("__qtag_test_bin__");
if(A&&A!==w)w=null}var G;var h=this.encoder.encode(this.compressor.compressAnsi(d));if(!q&&d.length<=h.length)G="E"+d;else G="C"+h;if(w&&w.length<G.length)return w;else return G};b.prototype.decompress=function(f){if(typeof f!=="string"||f==="")return f;if(f.charAt(0)==='"')f=f.substring(1,f.length-1);var q=f.charAt(0);f=f.substring(1);switch(q){case "E":return this.encoder.decode(f);case "C":var d=this.compressor.decompressAnsi(this.encoder.decode(f));return this.encoder.decode(d);case "B":var w=
this.compressor.decompress(this.encoder.decode(f));return this.encoder.decode(w);default:throw"This code is not supported! Code: "+q;}}})();(function(){var b=p.Cookie;var y=p.opentag.Utils;var r=function(){};p.Define.clazz("qubit.opentag.Session",r);var z=new p.opentag.compression.CookieCompressor({});r.readCompressedCookie=function(f){var q=b.get(f,true);return z.decompress(q)};r.setupSession=function(f){var q=f.config;var d;var w;var x;var A;var G;var h;d={};d.sessionCount=L.cookie.SimpleSessionCounter.update(q.cookieDomain);
G="qtag_"+f.getContainerId();var B="x_qtag_"+f.getContainerId();x=b.get(G);var E=!!x;if(x===null){x=b.get(B,true);x=z.decompress(x)}if(x)try{x=J.parse(x)}catch(m){x={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}}}else x={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}};h=(new Date).getTime();if(d.sessionCount!==parseInt(x.sc,10)){x.sessionStartTime=h;x.sc=d.sessionCount;x.sessionCount+=1;x.referrer.push({url:r.getReferrer(),
landing:y.getUrl().substring(0,300),time:h});x.sessionLandingPage=y.getUrl().substring(0,300)}else if(r.isReferrerDifferent())if(!r.referrerIsSameAsPrevious(x.referrer,h,30*60*1E3)){x.referrer.push({url:r.getReferrer(),landing:y.getUrl().substring(0,300),time:h});x.sessionLandingPage=y.getUrl().substring(0,300);x.sessionStartTime=h;x.sessionCount+=1}d.sessionCount=x.sessionCount;d.sessionStartTime=x.sessionStartTime;d.pageStartTime=h;x.pageViews+=1;d.pageViews=x.pageViews;d.sessionLandingPage=x.sessionLandingPage;
d.referrer=x.referrer;if(d.referrer.length>5)d.referrer.splice(2,d.referrer.length-5);A=J.stringify(x);for(w=0;z.compress(A).length>q.maxCookieLength&&w<5;){if(x.referrer.length>=3)x.referrer.splice(2,1);else if(x.referrer.length===2)x.referrer=[x.referrer[0]];else if(x.referrer.length===1)x.referrer=[];A=J.stringify(x);w+=1}d.referrer=x.referrer;if(E)b.rm(G);var F=z.compress(A);b.rm(B);if(q.maxCookieLength>0)b.set(B,F,365,q.cookieDomain,true);d.setVariable=function(m,l,v){var e=!!v?v:0;x.__v[m]=
[l,e];var c=z.compress(J.stringify(x));if(q.maxCookieLength>0)b.set(B,c,365,q.cookieDomain,true);else b.rm(B)};d.getCookie=function(m,l){var v=b.get(m,true);if(v&&(l||m.indexOf("x_")===0))try{v=z.decompress(v)}catch(e){}else if(v!==null)v=b.decode(v);return v};d.getVariable=function(m){var l;var v;var e;l=x.__v[m];if(l){v=l[1];if(v===0||v>(new Date).getTime())return l[0]}return null};d.on=function(m,l,v){if(l.attachEvent)l.attachEvent("on"+m,v);else if(l.addEventListener)l.addEventListener(m,v,false)};
d.getTagCookie=function(){return r.readCompressedCookie(B)};r.lastSession=d;return d};r.referrerIsSameAsPrevious=function(f,q,d){var w;var x;var A;if(f.length>0){w=r.getReferrer();x=y.getUrl().substring(0,300);A=f[f.length-1];return A.url===w&&A.landing===x&&A.time+d>q}return false};r.isReferrerDifferent=function(){var f;var q;var d;d=r.getReferrer();f=d.indexOf("://");if(f===-1)return true;f+=3;try{if(d.substring(f).indexOf(r.getDomain())!==0)return true;return false}catch(w){return true}};r.getReferrer=
function(){if(document.referrer)return document.referrer.substring(0,300);return"direct"};r.getDomain=function(){return document.location.host}})();(function(){function b(){}var y=p.opentag.LibraryTag;var r=p.Define;b.library=function(){return y.define.apply(y,arguments)};b.libraryRef=function(){return y.getLibraryByClasspath.apply(y.getLibraryByClasspath,arguments)};r.namespace("qubit.Quick",b)})();(function(){function b(m){this.runQueue=[];this.tags=[];this.config={cookieDomain:"",maxCookieLength:1E3,
gzip:true,delayDocWrite:false,clientId:"",name:"",tellLoadTimesProbability:null,pingServerUrl:null,trackSession:null,disabled:false,containerId:"",scanTags:false,noPings:false,restartable:true};this.ignoreTagsState=false;if(m){this.setConfig(m);if(!m.name)this.config.name="Cont-"+G++;b.register(this);if(b.NO_PINGS)this.config.noPings=true;this.ping=new p.opentag.Ping(this.config);this._sendPingsTrigger=this.sendPings.bind(this);if(m.init)try{m.init.call(this,m)}catch(v){}var l=this;this._tagLoadedHandler=
function(v){if(l._containerAlreadySentPings){l.sendPingsNotTooOften();if(v.success);}}}this.events=new p.Events({});return this}function y(m,l,v,e){if(m[v]){e[v]=e[v]+1||1;v+="("+e[v]+")"}m[v]=l}var r=p.opentag.Utils;var z=p.opentag.filter.BaseFilter;var f=p.opentag.filter.Filter;var q=p.opentag.BaseTag;var d=p.opentag.Timed;var w=p.opentag.Tags;var x=p.opentag.Session;var A=p.Cookie;var G=1;try{window.opentag_consentGiven=function(){b.consentIsGiven=true;var m=b.getContainers();for(var l=0;l<m.length;l++)try{m[l].run()}catch(v){}}.bind(this)}catch(m){}p.Define.clazz("qubit.opentag.Container",
b);var h=[];var B="restart";b.prototype.EVENT_TYPES={RESTART_EVENT:B};b.register=function(m){r.addToArrayIfNotExist(h,m)};b.prototype.isTellingLoadTimes=function(){var m=this.config.tellLoadTimesProbability;if(m===null)m=0;return m>Math.random()};b.prototype.destroy=function(m){this.destroyed=true;this.unregister();for(var l=0;l<this.tags.length;l++){var v=this.tags[l];if(v.owningContainer===this){v.owningContainer=null;if(m&&v instanceof q)v.destroy()}}this.tags=[]};b.destroyAll=function(m){var l=
b.getContainers();for(var v=0;v<l.length;v++)l[v].destroy(m)};b.findContainersByName=function(m){var l=b.getContainers();var v=[];for(var e=0;e<l.length;e++)if(l[e].config.name===m)v.push(l[e]);return v};b.getById=function(m){var l=b.getContainers();for(var v=0;v<l.length;v++)if(l[v].getContainerId()===m)return l[v];return null};b.prototype.unregister=function(m){b.unregister(this,m)};b.unregister=function(m,l){r.addToArrayIfNotExist(h,m);var v=r.removeFromArray(h,m);if(l){for(var e=0;e<m.tags.length;e++){var c=
m.tags[e];if(c.owningContainer===m){c.owningContainer=null;if(c instanceof q)c.unregister()}}m.tags=[]}if(!v||v.length===0);};b.prototype.hasConsent=function(){return A.get("qubitconsent")==="Accepted"};b.prototype.register=function(m){b.register(m||this)};b.getContainers=function(){return h};b.prototype.getContainers=function(){return b.getContainers()};b.prototype.onTagRegistered=function(m){};b.prototype.registerTag=function(m){if(m.owningContainer!==null)return false;else{this.tags.push(m);m.owningContainer=
this;m.onAfter(this._tagLoadedHandler);try{this.onTagRegistered(m)}catch(l){}}return true};b.prototype.unregisterTag=function(m){if(m.owningContainer===this)m.owningContainer=null;for(var l=0;l<this.tags.length;)if(this.tags[l]===m)this.tags.splice(l,1);else l++};b.prototype.registerTags=function(m){for(var l=0;l<m.length;l++)this.registerTag(m[l])};b.prototype.setConfig=function(m){for(var l in m)this.config[l]=m[l]};b.prototype.run=function(){this.runTags({command:"runOnceIfFiltersPass"})};b.prototype.runWithoutFilters=
function(){this.runTags({command:"run"})};b.prototype.containerScriptLoadedSynchronously=function(){var m;var l;var v;var e;var c;e=document.getElementsByTagName("script");for(m=0,l=e.length;m<l;m+=1){v=e[m];c=v.getAttribute("src");if(!!c&&c.indexOf(""+this.config.clientId+"-"+this.getContainerId()+".js")>0)return v.getAttribute("async")===null&&(v.getAttribute("defer")===false||v.getAttribute("defer")===""||v.getAttribute("defer")===null)}return true};b.prototype.prepareSessionIfNeeded=function(){var m=
this.config.trackSession;if(m!==true&&m!==false)for(var l=0;l<this.tags.length;l++){var v=this.tags[l];v.resolveAllDynamicData();var e=v.getFilters();for(var c=0;c<e.length;c++){var k=e[c];if(k instanceof f&&k.isSession()){this.trackSession=true;break}}if(this.trackSession)break}else this.trackSession=m;if(b.TRACK_SESSION)this.trackSession=true;if(this.trackSession)this.session=x.setupSession(this);if(this.session);};b.runtimeCounter=b.runtimeCounter||1;b.prototype.runTags=function(m,l){if(this.destroyed)throw"Container has been destroyed.";
if(!l)if(b.LOCKED||r.global().QUBIT_CONTAINERS_LOCKED)return;if(this.onBeforeRun)try{this.onBeforeRun()}catch(N){}var v=!this.containerScriptLoadedSynchronously();var e="runIfFiltersPass";if(m&&m.command)e=m.command;this.runningStarted=(new Date).valueOf();if(this.config.scanTags)if(!this._scanned){this.scanForTags();this._scanned=(new Date).valueOf()}this.prepareSessionIfNeeded();var c=this.getTagsInOrder();var k="___otctnmk"+b.runtimeCounter++;for(var n=0;n<c.length;n++)try{var C=c[n];if(this.includedToRun(C))this._checkAndRun(C,
e,v,k)}catch(N){}d.setTimeout(function(){this.sendPingsNotTooOften()}.bind(this),3100);this.waitForAllTagsToFinish();for(var I=0;I<c.length;I++){c[I]._runtimeMarkers[k]=undefined;delete c[I]._runtimeMarkers[k]}};b.prototype.getTagsInOrder=function(){var m=[];for(var l=0;l<this.tags.length;l++){var v=this.tags[l];var e=v.config.priority;if(+e>0){var c=0;for(var k=0;k<m.length;k++){var n=m[k];if(n){var C=+n.config.priority;if(C>0&&C>e)c++;else break}}m.splice(c,0,v)}else m.push(v)}return m};b.prototype._checkAndRun=
function(m,l,v,e){if(!m._runtimeMarkers[e])m._runtimeMarkers[e]=true;else return;var c=m.resolveDependencies();if(c.length>0)for(var k=0;k<c.length;k++)this._checkAndRun(c[k],l,v,e);this._tagRunner(m,l,v)};b.prototype._tagRunner=function(m,l,v){try{if(this.includedToRun(m)){if(v)m.forceAsynchronous=true;if(this.config.delayDocWrite)m.delayDocWrite=true;m.session=m.session||this.session;m[l]()}}catch(e){}};b.prototype.getContainerId=function(){if(this.config.containerId)return this.config.containerId;
else{if(this._pkgName)return this._pkgName;var m=this.PACKAGE_NAME.split(".");m=m[m.length-1];this._pkgName=m;return m}};b.prototype.includedToRun=function(m){if(!m)return false;var l=m.config;if(l.inactive)return false;if(l.disabled)if(!m.cookieSaysToRunEvenIfDisabled())return false;if(m.disabledByCookie())return false;var v=b.consentIsGiven||!l.needsConsent||this.hasConsent();var e=m.state===q.prototype.STATE.INITIAL;return this.ignoreTagsState||v&&e};b.prototype.scanForTags=function(m,l){if(m)this.tags=
[];var v;if(l&&typeof l==="object")v=this.findAllTags(l);else v=this.findAllTagsByClassPath();this.registerTags(v);return v};b.prototype.findAllTags=function(m,l){m=m||this.tagsPackageName||this.PACKAGE_NAME;return w.findAllTags(m,l)};b.prototype.findAllTagsByClassPath=function(m){m=m||this.PACKAGE_NAME;return w.findAllTagsByClassPath(m)};b.prototype.findAllFilters=function(m,l){m=m||this.tagsPackageName||this.PACKAGE_NAME;return w.findAllFilters(m,l)};b.prototype.waitForAllTagsToFinish=function(){if(this._waitForAllTagsToFinishWaiting)return;
if(!this._lastWaited)this._lastWaited=(new Date).valueOf();var m=(new Date).valueOf()-this._lastWaited>15*1E3;var l=this.allTagsFinished()||m;if(!this._showFinishedOnce&&l){this._lastWaited=null;if(m);this._showFinishedOnce=true;this.runningFinished=(new Date).valueOf();this._containerAlreadySentPings=(new Date).valueOf();this.sendPingsNotTooOften();if(this.onTagsInitiallyRun)this.onTagsInitiallyRun()}else if(!l){this._waitForAllTagsToFinishWaiting=true;this._showFinishedOnce=false;d.setTimeout(function(){this._waitForAllTagsToFinishWaiting=
false;this.waitForAllTagsToFinish()}.bind(this),100)}else;};b.prototype.onTagsInitiallyRun=M;b.prototype.resetAllTags=function(m){for(var l=0;l<this.tags.length;l++){this.tags[l].reset();if(!m)this.tags[l].resetFilters()}};b.prototype._prepareTagsToRestart=function(m){for(var l=0;l<this.tags.length;l++)this.tags[l].prepareForRestart(m)};b.prototype.reset=function(m,l){this.runningFinished=undefined;this._waitForAllTagsToFinishWaiting=undefined;this.runningStarted=undefined;this._showFinishedOnce=
undefined;if(!m)this.resetAllTags(l)};b.prototype.onRestart=function(m){this.events.on(B,m)};b.prototype.restart=function(m,l){if(this.config.restartable){this.events.call(B,this);this.reset(true,true);if(!m)this._prepareTagsToRestart(l);this.run()}};b.restartAll=function(m,l){var v=b.getContainers();for(var e=0;e<v.length;e++)try{v[e].restart(m,l)}catch(c){log.ERROR("Restart failed for container "+v[e].config.name,c)}};b.resetAll=function(m,l){var v=b.getContainers();for(var e=0;e<v.length;e++)try{v[e].reset(m,
l)}catch(c){log.ERROR("Reset failed for container "+v[e].config.name,c)}};b.prototype.sendPingsNotTooOften=function(){this._sndLck=this._sndLck||{};d.runIfNotScheduled(this._sendPingsTrigger,2E3,this._sndLck)};b.prototype.sendPings=function(){if(this.config.noPings)return;var m;if(this.isTellingLoadTimes()){var l=this.getAllTagsByState();var v=[];if(l.run)v=w.getLoadTimes(l.run);this.lastPingsSentTime=(new Date).valueOf();this.ping.send(this,v);v=w.getLoadTimes();var e=[];for(m=0;m<v.length;m++){var c=
v[m].tag;if(c.config.dedupe&&c.sendDedupePing)e.push(c)}if(e.length>0){this.lastDedupePingsSentTime=(new Date).valueOf();this.ping.sendDedupe(this,e)}if(l.other){v=w.getLoadTimes(l.other);var k=[];for(m=0;m<v.length;m++)k.push(v[m]);if(k.length>0)this.ping.send(this,k)}if(l.awaiting){v=w.getLoadTimes(l.awaiting);var n=[];for(m=0;m<v.length;m++)n.push(v[m]);if(n.length>0)this.ping.send(this,n)}}else this.ping.send(this,[])};b.prototype.getAllTagsByState=function(){return b.getAllTagsByState(this.tags)};
b.getAllTagsByState=function(m){var l=null;var v=null;var e=null;var c=null;var k=null;var n=null;var C={};var I=q.prototype.STATE.EXECUTED_WITH_ERRORS;for(var N=0;N<m.length;N++){var O=m[N];if(O instanceof q){var P=O.config.name;if(O.scriptExecuted>0){l=l||{};y(l,O,P,C)}else if(O.locked){n=n||{};y(n,O,P,C)}else if(O.scriptExecuted<0||O.state>=I){c=c||{};y(c,O,P)}else if(O.filtersState()===z.state.SESSION||O.filtersState()>0){e=e||{};y(e,O,P,C)}else if(O.config.needsConsent){k=k||{};y(k,O,P,C)}else{v=
v||{};y(v,O,P,C)}}}return{run:l,failed:c,awaiting:e,consent:k,locked:n,other:v}};b.prototype.allTagsFinished=function(){for(var m=0;m<this.tags.length;m++){var l=this.tags[m];if(l instanceof p.opentag.BaseTag){var v=l.filtersState();if(!l.config.disabled){var e=l.filtersState()<0&&!l.locked;var c=!(l.finished()||l.config.runner&&!l.isRunning);if(e&&c){var k=v!==z.state.SESSION;var n=+l.awaitingDependencies>0;if(k&&!n)return false}}}}return true};b.prototype.getPageVariables=function(){var m=[];for(var l=
0;l<this.tags.length;l++){var v=this.tags[l].getPageVariables();for(var e=0;e<v.length;e++)r.addToArrayIfNotExist(m,v[e])}return m};b.getPageVariableByName=function(m){var l=this.getAllPageVariables();var v=[];for(var e=0;e<l.length;e++)if(l[e].config.name===m)v.push(l[e]);return v};var E="qubit.opentag.disableContainerRunning_";var F="qubit.opentag.forceContainerRunning";b.prototype._getCookieNameForDisabling=function(){return E+this.getContainerId()+this.config.name};b.prototype.disabledByCookie=
function(){return!!A.get(this._getCookieNameForDisabling())};b.prototype.setCookieToDisable=function(){A.set(this._getCookieNameForDisabling(),"true")};b.prototype.rmCookieToDisable=function(){A.rm(this._getCookieNameForDisabling())};b.rmAllDisablingCookies=function(){r.rmCookiesMatching(E)};b.setCookieForDisabledContainersToRun=function(){A.set(F,"true")};b.rmCookieForDisabledContainersToRun=function(){A.rm(F)}})();(function(){function b(){}function y(){var A=false;if(w.get("opentag_debug")||document.location.href.indexOf("opentag_debug")>=
0)A=true;return A}function r(){var A=false;if(w.get("opentag_debug_tool")||document.location.href.indexOf("opentag_debug_tool")>=0)A=true;return A}function z(){try{var A=K.TAGSDK_MAIN_DISABLED_FUNCTION;if(A&&A())return true}catch(G){}if(document.location.href.indexOf("opentag_disabled\x3dtrue")>=0)return true;return false}function f(A,G,h){if(h&&(A[G]===undefined||A[G]===""||A[G]===null))A[G]=h}function q(A){var G=A.PACKAGE_NAME.split(".");G=G[G.length-1];var h=x.getParentObject(A.PACKAGE_NAME);h[G]=
null;delete h[G]}function d(A){var G=x.getParentObject(A.PACKAGE_NAME);var h=G.ClientConfig;if(h&&h.clientId)return h.clientId;else{var B=A.PACKAGE_NAME.split(".");return B[B.length-2].substring(1)}}var w=p.Cookie;var x=p.opentag.Utils;p.opentag.Log.setLevelFromCookie();b.run=function(){var A=false;if(z())return;var G=false;var h=r();var B=h||y();if(!G&&B){if(!p.DEBUG_MODE)K.TAGSDK_NS_OVERRIDE=true;else K.TAGSDK_NS_OVERRIDE=false;A=true}if(p.DEBUG_MODE)K.TAGSDK_NS_OVERRIDE=false;try{L.html.UVListener.init()}catch(E){}b.runAllContainers(A)};
b.runAllContainers=function(A){try{var G=p.opentag.Container.getContainers();for(var h=0;h<G.length;h++){var B=G[h];var E=B.config;if(!B.runningStarted&&!B.configuredInMain){E.scanTags=true;var F=x.getParentObject(B.PACKAGE_NAME).ClientConfig;if(F)f(B.config,"clientId",F.id);var m=x.getParentObject(B.PACKAGE_NAME).SystemDefaults;if(m){f(E,"pingServerUrl",m.pingServerUrl);f(E,"tellLoadTimesProbability",m.tellLoadTimesProbability)}B.configuredInMain=true;if(A){B.destroy(true);q(B);b.loadDebugVersion(B)}else if(!K.QUBIT_OPENTAG_STOP_MAIN_EXECUTION)B.run();
else(function(){var l=p.opentag.RUN_STOPPED_EXECUTON;p.opentag.RUN_STOPPED_EXECUTON=function(){try{if(l)l()}finally{B.run()}}})(B)}}}catch(l){}};b.loadDebugVersion=function(A){var G=document.createElement("script");var h;var B=A.config.scriptURL;var E=d(A);var F=A.getContainerId();if(B){h=B;var m="-debug.js".length;if(h.lastIndexOf("-debug.js")!==h.length-m){h=h.substring(0,h.length-".js".length);h+="-debug.js"}}var l="//d3c3cq33003psk.cloudfront.net/opentag-"+E+"-"+F+"-debug.js";if(h&&l!==h)G.src=
h;else G.src="//s3-eu-west-1.amazonaws.com/opentag/opentag-"+E+"-"+F+"-debug.js";document.getElementsByTagName("head")[0].appendChild(G)};p.Define.namespace("qubit.opentag.Main",b)})()})()})();(function(){})();
(function(){var u=qubit.opentag.Container;var a=new u({"maxCookieLength":3E3,"cookieDomain":"","pingServerUrl":"","delayDocWrite":false,"name":"AEM: Production","gzip":true,"disabled":false,"tellLoadTimesProbability":1,"containerId":1096944});var t="aemproduction.Container";qubit.Define.clientNamespace(t,a)})();(function(){var u=qubit.opentag.pagevariable.BaseVariable;var a=new u({"name":"hotjar hjid"});var t="aemproduction.variables.HotjarHjid";qubit.Define.clientNamespace(t,a);a.value="88438"})();
(function(){var u=qubit.opentag.pagevariable.BaseVariable;var a=new u({"name":"hotjar hjsv"});var t="aemproduction.variables.HotjarHjsv";qubit.Define.clientNamespace(t,a);a.value="5"})();(function(){var u=qubit.opentag.pagevariable.BaseVariable;var a=new u({"name":"Domain Name"});var t="aemproduction.variables.DomainName";qubit.Define.clientNamespace(t,a);a.value="www.telegraph.co.uk"})();
(function(){var u=qubit.opentag.pagevariable.BaseVariable;var a=new u({"name":"Allow Linker"});var t="aemproduction.variables.AllowLinker";qubit.Define.clientNamespace(t,a);a.value="false"})();(function(){var u=qubit.opentag.pagevariable.BaseVariable;var a=new u({"name":"GA Profile ID"});var t="aemproduction.variables.GAProfileID";qubit.Define.clientNamespace(t,a);a.value="UA-7226372-1"})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Default filter: Match all DO NOT AMEND","pattern":"","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.DefaultFilterMatchAll4";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Include URL Param ?openxsync","pattern":"openxsync"});var t="aemproduction.filters.IncludeURLParamOpenxsync";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":1});var t="aemproduction.filters.DefaultFilterMatchAll44";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Default","pattern":"*","patternType":"CONTAINS","priority":2});var t="aemproduction.filters.Default";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Include /travel/tours","pattern":"/travel/tours"});var t="aemproduction.filters.IncludeTravelTours";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":1});var t="aemproduction.filters.DefaultFilterMatchAll42";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"HotJar Rule","patternType":"ENDS_WITH"});var t="aemproduction.filters.HotJarRule1";qubit.Define.clientNamespace(t,a);a.customStarter=function(K,D){D(false)};a.customScript=function(K){if(window.location.pathname=="/secure/registration/"||window.location.pathname=="/premium/"||window.location.pathname=="/premium/prime/"||window.location.pathname=="/premium/product/"||window.location.pathname=="/premium/digital-editions/"||window.location.pathname==
"/subscriptions/"||window.location.pathname=="/subscriptions/sub-bar/")return true;else return false};a.lexicalPattern=""})();(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"/rewards","pattern":"/rewards/"});var t="aemproduction.filters.Rewards";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"/secure/registration/","pattern":"/secure/registration/"});var t="aemproduction.filters.SecureRegistration";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"/travel/destinations/","pattern":"telegraph.co.uk/travel/destinations/ "});var t="aemproduction.filters.TravelDestinations1";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"/travel/destinations","pattern":"telegraph.co.uk/travel/destinations"});var t="aemproduction.filters.TravelDestinations5";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Business Channel","pattern":"/business/"});var t="aemproduction.filters.BusinessOnly";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.DefaultFilterMatchAll5";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=function(K){return true};a.lexicalPattern='{"rows":[],"operators":[]}'})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Travel","pattern":".telegraph.co.uk/travel","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.Travel";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"/travel/destinations","pattern":"telegraph.co.uk/travel/destinations"});var t="aemproduction.filters.TravelDestinations4";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":1});var t="aemproduction.filters.DefaultFilterMatchAll43";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Salesforce Live Agent - Chat"});var t="aemproduction.filters.SalesforceLiveAgentSales1";qubit.Define.clientNamespace(t,a);a.customStarter=function(K,D){setTimeout(D,500)};a.customScript=function(K){var D=false;var p=false;var H=location.pathname;var M=location.host;var Q=H.match(/\/secure\/(personal|account|paymentdetails|newsletters)\//);window.salesforceLiveAgentChatPanel=window.salesforceLiveAgentChatPanel||{};if(M.match(/(staging|secure-staging)\.telegraph/g)){salesforceLiveAgentChatPanel.org_id=
"572m00000004Cf9";salesforceLiveAgentChatPanel.button_id="573m00000004D28";salesforceLiveAgentChatPanel.button_registration_id="573m00000004D2I";salesforceLiveAgentChatPanel.button_service_id="573m000000000j2";salesforceLiveAgentChatPanel.deployment_id="00Dm00000002iU8";salesforceLiveAgentChatPanel.chat_url="https://d.la2w1cs.salesforceliveagent.com/chat";salesforceLiveAgentChatPanel.sf_url="https://c.la2w1cs.salesforceliveagent.com/content/g/js/39.0/deployment.js"}else if(M.match(/(www|secure)\.telegraph/g)){salesforceLiveAgentChatPanel.org_id=
"57220000000PCi9";salesforceLiveAgentChatPanel.button_id="5730J000000bm0S";salesforceLiveAgentChatPanel.button_registration_id="5730J000000bm0X";salesforceLiveAgentChatPanel.button_service_id="5730J000000TPOh";salesforceLiveAgentChatPanel.deployment_id="00D2000000093Wf";salesforceLiveAgentChatPanel.chat_url="https://d.la1-c1-frf.salesforceliveagent.com/chat";salesforceLiveAgentChatPanel.sf_url="https://c.la1-c1-frf.salesforceliveagent.com/content/g/js/39.0/deployment.js"}else if(M.match(/qa5/)){salesforceLiveAgentChatPanel.org_id=
"57220000000PCi9";salesforceLiveAgentChatPanel.button_id="573260000008Oek";salesforceLiveAgentChatPanel.button_registration_id="573260000008Oel";salesforceLiveAgentChatPanel.button_service_id="573260000008OgR";salesforceLiveAgentChatPanel.deployment_id="00D26000000D9Ef";salesforceLiveAgentChatPanel.chat_url="https://d.la1-c2cs-lon.salesforceliveagent.com/chat";salesforceLiveAgentChatPanel.sf_url="https://c.la1-c2cs-lon.salesforceliveagent.com/content/g/js/39.0/deployment.js"}else if(M.match(/qa6/)&&
Q){salesforceLiveAgentChatPanel.button_id="5736E0000008OmZ";salesforceLiveAgentChatPanel.button_service_id="5736E0000008PMr"}if(document.querySelector(".premium-paywall.component"))D=false;else if(H.indexOf("/subscriptions")===0)D=true;else if(H.indexOf("/premium/product")===0)D=true;else if(H.indexOf("/premium/digital-editions")===0)D=true;else if(H.indexOf("/premium/subscriptions/")===0)D=true;else if(H==="/secure/payment/"){window.salesforceLiveAgentChatPanel.dwell=-1;D=true}else if(H==="/secure/registration/"){salesforceLiveAgentChatPanel.button_id=
salesforceLiveAgentChatPanel.button_registration_id;window.salesforceLiveAgentChatPanel.dwell=-1;D=true}else if(H==="/secure/login/"){salesforceLiveAgentChatPanel.button_id=salesforceLiveAgentChatPanel.button_registration_id;window.salesforceLiveAgentChatPanel.dwell=-1;D=true}else if(Q){salesforceLiveAgentChatPanel.attemptUserMapping=true;salesforceLiveAgentChatPanel.button_id=salesforceLiveAgentChatPanel.button_service_id;window.salesforceLiveAgentChatPanel.dwell=-1;D=true}if(!M.match(/(www|secure.telegraph|staging|perf|qa6|qa5)/g))p=
true;return D===true&&p===false};a.lexicalPattern=""})();(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Subscriptions","pattern":"/subscriptions"});var t="aemproduction.filters.Subscriptions";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"paywall page"});var t="aemproduction.filters.PaywallPage";qubit.Define.clientNamespace(t,a);a.customStarter=function(K,D){D(false)};a.customScript=function(K){var D=false;if(document.querySelector(".premium-paywall.component"))D=true;return D};a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"/subscriptions/ppc","pattern":"telegraph.co.uk/subscriptions/ppc/","patternType":"CONTAINS"});var t="aemproduction.filters.SubscriptionsPpc";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"/secure/payment","pattern":"telegraph.co.uk/secure/payment/?","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.SecurePayment";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Match Contains: telegraph.co.uk/travel","pattern":"telegraph.co.uk/travel","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.DefaultFilterMatchAll";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Include /secure/redeem","pattern":"telegraph.co.uk/secure/redeem","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.SecureActivate";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=function(K){return true};a.lexicalPattern='{"rows":[],"operators":[]}'})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"/subscriptions/sub-bar","pattern":"telegraph.co.uk/subscriptions/sub-bar/","patternType":"CONTAINS"});var t="aemproduction.filters.SubscriptionsSubBar";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":'Exclude ":4502/"',"pattern":":4502/","patternType":"CONTAINS","priority":2});var t="aemproduction.filters.Exclude4502";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Exclude /secure/","pattern":"/secure/"});var t="aemproduction.filters.ExcludeSecure111";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Exclude telegraph.co.uk/financial-services/","pattern":"telegraph.co.uk/financial-services/","patternType":"CONTAINS"});var t="aemproduction.filters.FinancialServices";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":1});var t="aemproduction.filters.DefaultFilterMatchAll41";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":1});var t="aemproduction.filters.DefaultFilterMatchAll3";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Travel only","pattern":"telegraph.co.uk/travel"});var t="aemproduction.filters.TravelOnly";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=function(K){return true};a.lexicalPattern='{"rows":[],"operators":[]}'})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Include /subscriptions/tablet/international","pattern":"telegraph.co.uk/subscriptions/tablet/international","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.IncludeSubscriptionsTabletInternational";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Money Channel","pattern":"/money/"});var t="aemproduction.filters.MoneyOnly";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Include /travel/city-breaks","pattern":"/travel/city-breaks"});var t="aemproduction.filters.IncludeTravelCityBreaks";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Default filter: Match all(2)","pattern":"","patternType":"ALL_URLS","priority":2});var t="aemproduction.filters.DefaultFilterMatchAll2";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":'Exclude "chase.telegraph.co.uk"',"pattern":"chase.telegraph.co.uk","patternType":"CONTAINS","priority":3});var t="aemproduction.filters.ExcludeChaseTelegraphCoUk1";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":1});var t="aemproduction.filters.DefaultFilterMatchAll461";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Business Channel","pattern":"/business/"});var t="aemproduction.filters.BusinessChannel";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Default","pattern":"*","patternType":"CONTAINS","priority":2});var t="aemproduction.filters.Default2";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Include /travel/hotel","pattern":"telegraph.co.uk/travel/hotel","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.IncludeTravelHotel";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Financial Services only","pattern":"telegraph.co.uk/financial-services/"});var t="aemproduction.filters.FinancialServicesOnly";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Include /subscriptions/website/international","pattern":"telegraph.co.uk/subscriptions/website/international","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.IncludeSubscriptionsWebsiteInternational";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"/travel/destinations","pattern":"telegraph.co.uk/travel/destinations"});var t="aemproduction.filters.TravelDestinations3";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Include /travel","pattern":"telegraph.co.uk/travel","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.IncludeTravel";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Exclude /secure/","pattern":"/secure/"});var t="aemproduction.filters.ExcludeSecure1";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Exclude /subscriptions/","pattern":"/subscriptions/"});var t="aemproduction.filters.ExcludeSubscriptions1";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"NOT https://secure.telegraph.co.uk/financial-services/retirement-solutions/funeral-plans/secure-page/","pattern":"https://secure.telegraph.co.uk/financial-services/retirement-solutions/funeral-plans/secure-page/","patternType":"STARTS_WITH"});var t="aemproduction.filters.NOTHttpsSecureTelegraphCoUkFinancialServicesRetirementSolutionsFuneralPlansSecurePage";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=
null;a.lexicalPattern=""})();(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Include /subscriptions/newspaper","pattern":"telegraph.co.uk/subscriptions/newspaper","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.IncludeSubscriptionsNewspaper1";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Default","pattern":"*","patternType":"CONTAINS","priority":2});var t="aemproduction.filters.Default4";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Include /subscriptions/tablet","pattern":"telegraph.co.uk/subscriptions/tablet","patternType":"CONTAINS","priority":2});var t="aemproduction.filters.IncludeSubscriptionsTablet";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Staging Secure Pages","pattern":"secure-staging-ams.telegraph.co.uk"});var t="aemproduction.filters.StagingSecurePages";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"/secure/payment","pattern":"telegraph.co.uk/secure/payment/","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.SecurePayment1";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Exclude /contact-us/","pattern":"/contact-us/"});var t="aemproduction.filters.ExcludeContactUs";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Exclude /premium/","pattern":"/premium/"});var t="aemproduction.filters.ExcludeSecure2";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=function(K){return true};a.lexicalPattern='{"rows":[],"operators":["or"]}'})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Default","pattern":"*","patternType":"CONTAINS","priority":2});var t="aemproduction.filters.Default3";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Include /secure/payment/confirmation","pattern":"telegraph.co.uk/secure/payment/confirmation","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.IncludeSecurePaymentConfirmation1";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Money Channel","pattern":"/money/"});var t="aemproduction.filters.MoneyChannel";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Exclude /premium/","pattern":"/premium/"});var t="aemproduction.filters.ExcludeSecure21";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=function(K){return true};a.lexicalPattern='{"rows":[],"operators":["or"]}'})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Premium","pattern":"/premium/"});var t="aemproduction.filters.Premiun";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Except homepage","pattern":"http://www.telegraph.co.uk/cars/","patternType":"MATCHES_EXACTLY","priority":1});var t="aemproduction.filters.ExceptHomepage";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Exclude /secure/","pattern":"/secure/"});var t="aemproduction.filters.ExcludeSecure";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"HotJar Rule","patternType":"ENDS_WITH"});var t="aemproduction.filters.HotJarRule";qubit.Define.clientNamespace(t,a);a.customStarter=function(K,D){D(false)};a.customScript=function(K){if(window.location.pathname=="/secure/registration/"||window.location.pathname=="/premium/"||window.location.pathname=="/premium/prime/"||window.location.pathname=="/premium/product/"||window.location.pathname=="/premium/digital-editions/"||window.location.pathname==
"/subscriptions/"||window.location.pathname=="/subscriptions/sub-bar/")return true;else return false};a.lexicalPattern=""})();(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Confirmation","pattern":"/secure/payment/confirmation"});var t="aemproduction.filters.Confirmation";qubit.Define.clientNamespace(t,a);a.customStarter=function(K,D){D(false)};a.customScript=function(K){return true};a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"/subscriptions","pattern":"telegraph.co.uk/subscriptions/","patternType":"CONTAINS"});var t="aemproduction.filters.Subscriptions1";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Exclude /secure/","pattern":"/secure/"});var t="aemproduction.filters.ExcludeSecure112";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Default","pattern":"*","patternType":"CONTAINS","priority":2});var t="aemproduction.filters.Default1";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Include /subscriptions/newspaper","pattern":"telegraph.co.uk/subscriptions/newspaper","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.IncludeSubscriptionsNewspaper";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Include /travel/family-holiday","pattern":"/travel/family-holiday"});var t="aemproduction.filters.IncludeTravelFamilyHoliday";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"/secure/payment/confirmation","pattern":"/secure/payment/confirmation","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.SecurePaymentConfirmation";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":1});var t="aemproduction.filters.DefaultFilterMatchAll46";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Include /travel/hotels","pattern":"telegraph.co.uk/travel/hotels","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.IncludeTravelHotel1";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Include Financial Services (temp)","pattern":"/financial-services/retirement-solutions/equity-release-service/interest-only-mortgages-fuel-equity-release"});var t="aemproduction.filters.IncludeFinancialServicesTemp";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Include URL Param ?openxsync","pattern":"openxsync"});var t="aemproduction.filters.IncludeURLParamOpenxsync1";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"Include  /registration.telegraph.co.uk/newsletters/Football/","pattern":"registration.telegraph.co.uk/newsletters/Football"});var t="aemproduction.filters.RegistrationTelegraphCoUkNewslettersFootball";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=function(K){return K.referrer[K.referrer.length-1].landing.indexOf&&K.referrer[K.referrer.length-1].landing.indexOf("registration.telegraph.co.uk/newsletters/Football")>=
0&&K.referrer[K.referrer.length-1].time>(new Date).getTime()-1*6E4};a.lexicalPattern='{"rows":[{"operators":[],"starters":[],"variables":[{"type":"lastLandingPage","comparator":[3,2],"value":["registration.telegraph.co.uk/newsletters/Football","1"]}]}],"operators":[]}'})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Exclude /subscriptions/","pattern":"/subscriptions/"});var t="aemproduction.filters.ExcludeSubscriptions";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Default filter: Match all(1)","pattern":"^http://www\\.telegraph\\.co\\.uk/cars/","patternType":"REGULAR_EXPRESSION","priority":2});var t="aemproduction.filters.DefaultFilterMatchAll1";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Include /secure/payment/confirmation","pattern":"telegraph.co.uk/secure/payment/confirmation","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.IncludeSecurePaymentConfirmation";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":1});var t="aemproduction.filters.DefaultFilterMatchAll31";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Include /subscriptions/website","pattern":"telegraph.co.uk/subscriptions/website","patternType":"CONTAINS","priority":2});var t="aemproduction.filters.IncludeSubscriptionsWebsite";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":"Exclude /secure/","pattern":"/secure/"});var t="aemproduction.filters.ExcludeSecure11";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Cars homepage only","pattern":"http://www.telegraph.co.uk/cars/","patternType":"MATCHES_EXACTLY","priority":1});var t="aemproduction.filters.CarsHomepageOnly";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":1});var t="aemproduction.filters.DefaultFilterMatchAll45";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"name":"/secure/registration","pattern":"telegraph.co.uk/secure/registration/","patternType":"CONTAINS"});var t="aemproduction.filters.SecureRegistration1";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.filter.Filter;var a=new u({"include":false,"name":'Exclude "chase.telegraph.co.uk"',"pattern":"chase.telegraph.co.uk","patternType":"CONTAINS","priority":1});var t="aemproduction.filters.ExcludeChaseTelegraphCoUk";qubit.Define.clientNamespace(t,a);a.customStarter=null;a.customScript=null;a.lexicalPattern=""})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","name":"COMMERCIAL: Delete Ooyala Cookie:[v1.0]","description":"Delete the Ooyala cookie"});var t="aemproduction.tags.commercialdeleteooyalacookiev10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent='\x3cscript\x3e\n(function(cookieToEmpty) {\n\tif (document.cookie.indexOf("; "+ cookieToEmpty + "\x3d")){\n\t\tdocument.cookie \x3d cookieToEmpty +"\x3d; path\x3d/;"\n\t}\n})("Ooyala");\n\x3c/script\x3e';a.addClientFiltersList([]);
a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","name":"MARKETING: Branch.io [v2.1]","description":"[IC 16:36 24/05] Disabled due to new Cookie Notice and upcoming MyT work. Script has been updated to recognise Sponsored content and the cookie notice should we want to reintroduce.\nBranch handles our Smart Banner which drives traffic from the Website to our Native Apps. This latest version handles pushing to the Editions App from Tablet devices.\n2.1 includes Sponsored filter in script and change from Javascript to HTML","disabled":true});
var t="aemproduction.tags.marketingbranchiov211.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="\x3cscript type\x3d\"text/javascript\"\x3e \n// 2.1 - blocks from being delivered into Sponsored \x26 when the GDPR/Evidon banner shows\nif(tmgAds.dfp.site !\x3d 'sponsored'){\n  if(!document.body.classList.contains('gdprConsentNotice')){\n    var telegraphLiveAppKey \x3d 'key_live_kgFjVjI3BHbfiD2ahbAprdfjDubrjwCx',\n        digitalEditionKey \x3d 'key_live_kewl2z6z3givXcCT1mXWAndjAsd4yHTw',\n        userAgentLowerCase \x3d navigator.userAgent.toLowerCase(),\n        isiOSOrAndroidMobile \x3d ( /(?:iphone|ipod)|android.*mobile/i.test( userAgentLowerCase ) ),\n        isiOSOrAndroid \x3d ( /(iphone|ipod|ipad|android)/i.test( userAgentLowerCase ) );\n    if ( isiOSOrAndroidMobile ) {\n      startBranch(telegraphLiveAppKey)\n    } else {\n      //need to remove any windows / blackberries etc.\n      if (isiOSOrAndroid) {\n        startBranch(digitalEditionKey)\n      }\n    }\n    function startBranch(branchKey) {\n      (function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s\x3c_.length;)c(h,_[s++]);d\x3dr.createElement(a);d.async\x3d1;d.src\x3d\"https://cdn.branch.io/branch-latest.min.js\";k\x3dr.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]\x3dh}})(window,document,\"script\",\"branch\",function(b,r){b[r]\x3dfunction(){b._q.push([r,arguments])}},{_q:[],_v:1},\"addListener applyCode banner closeBanner creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode\".split(\" \"), 0);\n      branch.init( branchKey );\n      var didClickJourneyCloseListener \x3d function(event) { \n        branch.track(\"Clicked Journey Close\");\n      }\n      branch.addListener('didClickJourneyClose', didClickJourneyCloseListener);\n    }\n  } else {\n    console.log('ADTECH: Branch.io blocked as GDPR/Evidon notification is active');\n  }\n} else {\n  console.log('ADTECH: Branch.io blocked due to sponsiored section');\n}\n\x3c/script\x3e";
a.addClientFiltersList(["aemproduction.filters.DefaultFilterMatchAll461","aemproduction.filters.ExcludeSecure111","aemproduction.filters.ExcludeSecure21","aemproduction.filters.ExcludeSubscriptions1"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"name":"COMMERCIAL: WayIn Populate Adobe ID [v1.0]","description":"WayInTag","disabled":false});var t="aemproduction.tags.commercialwayinpopulateadobeidv10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="";a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){function K(){var M=document.cookie.match("(^|;)\\s*AMCV_2C7336C753C676BA0A490D4B%40AdobeOrg\\s*\x3d\\s*([^;]+)");
return M?decodeURIComponent(M.pop()).split("|")[4]:"00000000000000000000000000000000000000"}if(RUM)RUM.mark("spark_wayin_tracking_start");var D;var p;var H=window.location.href.indexOf("debug")!==-1?true:false;setTimeout(function(){var M=document.querySelectorAll('[id^\x3d"ngxFrame"]');D=M.length>0?M[0].getAttribute("id"):null;p=document.getElementById(D);var Q=K();var J="";if(p){if(H)console.log("WAYIN: Frame found. Trying to send message to frame.");J=NGX.Embed.sendMessage({id:D,action:"setfieldvalues",
payload:{adobe_id:Q}})}else if(H)console.log("WAYIN: Frame not found.");if(H){console.log("WayInFrame: "+p);console.log("Adobe ID: "+K());console.log("NGX response: "+J)}},7E3);if(RUM){RUM.mark("spark_wayin_tracking_end");performance.measure("spark_wayin_loadtime","spark_wayin_tracking_start","spark_wayin_tracking_end")}};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"name":"COMMERCIAL: Custom Affiliate Link [v1.1]"});var t="aemproduction.tags.commercialcustomaffiliatelinkv11.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="";a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){function K(){var L=document.cookie.match("(^|;)\\s*AMCV_2C7336C753C676BA0A490D4B%40AdobeOrg\\s*\x3d\\s*([^;]+)");
return L?decodeURIComponent(L.pop()).split("|")[4]:"00000000000000000000000000000000000000"}function D(){H=M!==null&&M.content.length>0?M.content:"";for(var L=0;L<Q.length;L++){var S=Q[L];var W=S.getAttribute("href");var Z=W.replace("customid",H+"-"+K());S.href=Z}}var p=window.performance?window.performance.mark("AffiliateTrack_Start"):(new Date).getTime();var H="";var M=document.head.querySelector("[name\x3d'tmgads.articleid']");var Q=document.querySelectorAll(".article__body a");setTimeout(function(){D()},
5E3);var J=window.performance?window.performance.mark("AffiliateTrack_End"):(new Date).getTime();if(!window.performance&&console)console.log("Affiliate Tracking load time is:"+(J-p));else if(window.performance){window.performance.measure("js_affiliate_track","AffiliateTrack_Start","AffiliateTrack_End");window.performance.clearMarks("AffiliateTrack_End");window.performance.clearMarks("AffiliateTrack_Start")}};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"name":"ANALYTICS: Hotjar [v1.1]"});var t="aemproduction.tags.analyticshotjarv11.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="";a.addClientFiltersList(["aemproduction.filters.HotJarRule1"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){var K=window.performance?window.performance.mark("hotjar_start"):(new Date).getTime();(function(p,H,M,Q,
J,L){p.hj=p.hj||function(){(p.hj.q=p.hj.q||[]).push(arguments)};p._hjSettings={hjid:88438,hjsv:5};J=H.getElementsByTagName("head")[0];L=H.createElement("script");L.async=1;L.src=M+p._hjSettings.hjid+Q+p._hjSettings.hjsv;J.appendChild(L)})(window,document,"//static.hotjar.com/c/hotjar-",".js?sv\x3d");var D=window.performance?window.performance.mark("hotjar_end"):(new Date).getTime();if(!window.performance&&console)console.log("Affiliate Tracking load time is:"+(D-K));else if(window.performance){window.performance.measure("js_hotjar_track",
"hotjar_start","hotjar_end");window.performance.clearMarks("hotjar_end");window.performance.clearMarks("hotjar_start")}};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"COMMERCIAL: Confirmation_twitter:[v1.0]","disabled":false,"id":56175094,"locked":false,"locationObject":"BODY"});var t="aemproduction.tags.commercialconfirmation_twitterv10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent='\x3cscript src\x3d"//platform.twitter.com/oct.js" type\x3d"text/javascript"\x3e\x3c/script\x3e \x3cscript type\x3d"text/javascript"\x3e twttr.conversion.trackPid(\'l5wah\', { tw_sale_amount: order.price, tw_order_quantity: 1 });\x3c/script\x3e \x3cnoscript\x3e \x3cimg height\x3d"1" width\x3d"1" style\x3d"display:none;" alt\x3d"" src\x3d"https://analytics.twitter.com/i/adsct?txn_id\x3dl5wah\x26p_id\x3dTwitter\x26tw_sale_amount\x3d0\x26tw_order_quantity\x3d0" /\x3e \x3cimg height\x3d"1" width\x3d"1" style\x3d"display:none;" alt\x3d"" src\x3d"//t.co/i/adsct?txn_id\x3dl5wah\x26p_id\x3dTwitter\x26tw_sale_amount\x3d0\x26tw_order_quantity\x3d0" /\x3e\x3c/noscript\x3ew_sale_amount\x3d0\x26tw_order_quantity\x3d0" /\x3e\x3c/noscript\x3e';
a.addClientFiltersList(["aemproduction.filters.DefaultFilterMatchAll2","aemproduction.filters.IncludeSecurePaymentConfirmation"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","name":"COMMERCIAL: Salesforce-Active-Agent_Acquisition:[v2.0]","disabled":false});var t="aemproduction.tags.commercialsalesforceactiveagentacquisitionv20.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent='\n\x3c!--\nStart of Salesforce Active Agent (Acquisition) insert script\nThis tag must be placed as close as possible to the closing \x3c/body\x3e tag.\n0.2.1\nCreation Date: 06/01/2017\n--\x3e\n\x3cscript\x3e\n    (function(){\n        window.salesforceLiveAgentChatPanel \x3d window.salesforceLiveAgentChatPanel || {};\n        var defaults \x3d {\n            dwell: 15,\n            sf_url: \'https://c.la1-c1cs-frf.salesforceliveagent.com/content/g/js/39.0/deployment.js\',\n            chat_url: \'https://d.la1-c1cs-frf.salesforceliveagent.com/chat\',\n            org_id: \'57220000000PCi9\',\n            deployment_id: \'00D6E000000CtcP\',\n            button_id: \'5736E0000008OmZ\',\n            chat_window_height: 580,\n            user_id: null\n            /*  other available options\n             attemptUserMapping: true, (try to identify user from tmg_p13n cookie)\n             title: "Live chat",\n             text: "We\'re here to help, do you have any questions?",\n             buttonLabel: "Start live chat support now"*/\n        }, item;\n        for (item in defaults){\n            window.salesforceLiveAgentChatPanel[item] \x3d window.salesforceLiveAgentChatPanel[item] || defaults[item];\n        }\n    })();\n\x3c/script\x3e\n\x3cdiv id\x3d"liveagent_button_offline" style\x3d"display: none" title\x3d"Offline"  class\x3d"salesforce-livechat-panel inactive offline-marker"\x3ex\x3c/div\x3e\n\x3cdiv id\x3d"liveagent_button_online" style\x3d"display: none" class\x3d"salesforce-livechat-panel inactive"\x3e\n\x3cstyle\x3e\n    @media only screen and (max-width: 480px) {\n        .salesforce-livechat-panel  {\n            bottom: 18px;\n            right: 18px;\n        }\n        .ua-safari .salesforce-livechat-panel__button {\n            -webkit-transition: all 0 linear;\n            transition: all 0 linear;\n        }\n        .ua-safari .salesforce-livechat-panel  {\n            -webkit-transition: all 0ms ease-in, bottom 0ms ease-out;\n            transition: all 0ms ease-in, bottom 0ms ease-out;\n        }\n    }\n    @media only screen and (min-width: 480px) {\n        .salesforce-livechat-panel  {\n            bottom: 0;\n            max-width: 260px;\n            right: 26px;\n        }\n    }\n    @media only screen and (min-width: 730px) {\n        .salesforce-livechat-panel {\n            right: 50%;\n            transform: translateX(368px);\n        }\n        .articleRenderer2 .salesforce-livechat-panel {\n            transform: translateX(338px);\n        }\n    }\n    @media only screen and (min-width: 988px) {\n        .salesforce-livechat-panel {\n            right: 50%;\n            transform: translateX(476px);\n        }\n        .articleRenderer2 .salesforce-livechat-panel {\n            transform: translateX(456px);\n        }\n    }\n    @media only screen and (min-width: 1008px) {\n        .salesforce-livechat-panel {\n            transform: translateX(479px);\n        }\n        .articleRenderer2 .salesforce-livechat-panel {\n            transform: translateX(459px);\n        }\n    }\n    @media only screen and (min-width: 1328px) {\n        .salesforce-livechat-panel {\n            transform: translateX(626px);\n        }\n        .articleRenderer2 .salesforce-livechat-panel {\n            transform: translateX(459px);\n        }\n        .paymentRenderer .salesforce-livechat-panel {\n            transform: translateX(479px);\n        }\n    }\n    .salesforce-livechat-panel  {\n        max-height: 180px;\n        position: fixed;\n        transition: all 300ms ease-in, bottom 1500ms ease-out;\n        width: calc(100% - 36px);\n        z-index: 5000;\n    }\n    .salesforce-livechat-panel:not([data-active]) {\n        bottom: -80px;\n    }\n    .salesforce-livechat-panel.inactive.offline-marker {\n        background-color: darkred;\n        color: darkred;\n        border-radius: 50%;\n        width: 30px;\n        height: 30px;\n        overflow: hidden;\n    }\n    .salesforce-livechat-panel.inactive {\n        max-height: 40px;\n        max-width: 132px;\n        width: auto;\n    }\n    .salesforce-livechat-panel .intro {\n        margin: 0;\n    }\n    .salesforce-livechat-panel.inactive {\n        cursor: pointer;\n    }\n    .salesforce-livechat-panel.inactive .active-only {\n        display: none;\n    }\n    .salesforce-livechat-panel.inactive .header-bar__logo {\n        background-color: #c38419;\n    }\n    .salesforce-livechat-panel__content {\n        background-color: white;\n        padding: 8px;\n    }\n\n    .isalesforce-livechat-panel__intro {\n        border-bottom: 1px solid #cecece;\n        min-height: 42px;\n        position: relative;\n    }\n    .salesforce-livechat-panel__icon {\n        display: block;\n        left: 0;\n        position: absolute;\n        top: 2px;\n    }\n    .salesforce-livechat-panel__icon svg {\n        height: 26px;\n        fill: #c38419;\n        outline: 1px solid #cecece;\n        padding: 4px;\n        width: 26px;\n    }\n    .salesforce-livechat-panel__text {\n        display: inline-block;\n        font-family: "Telesans Text Regular", Arial, sans-serif;\n        font-size: 14px;\n        padding-bottom: 8px;\n    }\n    .salesforce-livechat-panel__hr {\n        border: 0;\n        background: transparent;\n        color: transparent;\n        height: 9px;\n        margin: 0;\n        padding: 0;\n    }\n    .salesforce-livechat-panel__button {\n        border: 0;\n        background-color: #c38419;\n        border-radius: 0;\n        color: #fff;\n        cursor: pointer;\n        display: block;\n        font-family: "Telesans Text Regular", Arial, sans-serif;\n        font-size: 14px;\n        font-weight: normal;\n        outline: 0;\n        padding: .9rem 1.4rem;\n        -webkit-transition: all 250ms linear;\n        transition: all 250ms linear;\n        text-align: center;\n        text-decoration: none;\n        width: 100%;\n    }\n    .salesforce-livechat-panel__button:hover,\n    .salesforce-livechat-panel__button:focus {\n        background-color: #9e6710;\n    }\n\x3c/style\x3e\n\x3cheader class\x3d"header-bar"\x3e\n    \x3cstyle\x3e\n        /*  header bar  */\n        .header-bar {\n            background-color: #353535;\n            color: white;\n            font-size: 14px;\n            line-height: 14px;\n        }\n        .header-bar__content {\n            align-items: stretch;\n            display: flex;\n        }\n        .header-bar__logo,\n        .header-bar__close {\n            font-size: 0;\n            line-height: 0;\n            padding: 8px 8px 6px 8px;\n        }\n        .header-bar__title {\n            font-size: 14px;\n            font-family: "Telesans Text Regular", Arial, sans-serif;\n            line-height: 18px;\n            padding: 8px 24px 0 12px;\n            flex-grow: 2;\n            white-space: nowrap;\n        }\n        .header-bar--graphic svg {\n            max-height: 20px;\n            max-width: 20px;\n            height: auto;\n            fill: white;\n            width: auto;\n        }\n        .header-bar__logo.header-bar--graphic svg {\n\n        }\n        .header-bar__close {\n            background: currentcolor;\n            border: 0 none;\n            color: #c38419;\n            cursor: pointer;\n            padding: 0 12px;\n        }\n        .header-bar__close:hover,\n        .header-bar__close:focus {\n            color: #9e6710;\n            outline: none;\n        }\n        .header-bar__close.header-bar--graphic svg {\n            background-color: transparent;\n            max-height: 14px;\n            max-width: 14px;\n        }\n    \x3c/style\x3e\n    \x3cdiv class\x3d"header-bar__content"\x3e\n        \x3cdiv class\x3d"header-bar__logo header-bar--graphic"\x3e\n            \x3csvg version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" x\x3d"0px" y\x3d"0px"\n                     width\x3d"1792px" height\x3d"1792px" viewBox\x3d"0 0 1792 1792" enable-background\x3d"new 0 0 1792 1792" xml:space\x3d"preserve"\x3e\x3cg\x3e\n                    \x3cpath d\x3d"M1680.6,0H112L0,112v1121.2L112,1344h784h110.2c3.2,4.8,281.8,452.1,281.8,448c0-5.3,504-560,504-560V111.7\n                        L1680.6,0z M459.8,859.5L298.7,698.3l161.1-161.1l161.1,161.1L459.8,859.5z M895.9,859.5L734.8,698.3l161.1-161.1l161.1,161.1\n                        L895.9,859.5z M1332.2,859.5l-161.1-161.1l161.1-161.1l161.1,161.1L1332.2,859.5z"/\x3e\x3c/g\x3e\n                \x3c/svg\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"header-bar__title"\x3eLive chat\x3c/div\x3e\n        \x3cbutton class\x3d"header-bar__close header-bar--graphic active-only"\x3e\x3csvg version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" x\x3d"0px" y\x3d"0px"\n                    width\x3d"1792px" height\x3d"1792px" viewBox\x3d"384 -512 1792 1792" enable-background\x3d"new 384 -512 1792 1792" xml:space\x3d"preserve"\x3e\x3cg\x3e\x3cg\x3e\x3cpolygon points\x3d"2176,1201 1359,384 2176,-433 2097,-512 1280,305 463,-512 384,-433 1201,384 384,1201 463,1280 1280,463\n                    2097,1280"/\x3e\x3c/g\x3e\x3c/g\x3e\x3c/svg\x3e\x3c/button\x3e\n    \x3c/div\x3e\n\x3c/header\x3e\n\x3cdiv class\x3d"salesforce-livechat-panel__content active-only"\x3e\n    \x3cdiv class\x3d"isalesforce-livechat-panel__intro"\x3e\n        \x3cspan class\x3d"salesforce-livechat-panel__text"\x3eWe\'re here to help, do you have any questions?\x3c/span\x3e\n    \x3c/div\x3e\n    \x3chr class\x3d"salesforce-livechat-panel__hr"/\x3e\n    \x3cbutton class\x3d"salesforce-livechat-panel__button" onclick\x3d"liveagent.startChat(salesforceLiveAgentChatPanel.button_id);"\x3e\x3cspan class\x3d"salesforce-livechat-panel__button-text"\x3eStart live chat support now\x3c/span\x3e\x3c/button\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3cscript\x3e\n\n(function() {\n    window.salesforceLiveAgentChatPanel \x3d window.salesforceLiveAgentChatPanel || {};\n    /*\n     * prep _laq object and load liveagent script\n     */\n    window._laq \x3d window._laq || [];\n    window._laq.push(function(){\n        var email \x3d window.tmg\x26\x26tmg.utils\x26\x26tmg.utils.store\x26\x26tmg.utils.store.get(\'tmg_user_email\');\n        liveagent.showWhenOnline(salesforceLiveAgentChatPanel.button_id, document.getElementById(\'liveagent_button_online\'), salesforceLiveAgentChatPanel.user_id);\n        if (screen.height \x3e salesforceLiveAgentChatPanel.chat_window_height+50){\n            liveagent.setChatWindowHeight(salesforceLiveAgentChatPanel.chat_window_height);\n        }\n        if (!!(salesforceLiveAgentChatPanel.attemptUserMapping)){\n            function makeUser(s){\n                var a \x3d s.replace(/{|}/g,"").split(","), i\x3d1,l \x3d a.length,obj\x3d{},t;\n                for (;i\x3cl ;i++){\n                    t \x3d a[i].split(\':\');\n                    try {\n                        obj[t[0]] \x3d t[1].replace(/(^\'|\'$)/g, "");\n                    } catch(e){}\n                }\n                return obj;\n            }\n            var user \x3d makeUser(Cookies.get("tmg_p13n")||"");\n\n            if (user.email){\n                liveagent.addCustomDetail("CaseStatus", "New");\n                liveagent.addCustomDetail("CaseOrigin", "Live Chat");\n                liveagent.addCustomDetail("CaseReason", "Live Chat - Service");\n                liveagent.findOrCreate("Case").map("Status", "CaseStatus", false, false, true);\n                liveagent.findOrCreate("Case").map("Origin", "CaseOrigin", false, false, true);\n                liveagent.findOrCreate("Case").map("Reason", "CaseReason", false, false, true);\n                liveagent.findOrCreate("Case").showOnCreate();\n                liveagent.findOrCreate("Case").saveToTranscript("CaseId");\n\n                liveagent.addCustomDetail("AccountEmail", user.email);\n                liveagent.setName(user.firstName +" "+ user.lastName);\n                liveagent.findOrCreate("Account").map("PersonEmail", "AccountEmail", true, true, false);\n                liveagent.findOrCreate("Account").saveToTranscript("AccountId");\n                liveagent.findOrCreate("Account").linkToEntity("Case", "AccountId");\n            }\n\n        }\n    });\n    var sfScript \x3d document.createElement(\'script\');\n    sfScript.type \x3d \'text/javascript\';\n    sfScript.async \x3d true;\n    sfScript.src \x3d salesforceLiveAgentChatPanel.sf_url;\n    var s \x3d document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(sfScript, s);\n\n    /*\n     *   Checks for the existence of window.liveagent, which is loaded async\n     *   see \'attempts\' for number of tries\n     *   see \'delay\' for wait between retries\n     */\n    var attempts \x3d 5,\n        delay \x3d 2e+3,\n        counter \x3d 0,\n        timer,\n        debug \x3d !!(location.search.match("debug")||location.hash.match("debug")),\n        prefix \x3d "Salesforce Active Agent - ",\n        getEmail \x3d function(s){\n            var a \x3d s ? s.match(/email:\\s?\'(.*?)\'/) : "";\n            return a.pop ? a.pop() : "";\n        },\n        initLiveAgent \x3d function(){\n            log("ACTIVATING");\n\n            attachObserver(\'liveagent_button_online\');\n            if (debug){\n                attachObserver(\'liveagent_button_offline\');\n            }\n            liveagent.init(salesforceLiveAgentChatPanel.chat_url, salesforceLiveAgentChatPanel.org_id, salesforceLiveAgentChatPanel.deployment_id);\n            liveagent.addCustomDetail(\'Current_Page\', location.pathname);\n        },\n        initiatePanel \x3d function(panel){\n            panel.setAttribute("data-active","true");\n            var text \x3d panel.querySelector(".salesforce-livechat-panel__text"),\n                title \x3d panel.querySelector(".header-bar__title"),\n                content \x3d panel.querySelector(".salesforce-livechat-panel__content"),\n                buttonLabel \x3d panel.querySelector(".salesforce-livechat-panel__button-text");\n\n            if (text \x26\x26 title) {\n                if (salesforceLiveAgentChatPanel.text) {\n                    text.innerText \x3d salesforceLiveAgentChatPanel.text;\n                }\n                if (salesforceLiveAgentChatPanel.title){\n                    title.innerText \x3d salesforceLiveAgentChatPanel.title;\n                }\n                if (salesforceLiveAgentChatPanel.buttonLabel){\n                    buttonLabel.innerText \x3d salesforceLiveAgentChatPanel.buttonLabel;\n                }\n                panel.addEventListener("click", function (e) {\n                    panel.classList.toggle("inactive");\n                    panel.classList.add("touched");\n                }, false);\n                content.addEventListener("click", function(e){\n                    if (e.stopPropagation){\n                        e.stopPropagation();\n                    }\n                }, false);\n                if ((salesforceLiveAgentChatPanel.dwell||salesforceLiveAgentChatPanel.dwell\x3d\x3d0)\x26\x26salesforceLiveAgentChatPanel.dwell\x3e-1){\n                    setTimeout(function () {\n                        if (panel.getAttribute("data-active") \x26\x26 panel.classList.contains("inactive") \x26\x26 !panel.classList.contains("touched")) {\n                            panel.classList.toggle("inactive");\n                        }\n                    }, +salesforceLiveAgentChatPanel.dwell * 1000);\n                }\n            }\n        },\n        attachObserver \x3d function(id){\n            var options \x3d { attributes : true, attributeFilter : [\'style\'] },\n                panel \x3d document.getElementById(id),\n                observer;\n\n            if ("MutationObserver" in window) {\n                observer \x3d new MutationObserver(function(mutations) {\n                    mutations.forEach(function(mutationRecord) {\n                        var el \x3d mutationRecord.target;\n                        setTimeout(function(){\n                            initiatePanel(el);\n                        },50);\n                    });\n                    observer.disconnect();\n                });\n                observer.observe(panel, options);\n            } else {\n                initiatePanel(panel);\n            }\n        },\n        retry \x3d function(){\n            counter++;\n            timer \x3d setTimeout(activateLiveAgent, delay);\n            log("inactive : retrying "+ counter, "darkorange");\n        },\n        log\x3dfunction(m,c){\n            if (debug){\n                c \x3d c || "green";\n                console.log("%c"+prefix + m, "color:"+c ) ;\n            }\n        },\n        activateLiveAgent \x3d function(){\n            clearTimeout(timer);\n            if (window.liveagent){\n                initLiveAgent();\n            } else if (counter \x3c attempts){\n                retry();\n            } else if (counter\x3d\x3d\x3dattempts){\n                log("ABORTING", "red");\n            }\n        };\n    activateLiveAgent();\n})();\n\x3c/script\x3e\n        \x3c!-- End of Salesforce Active Agent (Acquisition) Tag: Please do not remove --\x3e';
a.addClientFiltersList(["aemproduction.filters.SalesforceLiveAgentSales1"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","name":"COMMERCIAL: Travel clicktripz [v1.5]","description":"RFC-8285"});var t="aemproduction.tags.commercialtravelclicktripzv15.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent='\x3cscript type\x3d"text/javascript" src\x3d"https://compare-static.telegraph.co.uk/custom/telegraph/cti_telegraph.js" async\x3e\x3c/script\x3e';a.addClientFiltersList(["aemproduction.filters.Default4","aemproduction.filters.IncludeTravel"]);
a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"name":"WEBTEAM: MyTelegraph","description":"Designed to initialise MyTelegraph when it matches a given set of criteria","timeout":"400"});var t="aemproduction.tags.webteammytelegraph.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="";a.addClientFiltersList(["aemproduction.filters.DefaultFilterMatchAll31","aemproduction.filters.ExcludeSecure112","aemproduction.filters.ExcludeChaseTelegraphCoUk1","aemproduction.filters.ExcludeContactUs"]);
a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){function K(){window.tmgAds=window.tmgAds||{};window.tmgAds.mytelegraph=true}(function(){function D(){p();H();if(S()&&W())M=true;if(M){K();ca().then(function(){ea()})}}function p(){if(document.location.href.indexOf(J)>-1&&localStorage)localStorage.setItem(J,"true");if(document.location.href.indexOf(J+"\x3dfalse")>-1&&localStorage)localStorage.removeItem(J)}
function H(){var g=document.getElementsByTagName("meta");for(var b=g.length-1;b>=0;b--){if(g[b].name=="DCSext.Content_Type")Q["contentType"]=g[b].content;if(g[b].name=="tmgads.pagetype")Q["pageType"]=g[b].content;if(g[b].name=="tmgads.businessSegment")Q["businessSegment"]=g[b].content;if(g[b].name=="tmgads.channel")Q["channel"]=g[b].content}return g}var M=false;var Q={};var J="tmg.activate.myTelegraph";var L=function(){var g=false;var b=document.location.href;var y=/qa18|qa20/i;if(y.test(b))g=true;
return g};var S=function(){var g=false;var b=["story","live","video","index","topic","hub"];if(b.indexOf(Q["pageType"])>-1)g=true;return g};var W=function(){var g=false;var b=["sponsored","commerce","aboutus","events","financial-services","promotions","rewards"];if(b.indexOf(Q["businessSegment"])===-1)g=true;return g};var Z=function(){var g=(Cookies.get("tmg_p13n")||"").indexOf("@telegraph.co.uk")>-1;var b=localStorage&&localStorage.getItem(J)!==null;var y=g||b;return y};var Y=function(g){var b=false;
var y=[];if(y.indexOf(g)>-1)b=true;return b};var ea=function(){var g=document.body.classList&&document.body.classList.contains("articleRenderer2");var b=!tmg.user.isRegistered()||!tmg.user.isLoggedIn();var y=tmg.getMediaQuery().indexOf("xs")>-1;var r=true;if(y&&b&&g)r=false;if(r)tmg.feature.turnOn(".my-telegraph");if(g){tmg.mytelegraph.init({active:true});tmg.mytelegraph.turnOnSave();if(Q["channel"]==="travel")tmg.feature.turnOff(".follow-list__section--topics");tmg.mytelegraph.turnOnFollow()}};var ca=
function(){return new Promise(function(g,b){var y;var r=20;(function f(){r=r*2;clearTimeout(y);if(tmg.mytelegraph&&tmg.feature)return g();y=setTimeout(f,r)})()})};D()})()};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"ANALYTICS: Facebook [v2.0]","disabled":false,"id":53480643,"locked":false,"locationObject":"BODY"});var t="aemproduction.tags.marketingfacebook_periscopixv20.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="\x3c!-- Facebook Pixel Code --\x3e\n\x3cscript\x3e\n!function(f,b,e,v,n,t,s){if(f.fbq)return;n\x3df.fbq\x3dfunction(){n.callMethod?\nn.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f.ac_fbq)f._fbq\x3dn;\nn.push\x3dn;n.loaded\x3d!0;n.version\x3d'2.0';n.queue\x3d[];t\x3db.createElement(e);t.async\x3d!0;\nt.src\x3dv;s\x3db.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,\ndocument,'script','//connect.facebook.net/en_US/fbevents.js');\n\nfbq('init', '678338115628438');\nfbq('track', \"PageView\");\x3c/script\x3e\n\x3cnoscript\x3e\x3cimg height\x3d\"1\" width\x3d\"1\" style\x3d\"display:none\"\nsrc\x3d\"https://www.facebook.com/tr?id\x3d678338115628438\x26ev\x3dPageView\x26noscript\x3d1\"\n/\x3e\x3c/noscript\x3e\n\x3c!-- End Facebook Pixel Code --\x3e";
a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"async":true,"name":"ADTECH: Evidon [0.1.3]","description":"[IC 16:32 24/05] Updated to remove test wrapping\n[IC 17:24 24/05] Disabled briefly as issues on live site\nSD:2018-05-30-17:36: removed comment/console.logs","disabled":false});var t="aemproduction.tags.adtechevidon013.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="\x3cscript type\x3d\"text/javascript\"\x3e\n  //if(window.location.search.indexOf('evidontest')\x3e0){\n  //  console.log('EVIDON: OpenTag implementation');\n  /*\n   0.1.2: 2018-07-18\n   - New Health index pages are potentially introucing race conditions in slow loading tmg-gpt.js\n   - Turned this into a function c all that calls itelf if tmgAds is not ready yet\n   \n   0.1.1: 2018-05-17\n   - base version\n   - added creation of the gdpr:priorConsent event\n   - formatting x/l pages - down the page 71px\n   - formatting m pages - down the page 160px\n   - formatting xs/s pages - down the page 108px\n  */\n  ////////////////////////////////////////////////////////////////////////////////////////////////\n  // The Evidon banner only shows IF no '_evidon_consent_cookie' cookie exists. We therefore know the consent will fire only when the cooikie is not there we can use this to determine when to push the site down\n  // layout the page to accept the banner IF the cookie does not exist.\n\nfunction _evidonInit(){\n  if(document.cookie.indexOf(\"_evidon_consent_cookie\") \x3d\x3d -1){\n//    console.log('EVIDON: _evidon_consent_cookie DOES NOT EXIST');\n    // Add flag that identifies the gdprConsent is visible \n    document.body.classList.add(\"gdprConsentNotice\");\n    // If the page ad model is 'ban' this means there's a sticky banner at the top of the page on X/L pages, we need to move the container div of that adlsot down 71px (and vice versa when the user clicks the OK button)\n//    console.log('EVIDON: after - document.body.classList \x3d ',tmgAds.config.deliveryModel.viewport);\n    if(tmgAds.config.deliveryModel.viewport \x3d\x3d 'x' || tmgAds.config.deliveryModel.viewport \x3d\x3d 'l'){\n//      console.log('EVIDON: Index page (X/L) - 71px');\n      // add padding from the banner on index pages\n      document.body.style.marginTop \x3d \"71px\";\n      if(tmgAds.config.deliveryModel.sticky \x26\x26 tmgAds.config.deliveryModel.model \x3d\x3d 'ban'){\n        // Reposition sticky banner\n//        console.log('EVIDON: Sticky banner - adding some depth');\n        document.getElementsByClassName('advert-banner')[0].style.top \x3d '71px';         // pushes the banner container down to remain sticky\n      }\n    }\n    if(tmgAds.config.deliveryModel.viewport \x3d\x3d 'm'){\n//      console.log('EVIDON: Index page (M) - 108px');\n      // add padding from the banner on index pages\n      // only have to push the site down, not adslots   \n      document.body.style.marginTop \x3d \"108px\";\n    }\n    if(tmgAds.config.deliveryModel.viewport \x3d\x3d 'xs' || tmgAds.config.deliveryModel.viewport \x3d\x3d 's'){\n  //    console.log('EVIDON: Index page (XS/S) - 160px');\n      // add padding from the banner on index pages\n      // only have to push the site down, not adslots   \n      document.body.style.marginTop \x3d \"160px\";\n    }\n  } else {\n//    console.log('EVIDON: _evidon_consent_cookie EXISTS');\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////\n  // Add an event handler for the gdpr:priorConsent event\n  document.addEventListener('gdpr:priorConsent', function(){\n//    console.log('EVIDON: gdpr:priorConsent event fired');\n    // remove the flag that identifies the gdprConsent is visible \n    document.body.classList.remove(\"gdprConsentNotice\");\n    // All instances of the notice reuqire us to revert the Margin-top to 0px and then we'll chaneg this below \n//    console.log('EVIDON: Reverting page to 0px margin-top');\n    document.body.style.marginTop \x3d \"0px\";\n    // If the page ad model is 'ban' this means there's a sticky banner at the top of the page on X/L pages, we need to move the container div of that adlsot down 71px (and vice versa when the user clicks the OK button)\n    if(tmgAds.config.deliveryModel.viewport \x3d\x3d 'x' || tmgAds.config.deliveryModel.viewport \x3d\x3d 'l' \x26\x26 (tmgAds.config.deliveryModel.sticky \x26\x26 tmgAds.config.deliveryModel.model \x3d\x3d 'ban')){\n      // Reposition sticky banner\n//      console.log('EVIDON: Index page (X/L) - Sticky Banner - removing some depth on the advert-banner class');\n      document.getElementsByClassName('advert-banner')[0].style.top \x3d '0px';        // moves the banner back up the page\n    }\n  });\n  ////////////////////////////////////////////////////////////////////////////////////////////////\n  //\n  (function (id) {\n    function append(scriptid, url, async) {\n      var d \x3d document, sn \x3d 'script', f \x3d d.getElementsByTagName(sn)[0];\n      if (!f) f \x3d d.head;\n      var s \x3d d.createElement(sn);\n      s.async \x3d true;\n      s.id \x3d scriptid;\n      s.src \x3d url;\n      f.parentNode.insertBefore(s, f);\n    }\n    function getRootDomain() {\n      var parts \x3d window.location.hostname.split('.');\n      if (parts.length \x3d\x3d\x3d 2) rootDomain \x3d parts[0];\n      else if (parts.length \x3e 2) {\n      // see if the next to last value is a common tld\n      var part \x3d parts[parts.length - 2];\n      if (part \x3d\x3d\x3d 'com' || part \x3d\x3d\x3d 'co') {\n        rootDomain \x3d parts[parts.length - 3]; // go back one more\n      }\n      else {\n        rootDomain \x3d part;\n      }\n    }\n    return rootDomain;\n  }\n  window.evidon \x3d {};\n  window.evidon.id \x3d id;\n  var cdn \x3d '//c.evidon.com/', rootDomain \x3d getRootDomain(), noticecdn \x3d cdn + 'sitenotice/';\n  append('evidon-notice', noticecdn + 'evidon-sitenotice-tag.js', false);\n  append('evidon-location', cdn + 'geo/country.js', true);\n  append('evidon-themes', noticecdn + id + '/snthemes.js', true);\n  if (rootDomain) append('evidon-settings', noticecdn + id + '/' + rootDomain + '/settings.js', true);\n  window.evidon.priorConsentCallback \x3d function () {\n//      console.log('EVIDON: window.evidon.priorConsentCallback() called');\n      var tmpEventName \x3d 'gdpr:priorConsent';\n      var tmpEvent \x3d new CustomEvent(tmpEventName);   // had to use CustomEvent as this was breaking in some IEs apparently.\n      document.dispatchEvent(tmpEvent);\n    };\n  })(1926);\n//}\n}\n\n// if tmgAds.config.deliveryModel exists then run the function, esle queue it\nfunction _evidonInitQueue(){\n  var timeoutRetryDelay \x3d 10;\n  var timeoutReference;\n  \n  function _execute() {\n    clearTimeout(timeoutReference);\n    timeoutRetryDelay \x3d timeoutRetryDelay * 2;\n    \n    if(typeof tmgAds.config !\x3d 'undefined'){\n      if(typeof tmgAds.config.deliveryModel !\x3d 'undefined'){\n        console.log('EVIDON: success');\n        _evidonInit();\n      } else {\n        console.log('EVIDON: retrying - tmgAds.config');\n        timeoutReference \x3d setTimeout(function(){_execute();}, timeoutRetryDelay);\n      }\n    } else {\n      console.log('EVIDON: retrying - tmgAds.config.deliveryModel');\n      timeoutReference \x3d setTimeout(function(){_execute();}, timeoutRetryDelay);\n    }\n  }\n  \n  _execute();\n}\n// try and load\n_evidonInitQueue();\n\n\x3c/script\x3e";
a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","name":"COMMERCIAL: Acquisition_complete/[v1.0]"});var t="aemproduction.tags.commercialacquisitioncompletev10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent='\x3c!-- Acquisition journey complete  --\x3e\n\x3cimg src\x3d"https://traffic.outbrain.com/network/trackpxl?advid\x3d23890\x26action\x3dview" style\x3d"position: absolute" height\x3d"1" width\x3d"1" border\x3d"0" alt\x3d"" class\x3d"acquisitioncomplete" /\x3e';a.addClientFiltersList(["aemproduction.filters.IncludeSecurePaymentConfirmation1"]);
a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"COMMERCIAL: Confirmation_adwords:[v1.0]","disabled":false,"id":56171982,"locked":false,"locationObject":"BODY"});var t="aemproduction.tags.commercialconfirmation_adwordsv10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent='\x3c!-- Google Code for Remarketing Tag --\x3e\n\n\x3c!--------------------------------------------------\n\nRemarketing tags may not be associated with personally identifiable information or placed on pages related to sensitive categories. See more information and instructions on how to setup the tag on: http://google.com/ads/remarketingsetup\n\n---------------------------------------------------\x3e\n\n\x3cscript type\x3d"text/javascript"\x3e\n\n/* \x3c![CDATA[ */\n\nvar google_conversion_id \x3d 971994445;\n\nvar google_custom_params \x3d window.google_tag_params;\n\nvar google_remarketing_only \x3d true;\n\n/* ]]\x3e */\n\n\x3c/script\x3e\n\n\x3cscript type\x3d"text/javascript" src\x3d"//www.googleadservices.com/pagead/conversion.js"\x3e\n\n\x3c/script\x3e\n\n\x3cnoscript\x3e\n\n\x3cdiv style\x3d"display:inline;"\x3e\n\n\x3cimg height\x3d"1" width\x3d"1" style\x3d"border-style:none;" alt\x3d"" src\x3d"//googleads.g.doubleclick.net/pagead/viewthroughconversion/971994445/?value\x3d0\x26amp;guid\x3dON\x26amp;script\x3d0"/\x3e\n\n\x3c/div\x3e\n\n\x3c/noscript\x3e';
a.addClientFiltersList(["aemproduction.filters.DefaultFilterMatchAll2","aemproduction.filters.IncludeSecurePaymentConfirmation"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","name":"COMMERCIAL: Clear TMG Session cookie [v1.0]","disabled":false});var t="aemproduction.tags.commercialcleartmgsessioncookiev10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent='\x3cscript\x3e\n(function() {\n\tvar cookies \x3d {},\n\t\tsplit,\n\t\tnameValue,\n\t\ti;\n\tif (document.cookie \x26\x26 document.cookie !\x3d\x3d "") {\n\t\tsplit \x3d document.cookie.split(";");\n\t\ti \x3d 0;\n\t\tfor (; i \x3c split.length; i \x3d i + 1) {\n\t\t\tnameValue \x3d split[i].split("\x3d");\n\t\t\tnameValue[0] \x3d nameValue[0].replace(/^ /, "");\n\t\t\tcookies[decodeURIComponent(nameValue[0])] \x3d decodeURIComponent(nameValue[1]);\n\t\t}\n\t}\n\tif (!cookies["tmg_pid"]\x26\x26cookies["tmg_session"]){\n\t\tdocument.cookie \x3d \'tmg_session\x3d; expires\x3d\'+ (new Date(0).toUTCString()) +\'; path\x3d/; domain\x3d.telegraph.co.uk\'\n\t};\n})();\n\x3c/script\x3e';
a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"name":"ANALYTICS: Comscore [v5.0]","disabled":false});var t="aemproduction.tags.analyticscomscorev50.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="";a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){if(typeof window.tmgAdsLog!="function"){window.tmgAdsEvent=function(D,p){var H="tmgAds:"+D;var M=new CustomEvent(H);document.dispatchEvent(M)};
window.tmgAdsLog=function(D,p){if(void 0!==typeof tmgAds){var H={time:("00"+(tmgAdsTimer()/1E3).toFixed(5)).slice(-9),callee:null,extra:p,styling:"",css:{none:"background: #FFFFFF; color: #000000",alert:"background: #D4A6A6; color: #000000",success:"background: #B2D8B2; color: #000000",error:"background: #FFB2B2; color: #000000",warning:"background: #FFE4B2; color: #000000",optimizely:"background: #FFDD37: color: #000000",event:"background: #C0CEDC; color: #000000"},msg:D};arguments.callee.caller&&
(H.callee=arguments.callee.caller.name),H.msg="%c[TMG-GPT]["+H.time+"]["+(H.callee+"                         ").substr(0,25)+"]: "+H.msg,H.styling=H.css.none,"ALERT"==D.substr(0,5)&&(H.styling=H.css.alert),"OPTIMIZELY"==D.substr(0,10)&&(H.styling=H.css.optimizely),"SUCCESS"==D.substr(0,7)&&(H.styling=H.css.success),"ERROR"==D.substr(0,5)&&(H.styling=H.css.error),"WARNING"==D.substr(0,7)&&(H.styling=H.css.warning),"EVENT"==D.substr(0,5)&&(H.styling=H.css.event),"INFO"==D.substr(0,4)&&(H.styling=H.css.info),
tmgAds.log.push(H.msg)}};window.tmgAdsPerf=function(D,p){if(void 0!==window.RUM){if(tmgAdsLog("SUCCESS: RUM installed.... go go go go! - "+D+" - "+p[0]),tmgAds.log.push("Performance: RUM Installed - "+D+" - "+p[0]),"now"==D)return RUM.now();if("mark"==D)return tmgAds.metrics[p[0]]=tmgAdsTimer(),RUM.mark(p[0]);if("measure"==D)return RUM.measure(p[0],p[1],p[2])}else if(void 0!==window.performance){if(tmgAdsLog("WARNING: RUM NOT installed.... using window.performance API instead! - "+D+" - "+p[0]),tmgAds.log.push("Performance: RUM Not installed, using performance API - "+
D+" - "+p[0]),"now"==D)return window.performance.now();if("mark"==D)return tmgAds.metrics[p[0]]=tmgAdsTimer(),window.performance.mark(p[0]);if("measure"==D)return window.performance.measure(p[0],p[1],p[2])}else{if(tmgAdsLog("WARNING: RUM NOT installed AND window.performance not supported... - "+D+" - "+p[0]),tmgAds.log.push("Performance: No RUM, No perrformance API - "+D+" - "+p[0]),"now"==D)return RUM.now();if("mark"==D)return void(tmgAds.metrics[p[0]]=tmgAdsTimer());if("measure"==D)return}};window.tmgAdsTimer=
function(){var D=!1;return D=void 0!==window.RUM&&void 0!==window.RUM.now?window.RUM.now():void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),parseFloat(D.toFixed(3))};window.tmgAdsLoadJS=function(D,p,H){var M={name:D,status:"start",type:"text/javascript",url:p,performance:{loadjsStarted:tmgAdsTimer(),loadjsRequested:0,loadjsLoaded:0}};tmgAdsEvent(D+":"+M.status);var Q=document.createElement("script");Q.type="text/javascript",Q.async=!0,Q.onload=function(){M.status=
"loaded",tmgAdsEvent(D+":"+M.status),M.performance.loadjsLoaded=tmgAdsTimer(),tmgAdsPerf("mark",["adverts_loaded_"+D]),tmgAds.metrics[D]||(tmgAds.metrics[D]={});for(var L in M.performance)tmgAds.metrics[D][L]=M.performance[L];tmgAds.metrics[D].loadjsLatency=parseFloat((tmgAds.metrics[D].loadjsLoaded-tmgAds.metrics[D].loadjsStarted).toFixed(3)),"function"==typeof H&&H()},M.status="requested",M.performance.loadjsRequested=tmgAdsTimer(),tmgAdsEvent(D+":"+M.status),tmgAdsPerf("mark",["adverts_requested_"+
D]),Q.src=M.url;var J=document.getElementsByTagName("script")[0];J.parentNode.insertBefore(Q,J)};window.tmgAdsGetMetaTag=function(D){try{var p=null;if(null!==document.getElementsByName(D)[0]&&void 0!==document.getElementsByName(D)[0]){if(tmgAdsLog("tmgAdsGetMetaTag("+D+"): document.getElementsByName('"+D+"')[0] exists"),document.getElementsByName(D)[0].content.length>0&&(p=document.getElementsByName(D)[0].content.toLowerCase(),p="tmgads.articleid"==D?decodeURIComponent(document.getElementsByName(D)[0].content):
decodeURIComponent(document.getElementsByName(D)[0].content.toLowerCase()),tmgAdsLog("tmgAdsGetMetaTag("+D+'): "'+p+'"')),"tmgads.keywords"==D)if(null!==p){p=p.split(",");for(var H=0;H<p.length;H++)String.prototype.trim?p[H]=p[H].trim():null!==typeof p[H]?p[H]=p[H].replace(/^\s\s*/,"").replace(/\s\s*$/,""):tmgAdsLog("tmgAdsGetMetaTag("+D+'): tmp[i] is null -\x3e "'+p[H]+'"'),tmgAdsLog("tmgAdsGetMetaTag("+D+'): tmgads.keywords -\x3e "'+p[H]+'"')}else tmgAdsLog("tmgAdsGetMetaTag("+D+"): tmgads.keywords -\x3e tmgads.keywords content is not set")}else tmgAdsLog("tmgAdsGetMetaTag("+
D+"): document.getElementsByName('"+D+"')[0] does not exist -\x3e "+p);return p}catch(M){tmgAdsLog("ERROR: tmgAdsGetMetTag("+D+") failed -\x3e error\x3d"+M.message)}};window.tmgAds=window.tmgAds||{};window.tmgAds.log=window.tmgAds.log||[];window.tmgAds.metrics=window.tmgAds.metrics||{ads:{}}}var K={name:"comscore",ver:"5.0",date:"2017-08-30",site:tmgAdsGetMetaTag("tmgads.channel"),url:(document.location.protocol=="https:"?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",callbackFn:function(){}};
K.id=K.name+"-"+K.ver;window._comscore=[];window._comscore.push({c1:"2",c2:"6035736",c3:"",options:{url_append:"comscorekw\x3d"+K.site}});tmgAdsLoadJS(K.id,K.url,K.callbackFn)};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"COMMERCIAL: Confirmation_facebook:[v1.0]","disabled":false,"id":56171989,"locked":false,"locationObject":"BODY"});var t="aemproduction.tags.commercialconfirmation_facebookv10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="\x3c!-- Facebook Conversion Code for Subscriptions - Telegraph UK --\x3e \n\x3cscript\x3e(function() {   var _fbq \x3d window._fbq || (window._fbq \x3d []);   if (!_fbq.loaded) {     var fbds \x3d document.createElement('script');     fbds.async \x3d true;     fbds.src \x3d '//connect.facebook.net/en_US/fbds.js';     var s \x3d document.getElementsByTagName('script')[0];     s.parentNode.insertBefore(fbds, s);     _fbq.loaded \x3d true;   } })(); window._fbq \x3d window._fbq || []; window._fbq.push(['track', '6024247411211', {'value':order.price,'currency':'GBP'}]); \x3c/script\x3e \x3cnoscript\x3e\x3cimg height\x3d\"1\" width\x3d\"1\" alt\x3d\"\" style\x3d\"display:none\" src\x3d\"https://www.facebook.com/tr?ev\x3d6024247411211\x26amp;cd[value]\x3d0.00\x26amp;cd[currency]\x3dGBP\x26amp;noscript\x3d1\" /\x3e\x3c/noscript\x3e";
a.addClientFiltersList(["aemproduction.filters.DefaultFilterMatchAll2","aemproduction.filters.IncludeSecurePaymentConfirmation"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"name":"COMMERCIAL: Travel Facebook Tracking [v1.0]","description":"RFC-9682"});var t="aemproduction.tags.commercialtravelfacebooktrackingv10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="";a.addClientFiltersList(["aemproduction.filters.TravelOnly"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList(["aemproduction.tags.marketingfacebook_periscopixv20.Tag"]);a.pre=function(){};a.script=
function(){fbq("init","349979492031526");fbq("track","PageView")};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"name":"ANALYTICS: Travel Kissmetrics [v1.3]","description":"RFC-10440"});var t="aemproduction.tags.analyticstravelkissmetricsv10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="";a.addClientFiltersList(["aemproduction.filters.TravelOnly"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){function K(H){setTimeout(function(){var M=document;var Q=
M.getElementsByTagName("script")[0];var J=M.createElement("script");J.type="text/javascript";J.async=true;J.src=H;Q.parentNode.insertBefore(J,Q)},1)}var D=D||[];var p=p||"3f305d24cf322ffd19390e3929f4c407b8c7a12a";K("//i.kissmetrics.com/i.js");K("//scripts.kissmetrics.com/"+p+".2.js");document.addEventListener("DOMContentLoaded",function(){if(document.getElementsByClassName("product-listing__headline").length>0)D.push(["record","product listing present"])})};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","name":"COMMERCIAL: Delete liveStreamAutoRefresh cookies [v1.0]","disabled":false});var t="aemproduction.tags.commercialdeletelivestreamautorefreshcookiesv10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="\x3cscript\x3e\n(function(){\n\tvar keyValuePairs \x3d document.cookie.split('; '), name;\n\tfor(var i \x3d 0; i \x3c keyValuePairs.length; i++) {\n\t\tname \x3d keyValuePairs[i].substring(0, keyValuePairs[i].indexOf('\x3d'));\n\t\tif(name.indexOf('liveStreamAutoRefresh_') \x3e -1) {\n\t\t\tdocument.cookie \x3d name +\"\x3d;expires\x3dThu, 01 Jan 1970 00:00:01 GMT\";\n\t\t}\n\t}\n})();\n\x3c/script\x3e";
a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","name":"ANALYTICS: Chartbeat [v1.4]","description":"Code to initialise Chartbeat - analytics tool for Editorial\n1.4: update to include tmg.user states"});var t="aemproduction.tags.analyticschartbeatv14.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="\x3cscript type\x3d'text/javascript'\x3e\n\tvar chartbeatStart \x3d window.performance ? window.performance.mark(\"chartbeat_start\") : new Date().getTime();\n\tvar _sf_async_config \x3d _sf_async_config || {};\n\n\tvar metaAuthor \x3d document.querySelector('meta[name\x3d\"DCSext.author\"]');\n\tvar metaAuthorContent \x3d metaAuthor \x26\x26 metaAuthor.getAttribute(\"content\");\n\tvar metaSegment \x3d document.querySelector('meta[name\x3d\"tmgads.businessSegment\"]');\n\tvar metaSegmentContent \x3d metaSegment \x26\x26 metaSegment.getAttribute(\"content\");\n\n\tvar getUserStatus \x3d function() {\n\t\tif ( typeof tmg !\x3d \"undefined\" \x26\x26 tmg.user.isLoggedIn() ) {\n\t\t\treturn tmg.user.isSubscriber() ? 'paid' : 'lgdin'\n\t\t} else {\n\t\t\treturn 'anon'\n\t\t}\n\t};\n\n\tvar getAdobeVisitorID \x3d function() {\n\t\treturn ( typeof s !\x3d \"undefined\" \x26\x26 s.marketingCloudVisitorID ) ? s.marketingCloudVisitorID : '00000000000000000000000000000000000000';\n\t};\n\n\t/** CONFIGURATION START **/\n\t_sf_async_config.uid \x3d 65595;\n\t_sf_async_config.idSync \x3d {\n\t\t\"mcvid\": getAdobeVisitorID()\n\t};\n\t_sf_async_config.domain \x3d 'telegraph.co.uk';\n\t_sf_async_config.useCanonical \x3d true;\n\t_sf_async_config.sections \x3d metaSegmentContent;\n\t_sf_async_config.authors \x3d metaAuthorContent;\n\t_sf_async_config.videoType \x3d 'ooyala';\n\t_sf_async_config.autoDetect \x3d false;\n\t/** CONFIGURATION END **/\n\n\t/** Push appropriate ['key', 'value'] pair for given user type to _cbq array **/\n\tvar _cbq \x3d window._cbq \x3d (window._cbq || []);\n\t_cbq.push(['_acct', getUserStatus()]);\n\n\t(function () {\n\n\t\tfunction loadChartbeat() {\n\t\t\twindow._sf_endpt \x3d (new Date()).getTime();\n\t\t\tvar e \x3d document.createElement('script');\n\t\t\te.setAttribute('language', 'javascript');\n\t\t\te.setAttribute('type', 'text/javascript');\n\t\t\te.setAttribute('src', '//static.chartbeat.com/js/chartbeat_video.js');\n\t\t\tdocument.body.appendChild(e);\n\t\t}\n\n\t\tvar oldonload \x3d window.onload;\n\t\twindow.onload \x3d (typeof window.onload !\x3d 'function') ? loadChartbeat : function() {\n\t\t\tconsole.log('window.onload -\x3e loadCharbeat');\n\t\t\toldonload();\n\t\t\tloadChartbeat();\n\t\t};\n\t})();\n\n\tvar chartbeatEnd \x3d window.performance ? window.performance.mark(\"chartbeat_end\") : new Date().getTime();\n\tif (!window.performance \x26\x26 console){\n\t\tconsole.log(\"Affiliate Tracking load time is:\"+ (chartbeatEnd - chartbeatStart))\n\t} else if (window.performance) {\n\t\twindow.performance.measure(\"js_chartbeat_track\", \"chartbeat_start\", \"chartbeat_end\" )\n\t\twindow.performance.clearMarks(\"chartbeat_start\");\n\t\twindow.performance.clearMarks(\"chartbeat_end\");\n\t}\n\x3c/script\x3e";
a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"name":"TECH: Global nav HTML embed [v1.2]","disabled":false});var t="aemproduction.tags.techglobalnavhtmlembedv12.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="";a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){var K='\x3cstyle\x3e.header-nav-global .has-embed-visible .header-nav-global__html-embed{-webkit-animation:global-nav-html-reveal 0.3s forwards ease-out;animation:global-nav-html-reveal 0.3s forwards ease-out;display:block}.header-nav-global__html-embed{display:none;max-width:100%;opacity:0;position:absolute;right:0;top:42px;z-index:1000;overflow:hidden}.global--nav--container{font-family:"Austin News Deck Medium", Georgia, Times, serif;-webkit-font-smoothing:antialiased;width:450px;height:332px;background-image:url("/content/dam/subscriptions/premium-product/bgd.png");background-position:0 5px;background-size:100% auto;background-repeat:no-repeat;background-color:#F9F6F2;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.global--nav--container .global--nav--content{-ms-flex-item-align:start;align-self:flex-start}.global--nav--container .global--nav--title{color:#9A6710;font-size:30px;line-height:32px;width:70%;padding:25px 0 0 25px}.global--nav--container .global--nav--subtitle{color:#6B5E3F;font-size:20px;line-height:22px;padding:20px 0 0 25px}.global--nav--container a{text-decoration:none}.global--nav--container .global--nav--cta--container{width:150px;height:48px;background-color:#C38419;font-family:"Telesans Text Regular", Arial, sans-serif;font-size:14px;text-decoration:none;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:25px 0 0 25px}.global--nav--container .global--nav--cta{color:white}.global--nav--container .global--nav--footer{width:400px;height:40px;padding-top:10px;margin:0 25px;border-top:1px solid #DDDDDD}.global--nav--container .global--nav--footer .global--nav--footer--left{width:98px;float:left;margin-top:4px}.global--nav--container .global--nav--footer .global--nav--footer--right{width:106px;float:right}.global--nav--container img{width:100%;height:auto}\x3c/style\x3e\x3cdiv class\x3d"global--nav--container"\x3e\x3cdiv class\x3d"global--nav--content"\x3e\x3cdiv class\x3d"global--nav--title"\x3eUnlimited access to exclusive stories\x3c/div\x3e\x3cdiv class\x3d"global--nav--subtitle"\x3eFree for 30 days, then just \u00a31 per week\x3c/div\x3e\x3ca href\x3d"http://www.telegraph.co.uk/subscriptions/sub-bar/?icid\x3dgeneric_premiumsub_generic_generic_topnav-hover\x26redirectTo\x3dwww.telegraph.co.uk"\x3e\x3cdiv class\x3d"global--nav--cta--container"\x3e\x3cdiv class\x3d"global--nav--cta"\x3eStart free trial\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"global--nav--footer"\x3e\x3cdiv class\x3d"global--nav--footer--line"\x3e\x3c/div\x3e\x3cdiv class\x3d"global--nav--footer--left"\x3e\x3cimg src\x3d"/content/dam/subscriptions/premium-product/tele-micro.png" /\x3e\x3c/div\x3e\x3cdiv class\x3d"global--nav--footer--right"\x3e\x3cimg src\x3d"/content/dam/subscriptions/premium-product/Premium-gold.png" /\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e';
var D=document.querySelectorAll(".header-nav-global__html-embed");if(D)D.forEach(function(p){p.innerHTML=K})};a.post=function(){};a.postInitialisationSection=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"ANALYTICS: Bing [v2.0]","disabled":false,"id":53480642,"locked":false,"locationObject":"BODY"});var t="aemproduction.tags.marketingbingperiscopixv20.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent='\x3cscript\x3e(function(w,d,t,r,u){var f,n,i;w[u]\x3dw[u]||[],f\x3dfunction(){var o\x3d{ti:"4047056"};o.q\x3dw[u],w[u]\x3dnew UET(o),w[u].push("pageLoad")},n\x3dd.createElement(t),n.src\x3dr,n.async\x3d1,n.onload\x3dn.onreadystatechange\x3dfunction(){var s\x3dthis.readyState;s\x26\x26s!\x3d\x3d"loaded"\x26\x26s!\x3d\x3d"complete"||(f(),n.onload\x3dn.onreadystatechange\x3dnull)},i\x3dd.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i)})(window,document,"script","//bat.bing.com/bat.js","uetq");\x3c/script\x3e\x3cnoscript\x3e\x3cimg src\x3d"//bat.bing.com/action/0?ti\x3d4047056\x26Ver\x3d2" height\x3d"0" width\x3d"0" style\x3d"display:none; visibility: hidden;" /\x3e\x3c/noscript\x3e';
a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","name":"ADTECH: LogEntries - AmazonA9","disabled":false});var t="aemproduction.tags.adtechlogentriesamazona9.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent='\x3cscript\x3e\n//setTimeout(function(){\n//  ///*  Copyright 2015 Logentries - Please view license at https://raw.github.com/logentries/le_js/master/LICENSE */\n//  \'use strict\';(function(b,e){"function"\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(function(){return e(b)}):"object"\x3d\x3d\x3dtypeof exports?("object"\x3d\x3d\x3dtypeof global\x26\x26(b\x3dglobal),module.exports\x3de(b)):b.LE\x3de(b)})(this,function(b){function e(a){var c\x3da.trace?(Math.random()+Math.PI).toString(36).substring(2,10):null,q\x3da.page_info,e\x3da.token,g\x3da.print,f\x3da.no_format,r;r\x3d"undefined"\x3d\x3d\x3dtypeof XDomainRequest?a.ssl:"https:"\x3d\x3d\x3db.location.protocol?!0:!1;var k;k\x3db.LEENDPOINT?b.LEENDPOINT:f?"webhook.logentries.com/noformat":"js.logentries.com/v1";k\x3d(r?"https://":"http://")+k+"/logs/"+e;var h\x3d[],l\x3d!1,s\x3d!1;if(a.catchall){var t\x3db.onerror;b.onerror\x3dfunction(a,b,d){m({error:a,line:d,location:b}).level("ERROR").send();return t?t(a,b,d):!1}}var p\x3dfunction(){var a\x3db.navigator||{doNotTrack:void 0},c\x3db.screen||{};return{url:(b.location||{}).pathname,referrer:document.referrer,screen:{width:c.width,height:c.height},window:{width:b.innerWidth,height:b.innerHeight},browser:{name:a.appName,version:a.appVersion,cookie_enabled:a.cookieEnabled,do_not_track:a.doNotTrack},platform:a.platform}},u\x3dfunction(){var a\x3dnull,a\x3dArray.prototype.slice.call(arguments);if(0\x3d\x3d\x3da.length)throw Error("No arguments!");return a\x3d1\x3d\x3d\x3da.length?a[0]:a},m\x3dfunction(a){var b\x3du.apply(this,arguments),d\x3d{event:b};"never"\x3d\x3d\x3dq||s\x26\x26"per-entry"!\x3d\x3dq||(s\x3d!0,"undefined"\x3d\x3d\x3dtypeof b.screen\x26\x26"undefined"\x3d\x3d\x3dtypeof b.browser\x26\x26m(p()).level("PAGE").send());c\x26\x26(d.trace\x3dc);return{level:function(a){if(g\x26\x26"undefined"!\x3d\x3dtypeof console\x26\x26"PAGE"!\x3d\x3da){var b\x3dnull;"undefined"!\x3d\x3dtypeof XDomainRequest\x26\x26(b\x3dd.trace+" "+d.event);try{console[a.toLowerCase()].call(console,b||d)}catch(c){console.log(b||d)}}d.level\x3da;return{send:function(){var a\x3d[],b\x3dJSON.stringify(d,function(b,d){if("undefined"\x3d\x3d\x3dtypeof d)return"undefined";if("object"\x3d\x3d\x3dtypeof d\x26\x26null!\x3d\x3dd){var c;a:{for(c\x3d0;c\x3ca.length;c++)if(d\x3d\x3d\x3da[c])break a;c\x3d-1}if(-1!\x3d\x3dc)return"\x3c?\x3e";a.push(d)}return d});l?h.push(b):n(e,b)}}}}};this.log\x3dm;var n\x3dfunction(a,b){l\x3d!0;var d;d\x3d"undefined"!\x3d\x3dtypeof XDomainRequest?new XDomainRequest:new XMLHttpRequest;d.constructor\x3d\x3d\x3dXMLHttpRequest?d.onreadystatechange\x3dfunction(){4\x3d\x3d\x3dd.readyState\x26\x26(400\x3c\x3dd.status?(console.error("Couldn\'t submit events."),410\x3d\x3d\x3dd.status\x26\x26console.warn("This version of le_js is no longer supported!")):(301\x3d\x3d\x3dd.status\x26\x26console.warn("This version of le_js is deprecated! Consider upgrading."),0\x3ch.length?n(a,h.shift()):l\x3d!1))}:d.onload\x3dfunction(){0\x3ch.length?n(a,h.shift()):l\x3d!1};d.open("POST",k,!0);d.constructor\x3d\x3d\x3dXMLHttpRequest\x26\x26(d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.setRequestHeader("Content-type","application/json"));d.overrideMimeType\x26\x26d.overrideMimeType("text");d.send(b)}}function p(a){var b,c\x3d{ssl:!0,catchall:!1,trace:!0,page_info:"never",print:!1,endpoint:null,token:null};if("object"\x3d\x3d\x3dtypeof a)for(var f in a)c[f]\x3da[f];else throw Error("Invalid parameters for createLogStream()");if(null\x3d\x3d\x3dc.token)throw Error("Token not present.");b\x3dnew e(c);var g\x3dfunction(a){if(b)return b.log.apply(this,arguments);throw Error("You must call LE.init(...) first.");};return{log:function(){g.apply(this,arguments).level("LOG").send()},warn:function(){g.apply(this,arguments).level("WARN").send()},error:function(){g.apply(this,arguments).level("ERROR").send()},info:function(){g.apply(this,arguments).level("INFO").send()}}}var c\x3d{},f\x3dfunction(a){if("string"!\x3d\x3dtypeof a.name)throw Error("Name not present.");if(c.hasOwnProperty(a.name))throw Error("A logger with that name already exists!");c[a.name]\x3dnew p(a);return!0};return{init:function(a){var b\x3d{name:"default"};if("object"\x3d\x3d\x3dtypeof a)for(var c in a)b[c]\x3da[c];else if("string"\x3d\x3d\x3dtypeof a)b.token\x3da;else throw Error("Invalid parameters for init()");return f(b)},createLogStream:f,to:function(a){if(!c.hasOwnProperty(a))throw Error("Invalid name for logStream");return c[a]},destroy:function(a){"undefined"\x3d\x3d\x3dtypeof a\x26\x26(a\x3d"default");delete c[a]},log:function(){for(var a in c)c[a].log.apply(this,arguments)},warn:function(){for(var a in c)c[a].warn.apply(this,arguments)},error:function(){for(var a in c)c[a].error.apply(this,arguments)},info:function(){for(var a in c)c[a].info.apply(this,arguments)}}});\n//  ////////////////\n//  //// Initialise LE\n//  LE.init(\'d6e35d04-752f-46f4-b79e-e17a46619789\');\n//  ////////////////\n//  if(tmgAds){\n//    if(tmgAds.headerbidding !\x3d\x3d undefined){\n//      if(tmgAds.headerbidding.amazon){\n//        if(tmgAds.headerbidding.amazon.bids){\n//          for(var i in tmgAds.headerbidding.amazon.bids){\n//            LE.log("SUCCESS: slotID\x3d"+tmgAds.headerbidding.amazon.bids[i].slotID+" amznbid\x3d"+tmgAds.headerbidding.amazon.bids[i].amznbid+" amzniid\x3d"+tmgAds.headerbidding.amazon.bids[i].amzniid+" amznp\x3d"+tmgAds.headerbidding.amazon.bids[i].amznp);\n//          }\n//        } else {\n//          LE.log("FAIL: No tmgAds.headerbidding.amazon.bids: "+window.location.href+" -- ["+navigator.userAgent+"]");\n//        }\n//      } else {\n//        LE.log("FAIL: No tmgAds.headerbidding.amazon: "+window.location.href+" -- ["+navigator.userAgent+"]");\n//      }\n//    } else {\n//      LE.log("FAIL: No tmgAds.headerbidding: "+window.location.href+" -- ["+navigator.userAgent+"]");\n//    }\n//  } else {\n//    LE.log("FAIL: No tmgAds: "+window.location.href+" -- ["+navigator.userAgent+"]");\n//  }\n//}, 10000);\n\x3c/script\x3e';a.addClientFiltersList([]);
a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"name":"ADTECH: Oriel [v1.5]"});var t="aemproduction.tags.adtechorieladblocking15.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="";a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){if(typeof window.tmgAdsLog!="function"){window.tmgAdsEvent=function(D,p){var H="tmgAds:"+D;var M=new CustomEvent(H);document.dispatchEvent(M)};
window.tmgAdsLog=function(D,p){if(void 0!==typeof tmgAds){var H={time:("00"+(tmgAdsTimer()/1E3).toFixed(5)).slice(-9),callee:null,extra:p,styling:"",css:{none:"background: #FFFFFF; color: #000000",alert:"background: #D4A6A6; color: #000000",success:"background: #B2D8B2; color: #000000",error:"background: #FFB2B2; color: #000000",warning:"background: #FFE4B2; color: #000000",optimizely:"background: #FFDD37: color: #000000",event:"background: #C0CEDC; color: #000000"},msg:D};arguments.callee.caller&&
(H.callee=arguments.callee.caller.name),H.msg="%c[TMG-GPT]["+H.time+"]["+(H.callee+"                         ").substr(0,25)+"]: "+H.msg,H.styling=H.css.none,"ALERT"==D.substr(0,5)&&(H.styling=H.css.alert),"OPTIMIZELY"==D.substr(0,10)&&(H.styling=H.css.optimizely),"SUCCESS"==D.substr(0,7)&&(H.styling=H.css.success),"ERROR"==D.substr(0,5)&&(H.styling=H.css.error),"WARNING"==D.substr(0,7)&&(H.styling=H.css.warning),"EVENT"==D.substr(0,5)&&(H.styling=H.css.event),"INFO"==D.substr(0,4)&&(H.styling=H.css.info),
tmgAds.log.push(H.msg)}};window.tmgAdsPerf=function(D,p){if(void 0!==window.RUM){if(tmgAdsLog("SUCCESS: RUM installed.... go go go go! - "+D+" - "+p[0]),tmgAds.log.push("Performance: RUM Installed - "+D+" - "+p[0]),"now"==D)return RUM.now();if("mark"==D)return tmgAds.metrics[p[0]]=tmgAdsTimer(),RUM.mark(p[0]);if("measure"==D)return RUM.measure(p[0],p[1],p[2])}else if(void 0!==window.performance){if(tmgAdsLog("WARNING: RUM NOT installed.... using window.performance API instead! - "+D+" - "+p[0]),tmgAds.log.push("Performance: RUM Not installed, using performance API - "+
D+" - "+p[0]),"now"==D)return window.performance.now();if("mark"==D)return tmgAds.metrics[p[0]]=tmgAdsTimer(),window.performance.mark(p[0]);if("measure"==D)return window.performance.measure(p[0],p[1],p[2])}else{if(tmgAdsLog("WARNING: RUM NOT installed AND window.performance not supported... - "+D+" - "+p[0]),tmgAds.log.push("Performance: No RUM, No perrformance API - "+D+" - "+p[0]),"now"==D)return RUM.now();if("mark"==D)return void(tmgAds.metrics[p[0]]=tmgAdsTimer());if("measure"==D)return}};window.tmgAdsTimer=
function(){var D=!1;return D=void 0!==window.RUM&&void 0!==window.RUM.now?window.RUM.now():void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),parseFloat(D.toFixed(3))};window.tmgAdsLoadJS=function(D,p,H){var M={name:D,status:"start",type:"text/javascript",url:p,performance:{loadjsStarted:tmgAdsTimer(),loadjsRequested:0,loadjsLoaded:0}};tmgAdsEvent(D+":"+M.status);var Q=document.createElement("script");Q.type="text/javascript",Q.async=!0,Q.onload=function(){M.status=
"loaded",tmgAdsEvent(D+":"+M.status),M.performance.loadjsLoaded=tmgAdsTimer(),tmgAdsPerf("mark",["adverts_loaded_"+D]),tmgAds.metrics[D]||(tmgAds.metrics[D]={});for(var L in M.performance)tmgAds.metrics[D][L]=M.performance[L];tmgAds.metrics[D].loadjsLatency=parseFloat((tmgAds.metrics[D].loadjsLoaded-tmgAds.metrics[D].loadjsStarted).toFixed(3)),"function"==typeof H&&H()},M.status="requested",M.performance.loadjsRequested=tmgAdsTimer(),tmgAdsEvent(D+":"+M.status),tmgAdsPerf("mark",["adverts_requested_"+
D]),Q.src=M.url;var J=document.getElementsByTagName("script")[0];J.parentNode.insertBefore(Q,J)};window.tmgAdsGetMetaTag=function(D){try{var p=null;if(null!==document.getElementsByName(D)[0]&&void 0!==document.getElementsByName(D)[0]){if(tmgAdsLog("tmgAdsGetMetaTag("+D+"): document.getElementsByName('"+D+"')[0] exists"),document.getElementsByName(D)[0].content.length>0&&(p=document.getElementsByName(D)[0].content.toLowerCase(),p="tmgads.articleid"==D?decodeURIComponent(document.getElementsByName(D)[0].content):
decodeURIComponent(document.getElementsByName(D)[0].content.toLowerCase()),tmgAdsLog("tmgAdsGetMetaTag("+D+'): "'+p+'"')),"tmgads.keywords"==D)if(null!==p){p=p.split(",");for(var H=0;H<p.length;H++)String.prototype.trim?p[H]=p[H].trim():null!==typeof p[H]?p[H]=p[H].replace(/^\s\s*/,"").replace(/\s\s*$/,""):tmgAdsLog("tmgAdsGetMetaTag("+D+'): tmp[i] is null -\x3e "'+p[H]+'"'),tmgAdsLog("tmgAdsGetMetaTag("+D+'): tmgads.keywords -\x3e "'+p[H]+'"')}else tmgAdsLog("tmgAdsGetMetaTag("+D+"): tmgads.keywords -\x3e tmgads.keywords content is not set")}else tmgAdsLog("tmgAdsGetMetaTag("+
D+"): document.getElementsByName('"+D+"')[0] does not exist -\x3e "+p);return p}catch(M){tmgAdsLog("ERROR: tmgAdsGetMetTag("+D+") failed -\x3e error\x3d"+M.message)}};window.tmgAds=window.tmgAds||{};window.tmgAds.log=window.tmgAds.log||[];window.tmgAds.metrics=window.tmgAds.metrics||{ads:{}}}var K={name:"oriel",ver:"1.5",date:"2017-08-30",url:"https://zm232.com/hjuu8tk6z9pld1z8x3ucq1fk.js",callbackFn:function(){}};K.id=K.name+"-"+K.ver;tmgAdsLoadJS(K.id,K.url,K.callbackFn)};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"name":"ANALTYICS: Content Square [v1.0]","description":"[IC 16:39 24/05] Disabled","disabled":true});var t="aemproduction.tags.analtyicscontentsquarev10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="";a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){if(RUM)RUM.mark("content_square_script_start");(function(){var K=
document.createElement("script");K.type="text/javascript";K.async=true;K.src="//t.contentsquare.net/uxa/a253d20ad6622.js";document.getElementsByTagName("head")[0].appendChild(K)})();if(RUM){RUM.mark("content_square_script_end");performance.measure("content_square_script_loadtime","content_square_script_start","content_square_script_end")}};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","name":"ANALYTICS: Google Analytics [v2.0]","description":"RFC-10440"});var t="aemproduction.tags.analyticsgoogleanalyticsv20.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="\x3cscript\x3e\n(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']\x3dr;i[r]\x3di[r]||function(){\n(i[r].q\x3di[r].q||[]).push(arguments)},i[r].l\x3d1*new Date();a\x3ds.createElement(o),\nm\x3ds.getElementsByTagName(o)[0];a.async\x3d1;a.src\x3dg;m.parentNode.insertBefore(a,m)\n})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n\nga('create', '${profile_id}', 'auto');\nga('set', 'transport', 'beacon');\nga('send', 'pageview');\n\x3c/script\x3e";
a.addClientFiltersList([]);a.addClientVariablesMap({"profile_id":"aemproduction.variables.GAProfileID"});a.addParameters([{"name":"GA Profile ID","token":"profile_id"}]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","name":"COMMERCE: DigiDip [2.3]","disabled":false});var t="aemproduction.tags.commercedigidip23.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="\x3cscript type\x3d\"text/javascript\"\x3e\nif(tmgAds.dfp.site !\x3d 'sponsored'){\n/*\n1.0: Initial release.\n2.0: new version has multple version of the script for aem/aem-galleries/escenic, fixed typos, rolled out to escenic\n2.1: Emily decided to stop deliver of the Gallery tag...\n2.2: standardising how we monitor performance, goes into the tmgAds.metrics obj.\n2.3: Added if statement to remove from sponsored business segments\n*/\n(function(){\n  //////////////////////////////////////////////////////////////\n  var tag \x3d {\n    name        : 'digidip',\n    ver         : '2.2',\n    date        : '2017-07-25',\n    debug       : false,\n    status      : 'init',\n    type        : 'script',\n    loc         : 'script',\n    url         : false,\n    urls         : {\n      aem     : 'https://static.digidip.net/telegraph.js?loc\x3d'+window.location.href,\n      escenic : 'https://static.digidip.net/telegraph3.js?loc\x3d'+window.location.href\n    },\n    classes     : '', // blank string if no class name.       \n    count       : 0,\n    attributes  : [], // attributes to attach to the tag, each entry should be an array of two values, kay/val eg; ['data-client-id','XljfhhtlndnMVmu']\n    matched     : false,\n    delay       : 2000,\n    cms         : window.tmgAds.page.cms,\n    pagetype    : window.tmgAds.page.pagetype,\n    pagetypes   : ['article','story','gallery','video','live'], // the pagetypes this ad needs to run on\n    performance   : {\n      ts_start       : timer(),\n      ts_complete    : 0,\n      ts_requested   : 0,\n      tm_load        : 0\n    }\n  };\n  if(typeof window.tmgAds \x3d\x3d 'undefined'){\n    logit('WARNING: tmgAds is not defined');\n  }\n  //debug, make this work in debug envs.\n  if(tag.debug \x26\x26 typeof window.tmgAds \x3d\x3d 'undefined'){\n    window.tmgAds \x3d {metrics:{},dfp:{site:'test'}};\n  }\n  //\n  tag.pretag \x3d function(){\n    tag.status \x3d 'pretag';\n    logit('Pre-tag execution');\n    // ascertain which tag to use:\n    // telegraph.js  - AEM\n    // telegraph3.js - ESCENIC\n    if(window.tmgAds.page.cms \x3d\x3d 'aem'){\n      tag.url \x3d tag.urls.aem;\n    }\n    if(window.tmgAds.page.cms \x3d\x3d 'escenic'){\n      logit('Project - Escenic');\n      tag.url \x3d tag.urls.escenic;\n    }\n    // now set the site tag - we set this late due to possible race condition\n    ///////////////////\n    for(i in tag.pagetypes){\n      if(tag.pagetype \x3d\x3d tag.pagetypes[i]){\n        tag.matched \x3d true;\n        logit('Matched Site: YES - '+tag.pagetype+' - '+tag.pagetypes[i]+' - '+tag.url);\n      } else {\n        logit('Matched Site: NO  - '+tag.pagetype+' - '+tag.pagetypes[i]);\n      }\n    }\n  };\n  tag.postag \x3d function(){\n    logit('Post-tag execution');\n  };\n  //////////////////////////////////////////////////////////////\n  // functions\n  function timer(){\n    var tmp \x3d Date.now();\n    if(typeof window.performance !\x3d 'undefined'){\n      if(typeof window.performance.now !\x3d 'undefined'){\n        tmp \x3d window.performance.now(); \n      }\n     }\n     return Number(tmp.toFixed(5));\n  }\n  function logit(msg){\n    if(tag.debug){\n      console.log(tag.name+':'+tag.ver+':'+tag.status+': '+msg);\n    }\n  }\n  function actionTag(tag, action){\n    // this function records various actions being completed by the script. It's used to collect data about the script and it's performance\n    // currently only expecting 'complete' to be the only action, this provides scalability\n    tag.status \x3d action;\n    tag.performance['ts_'+action] \x3d timer();\n    logit(action+' - '+(tag.performance['ts_'+action]/1000).toFixed(5));\n    // do this if tag is loaded/complete\n    if(tag.status \x3d\x3d\x3d 'complete'){\n      tag.postag();\n      tag.performance.tm_load         \x3d Number((tag.performance.ts_complete - tag.performance.ts_start).toFixed(5));\n      window.tmgAds.metrics[tag.name] \x3d tag.performance;\n    }\n  }\n  function loadTag(tag){\n    actionTag(tag,'start');\n    tag.tag           \x3d document.createElement(tag.type);\n    tag.tag.id        \x3d tag.name;\n    tag.tag.className \x3d tag.classes;\n    // add any attributes from tag.attributes\n    for(i in tag.attributes){\n      logit('Adding attributes to tag: '+tag.attributes[i][0]+'\x3d'+tag.attributes[i][1]);\n      tag.tag.setAttribute(tag.attributes[i][0],tag.attributes[i][1]);\n    }\n    tag.tag.onload \x3d function(){\n      actionTag(tag,'complete');\n      logit('Time Start   : '+(tag.performance['ts_start']/1000).toFixed(5));\n      logit('Time Complete: '+(tag.performance['ts_complete']/1000).toFixed(5));\n      logit('Time To Load : '+(tag.performance['tm_load']/1000).toFixed(5));\n    };\n    // set tag url\n    tag.tag.src \x3d tag.url;\n    //http://stackoverflow.com/questions/12113412/dynamically-inject-javascript-file-why-do-most-examples-append-to-head/12113657#12113657\n    if(tag.type \x3d\x3d\x3d 'iframe'){\n      logit('Type \x3d IFRAME: '+tag.url);\n      tag.tag.width   \x3d '1';\n      tag.tag.height  \x3d '1';\n      tag.tag.style.display \x3d 'none';\n    } else {\n      logit('Type \x3d SCRIPT: '+tag.url);     \n    }\n    // if tag.loc is script then insert this before first script tag in page\n    if(tag.type\x3d\x3d\x3d'script' \x26\x26 tag.loc\x3d\x3d\x3d'script'){\n      logit('Inserting script tag before first script tag in page');\n      tag.performance.ts_requested \x3d timer(); \n      tag.scriptarray \x3d document.getElementsByTagName('script')[0];\n      tag.scriptarray.parentNode.insertBefore(tag.tag,tag.scriptarray);\n    } else {\n      logit('Appending tag to '+tag.loc);\n      tag.performance.ts_requested \x3d timer(); \n      document.getElementsByTagName(tag.loc)[0].appendChild(tag.tag);\n    }\n    if(tag.type\x3d\x3d\x3d'iframe'){\n      logit('Inserting iframe into '+tag.loc);\n      tag.performance.ts_requested \x3d timer(); \n      document.getElementsByTagName('body')[0].appendChild(tag.tag);\n    }\n  }\n  //////////////////////////////////////////////////////////////\n  // Now lets call this aftr a set period (tag.setTimeout)\n  if(typeof window.tmgAds !\x3d 'undefined' \x26\x26 typeof window.tmgAds.page !\x3d 'undefined' \x26\x26 typeof window.tmgAds.page.pagetype !\x3d 'undefined'){\n    if(tag.pagetypes.indexOf(window.tmgAds.page.pagetype) \x3e- 1){\n      logit('SUCCESS: Page has matched targeting criteria, loading in '+tag.delay+'ms:');\n      tag.pretag();\n      if(tag.matched){\n        loadTag(tag);\n      } else {\n        logit('WARNING: No tag called as site not matched');\n      }\n    } else {\n      logit('WARNING: Page has NOT matched targeting criteria -\x3e pagetype not matched: '+window.tmgAds.page.pagetype);\n    }\n  } else {\n    logit('WARNING: Page has NOT matched targeting criteria -\x3e tmgAds.page.pagetype not defined: ');\n  }\n})();\n}\n\x3c/script\x3e";
a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"name":"ANALYTICS: Inhouse RUM Tag","description":"In house rum tag ","timeout":"1000"});var t="aemproduction.tags.technologyinhouserumtag.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="";a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){function K(){var J=[];var L=null;if(window.performance)if(window.performance.getEntriesByType)L=
window.performance.getEntriesByType("mark");else if(window.performance.webkitGetEntriesByType)L=window.performance.webkitGetEntriesByType("mark");L=L===null?RUM.marks:L;for(var S=0;S<L.length;S++)if(L[S].name.match("^css_")||L[S].name.match("^js_")||L[S].name.match("^adverts_")||L[S].name.match("^tmg_")||L[S].name.match("^content_"))J.push(L[S]);return J}function D(){var J=document.cookie.match("(^|;)\\s*AMCV_2C7336C753C676BA0A490D4B%40AdobeOrg\\s*\x3d\\s*([^;]+)");return J?decodeURIComponent(J.pop()).split("|")[4]:
""}function p(){var J="could_not_extract";for(var L=0;L<document.getElementsByTagName("link").length;L++){var S=document.getElementsByTagName("link")[L];if(S!==undefined&&S.href!==undefined&&S.href.indexOf("/telegraph/core/clientlibs/")!==-1&&J=="could_not_extract"){J=S.href.split(".min.").length>1?S.href.split(".min.")[1]:"could_not_extract";J=J.split(".css").length>0?J.split(".css")[0]:"could_not_extract"}}return J}function H(){var J={};try{J.timestamp=(new Date).getTime();J.domain=window.location.hostname;
J.uri="/"+window.location.pathname.substr(1)+M;J.referrer=document.referrer;J.qs=window.location.search;J.visitor_id=D();J.browser=navigator.userAgent;J.view_port_height=Math.max(document.documentElement.clientHeight,window.innerHeight||0);J.view_port_width=Math.max(document.documentElement.clientWidth,window.innerWidth||0);J.performance_timing=window.performance.timing;J.release=p();J.event=document.cookie.indexOf("tmg_session\x3d")>=0?1:0;var L=navigator.connection||navigator.mozConnection||navigator.webkitConnection;
if(L!==undefined&&L.type!==undefined)J.qs=J.qs+"\x26connectionType\x3d"+L.type;if($('meta[name\x3d"DCSext.Content_Type"]').attr("content")!=="index")if($("head").html().indexOf("Unable call meter service")!==-1)J.qs=J.qs+"\x26evolok\x3dfailed";else J.qs=J.qs+"\x26evolok\x3dsuccess";try{J.fallback=document.cookie.length}catch(f){J.fallback=0}if(window.performance&&window.performance.getEntriesByType)J.requests=window.performance.getEntriesByType("resource").length;J.size=0;var S=window.performance&&
window.performance.getEntriesByType?window.performance.getEntriesByType("resource"):[];for(i=0;i<S.length;i++){var W=S[i];J.size+=W.transferSize!==null&&W.transferSize!==undefined?W.transferSize:0}J.marks=[];var Z=K();for(i=0;i<Z.length;i++){var Y=Z[i];var ea={"name":Y.name,"start_time":Y.startTime,"entry_type":Y.entry_type,"duration":Y.duration};J.marks.push(ea)}J.performance_timing={};var ca=window.performance?window.performance.timing.navigationStart:0;var g=window.performance?window.performance.timing:
{};for(var b in g)J.performance_timing[b.toUnderscore()]=g[b]-ca>0?g[b]-ca:0;J.errors=Q;J.country=$('meta[name\x3d"tmgads.geo"]').attr("content");J.channel=$('meta[name\x3d"tmgads.channel"]').attr("content");J.type=$('meta[name\x3d"tmgads.pagetype"]').attr("content");var y=$(document).find("title").text();if(y=="404")J.status_code="404";else if(y=="500")J.status_code="500";else J.status_code="200"}catch(f){console.log("Exception occurred collecting data for rum mark: "+f)}var r=JSON.stringify(J);
var z=false;try{z=navigator.sendBeacon("//performance-data.gcpdata.telegraph.co.uk/pageview?key\x3dAIzaSyALtnKOYjr6yaaAz2mtIZrFHo6WrpKTOCk",r)}catch(f){console.log("Error sending rum beacon");console.log(f)}if(console!==undefined&&(window.location.href.indexOf("?debug")!==-1||!z)){console.log(r);console.log(z?"rum beacon sent":"rum beacon could not be sent")}}if(navigator.sendBeacon)window.addEventListener("unload",H,false);else window.addEventListener("load",H,false);var M="";if(window.location.pathname==
"/secure/payment/")$("button:contains('Save my details')").click(function(){RUM.mark("save_my_details_click");M="step1";H();$("button:contains('Buy your Telegraph subscription')").click(function(){RUM.mark("payment_details_click");M="step2";H()})});navigator.sendBeacon=navigator.sendBeacon||function(J,L){var S=new XMLHttpRequest;S.open("POST",J,false);S.setRequestHeader("Content-type","text/plain");S.send(L);return true};var Q=[];window.onerror=function(J,L,S,W,Z){try{var Y=J.toLowerCase();var ea=
"script error";if(Y.indexOf(ea)>-1)Q.push({name:"JS syntax error",line:0,file:"n/a",initiator:"n/a",type:"n/a"});else Q.push({error:Z,name:J,line:S,file:L,initiator:"n/a",type:"n/a"})}catch(ca){console.log("Exception occurred collecting js error data: "+ca)}return false};String.prototype.toUnderscore=function(){return this.replace(/([A-Z])/g,function(J){return"_"+J.toLowerCase()})}};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","name":"COMMERCIAL: SUB-7961 [v1.0]","disabled":false});var t="aemproduction.tags.commercialsub7961v10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent='\x3cscript\x3e\n(function() {\n\tObject.defineProperty(window, \'confirm\', {\n\t\tvalue: function value(string) {\n\t\t    var temp \x3d string.split(" ").pop()\n\t\t    if (temp \x26\x26 temp.match("home")){\n\t\t      location.href \x3d tmgCommerce.urls.portal;\n\t\t    } else if (temp \x26\x26 temp.match("account")){\n\t\t      location.href \x3d "/secure/account/";\n\t\t    } else if (temp) {\n\t\t      location.href \x3d decodeURIComponent( temp )\n\t\t    } else {\n\t\t\t\t  location.href \x3d tmgCommerce.urls.portal;\n\t\t    }\n\t\t},\n\t\twritable: false,\n\t\tconfigurable: false\n\t});\n})();\n\x3c/script\x3e';
a.addClientFiltersList(["aemproduction.filters.SecureActivate"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","reRunOnVariableChange":true,"name":"ANALYTICS: Liftigniter [v1.8]","description":"PUBLISHED","disabled":false});var t="aemproduction.tags.analyticsliftigniterv18.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="\x3cscript type\x3d\"text/javascript\"\x3e\n    (function () {\n\n\t\tif (typeof $igniter_var \x3d\x3d\x3d \"undefined\") {\n            (function (w, d, s, p, v, e, r) {\n                w['$igniter_var'] \x3d v;\n                w[v] \x3d w[v] || function () {\n                       (w[v].q \x3d w[v].q || []).push(\n                          arguments)\n                   };\n                w[v].l \x3d 1 * new Date();\n                e \x3d d.createElement(s), r \x3d d.getElementsByTagName(s)[0];\n                e.async \x3d 1;\n                e.src \x3d p + '?ts\x3d' + (+new Date() / 3600000 | 0);\n                r.parentNode.insertBefore(e, r)\n            })(window, document, 'script', '//cdn.petametrics.com/fb6cjraf9cejut2a.js', '$p');\n\n\t\t\twindow.liftIgniterPageKeywords \x3d document.querySelector(\"meta[name\x3d'tmgads.keywords']\").content.split(',');\n\n\t\t\tvar customConfig \x3d {\n                config: {\n                    inventory: {\n                        features: [\n                            {\n                                name: \"pageType\",\n                                selector: \"meta[name\x3d'tmgads.pagetype']\",\n                                type: \"attribute\",\n                                attribute: \"content\"\n                            },\n                            {\n                                name: \"businessSegment\",\n                                selector: \"meta[name\x3d'tmgads.businessSegment']\",\n                                type: \"attribute\",\n                                attribute: \"content\"\n                            },\n                            {\n                                name: \"channel\",\n                                selector: \"meta[name\x3d'DCSext.Channel']\",\n                                type: \"attribute\",\n                                attribute: \"content\"\n                            },\n                            {\n                                name: \"keywords\",\n                                type: \"varArray\",\n                                variable: \"window.liftIgniterPageKeywords\"\n                            },\n                            {\n                                name: \"premiumState\",\n                                selector: \"meta[name\x3d'tmg.premium.state']\",\n                                type: \"attribute\",\n                                attribute: \"content\"\n                            },\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"displayDate\",\n\t\t\t\t\t\t\t\tselector: \"meta[name\x3d'DCSext.articleFirstPublished']\",\n\t\t\t\t\t\t\t\ttype: \"attribute\",\n                                attribute: \"content\"\n\t\t\t\t\t\t\t}\n                        ]\n                    }\n                }\n            };\n\n           \tvar isTravelPage \x3d getTravelPage();\n\n\t\t\tif (isTravelPage) {\n\t\t\t\tvar selector \x3d isTravelPage \x3d\x3d\x3d 'travel-review' ? '.calendar-availability .travel-price__price' : '.info-bar--clone .check-availability-cta .component-content .travel-price__wrap .travel-price__price';\n                customConfig.config.inventory.features.push({\n                    name: \"price\",\n                    selector: selector,\n                    type: \"text\",\n                    transform: function (value) {\n                        return value.trim();\n                    }\n                });\n            }\n\n\t\t\t$p(\"init\", \"fb6cjraf9cejut2a\", customConfig);\n            $p(\"setRequestFields\", [\"title\", \"url\", \"image\", \"price\", \"description\", \"channel\", \"businessSegment\", \"displayDate\", \"pageType\", \"premiumState\"])\n            $p(\"send\", \"pageview\");\n        }\n        // ------------------------------------------------------------------------ //\n        // Utils\n\n        function truncate(string, maxLength) {\n            if (string.length \x3c\x3d maxLength) return string;\n            return string.slice(0, maxLength - 2).replace(/[^\\w\\s]?\\s[^\\s]*$/, '') + '...';\n        }\n\n\t\tfunction getPageMeta() {\n\t\t\tvar metaArr \x3d ['tmgads.pagetype', 'tmgads.section', 'DCSext.articleFirstPublished'];\n\t\t\tvar metaNamespace \x3d {};\n\t\t\tfor (var i \x3d metaArr.length - 1; i \x3e\x3d 0; i--) {\n\t\t\t\tvar metaTag \x3d document.querySelector('meta[name\x3d\"' + metaArr[i] + '\"]');\n\t\t\t\tif (metaTag) {\n\t\t\t\t\tmetaNamespace[metaArr[i]] \x3d metaTag.getAttribute('content');\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn metaNamespace;\n\t\t}\n\n\t\tfunction getDisplayDate(date){\n\t\t\tvar parsed \x3d date.replace(/-/g, '/');\n\t\t\tvar dateDisplay \x3d new Date(parsed);\n\t\t\tvar months \x3d [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\t\t\tvar dateFormatted \x3d dateDisplay.getDate()+' '+months[dateDisplay.getMonth()]+' '+dateDisplay.getFullYear();\n\t\t\tvar hours \x3d dateDisplay.getHours() \x3e 12 ? dateDisplay.getHours() - 12 : dateDisplay.getHours();\n\t\t\tvar am_pm \x3d dateDisplay.getHours() \x3e\x3d 12 ? \"pm\" : \"am\";\n\t\t\tvar minutes \x3d dateDisplay.getMinutes() \x3c 10 ? '0' + dateDisplay.getMinutes() : dateDisplay.getMinutes();\n\n\t\t\treturn dateFormatted+', '+hours + ':' + minutes + am_pm;\n\t\t}\n\n\t\tfunction getTravelPage() {\n\n\t\t\tvar metaNamespace \x3d getPageMeta();\n\t\t\tif (metaNamespace['tmgads.pagetype'] \x3d\x3d\x3d 'travel-review') {\n\t\t\t\treturn 'travel-review';\n\t\t\t} else if (metaNamespace['tmgads.section'] \x3d\x3d\x3d 'travel-cruises' || metaNamespace['tmgads.section'] \x3d\x3d\x3d 'travel-tours') {\n\t\t\t\treturn 'travel-cruises';\n\t\t\t}\n\t\t}\n\n        // ------------------------------------------------------------------------ //\n        // RecommendedList widget\n\n        function RecommendedList(element) {\n            this.element \x3d element;\n        }\n\n        RecommendedList.selector \x3d {\n            ROOT: '#li-recommendation-widget',\n            WIDGETNAME: 'li-recommendation-widget'\n        };\n\n        RecommendedList.prototype.init \x3d function () {\n            if (this.element) {\n                $p('register', {\n                    max: 5,\n                    widget: RecommendedList.selector.WIDGETNAME,\n                    callback: this.onRequestSuccess.bind(this)\n                });\n            }\n        };\n\n        RecommendedList.prototype.onRequestSuccess \x3d function (response) {\n            var data \x3d response;\n            data.widgetTitle \x3d this.element.dataset.title || '';\n            data.items.forEach(function (item) {\n                item.truncatedTitle \x3d truncate(item.title, 100);\n            });\n            this.render(data);\n            $p('track', {\n                elements: this.element.querySelectorAll('.recommended-articles__item'),\n                name: RecommendedList.selector.WIDGETNAME,\n                source: 'LI',\n                opts: {},\n                _debug : false\n            });\n        };\n\n        RecommendedList.prototype.render \x3d function (data) {\n            var template \x3d '\x3cdiv class\x3d\"recommended-articles\"\x3e' +\n               '\x3ch3 class\x3d\"recommended-articles__title\"\x3e{{widgetTitle}}\x3c/h3\x3e' +\n               '\x3col class\x3d\"recommended-articles__items\"\x3e' +\n               '{{#items}}' +\n               '\x3cli class\x3d\"recommended-articles__item\"\x3e' +\n               '\x3ca class\x3d\"recommended-articles__item-link\" href\x3d\"{{url}}\"\x3e{{truncatedTitle}}\x3c/a\x3e' +\n               '\x3c/li\x3e' +\n               '{{/items}}' +\n               '\x3c/ol\x3e' +\n               '\x3c/div\x3e';\n            this.element.innerHTML \x3d $p('render', template, data);\n        };\n\n        // Travel Test and Target code\n        function RecommendedListTarget(element) {\n            this.element \x3d element;\n        }\n\n        RecommendedListTarget.selector \x3d {\n            ROOT: '#li-recommendation-widget-target',\n            WIDGETNAME: 'li-recommendation-widget-target'\n        };\n\n        RecommendedListTarget.prototype.init \x3d function () {\n            if (this.element) {\n                $p('register', {\n                    max: 20,\n                    widget: RecommendedListTarget.selector.WIDGETNAME,\n                    opts: {pageType:[\"travel-review\",\"travel-product\"]},\n                    callback: this.onRequestSuccess.bind(this)\n                });\n            }\n        };\n\n        RecommendedListTarget.prototype.onRequestSuccess \x3d function (response) {\n            var data \x3d response;\n            data.widgetTitle \x3d this.element.dataset.title || '';\n            data.items.forEach(function (item) {\n                item.truncatedTitle \x3d truncate(item.title, 100);\n            });\n            this.render(data);\n            $p('track', {\n                elements: this.element.querySelectorAll('.recommended-travel-item-target'),\n                name: RecommendedListTarget.selector.WIDGETNAME,\n                source: 'LI',\n                opts: {},\n                _debug : false\n            });\n\n            //tracking code\n\n        };\n\n        RecommendedListTarget.prototype.render \x3d function (data) {\n            var template \x3d '\x3cdiv class\x3d\"recommended-travel-target\"\x3e' +\n               '\x3col class\x3d\"recommended-travel-items-target\"\x3e' +\n               '{{#items}}' +\n               '\x3cli class\x3d\"recommended-travel-item-target\"\x3e' +\n               '\x3cimg class\x3d\"recommended-travel-item-image-target\" src\x3d\"{{image}}\"/\x3e' +\n               '\x3cdiv class\x3d\"recommended-travel-title-target\"\x3e{{title}}\x3c/div\x3e' +\n               '\x3cdiv  class\x3d\"recommended-travel-item-desc-target\"\x3e{{description}}\x3c/div\x3e' +\n               '\x3cdiv class\x3d\"recommended-traive-item-label-from\"\x3eFrom\x3c/div\x3e' +\n               '\x3cdiv  class\x3d\"recommended-travel-item-price-target\"\x3e\\\x26pound\\;{{price}}\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e' +\n               '\x3ca class\x3d\"recommended-travel-item-link-target\" href\x3d\"{{url}}\"\x3eFind out more\x3c/a\x3e' +\n               '\x3c/li\x3e' +\n               '{{/items}}' +\n               '\x3c/ol\x3e' +\n               '\x3c/div\x3e';\n            this.element.innerHTML \x3d $p('render', template, data);\n        };\n\n        // Initialise RecommendedList widget\n        var rlElements \x3d document.querySelectorAll(RecommendedList.selector.ROOT);\n        var rlArray \x3d Array.prototype.slice.call(rlElements);\n        rlArray.forEach(function (element) {\n            var widget \x3d new RecommendedList(element);\n            widget.init();\n        });\n\n        // Initialise Travel recommended list\n        var targetElements \x3d document.querySelectorAll(RecommendedListTarget.selector.ROOT);\n        if (targetElements) {\n            var targetArray \x3d Array.prototype.slice.call(targetElements);\n            targetArray.forEach(function (element) {\n                var widget \x3d new RecommendedListTarget(element);\n                widget.init();\n            });\n        }\n\n\t\t// ------------------------------------------------------------------------ //\n        // MidArticleUnit widget\n\n        function MidArticleUnit(element) {\n            this.element \x3d element;\n        }\n\n        MidArticleUnit.selector \x3d {\n            ROOT: '.li-mau-article',\n\t\t\tWIDGETNAME: 'li-mau-article'\n        };\n\n        MidArticleUnit.prototype.init \x3d function () {\n\t\t\tif (this.element) {\n                $p('register', {\n                    max: 1,\n                    widget: MidArticleUnit.selector.WIDGETNAME,\n\t\t\t\t\topts: {pageType: [\"story\",\"live\",\"video\"]},\n                    callback: this.onRequestSuccess.bind(this)\n                });\n            }\n        };\n\n        MidArticleUnit.prototype.onRequestSuccess \x3d function (response) {\n            var data \x3d response;\n\t\t\tdata.items.forEach(function (item) {\n                item.truncatedTitle \x3d truncate(item.title, 100);\n\t\t\t\titem.displayDate \x3d getDisplayDate(item.displayDate);\n\t\t\t\titem.premiumBool \x3d item.premiumState \x3d\x3d 'true' ? true : false;\n            });\n\t\t\tthis.render(data.items[0]);\n\t\t\t$p('track', {\n                elements: this.element,\n                name: MidArticleUnit.selector.WIDGETNAME,\n                source: 'LI',\n                opts: {},\n                _debug : false\n            });\n        };\n\n\t\tMidArticleUnit.prototype.render \x3d function (data) {\n\n\t\t\tvar template \x3d '\x3carticle class\x3d\"mau-article mau-article--{{pageType}}{{#premiumBool}}-premium{{/premiumBool}}\"\x3e' +\n\t\t\t'\x3ca class\x3d\"mau-article__link\" href\x3d\"{{url}}\"\x3e' +\n\t\t\t'\x3cdiv class\x3d\"mau-article__image-wrapper\"\x3e' +\n\t\t\t'{{#image}}\x3cimg class\x3d\"mau-article__image\" src\x3d\"{{image}}?imwidth\x3d220\" /\x3e{{/image}}' +\n\t\t\t'\x3cdiv class\x3d\"mau-article__video-icon\"\x3e\x3c/div\x3e' +\n\t\t\t'\x3c/div\x3e' +\n\t\t\t'{{#premiumBool}}\x3cspan class\x3d\"mau-article__premium-label\"\x3ePremium\x3c/span\x3e{{/premiumBool}}' +\n\t\t\t'\x3ch3 class\x3d\"mau-article__title\"\x3e\x3cdiv class\x3d\"mau-article__live-indicator\"\x3e\x3cspan class\x3d\"mau-article__live-label\"\x3eLive\x3c/span\x3e\x3c/div\x3e{{truncatedTitle}}\x3c/h3\x3e' +\n\t\t\t'{{#displayDate}}\x3ctime class\x3d\"mau-article__date\" title\x3d\"{{displayDate}}\" datetime\x3d\"{{displayDate}}\" itemprop\x3d\"datePublished\" pubdate\x3d\"\"\x3e{{displayDate}}\x3c/time\x3e{{/displayDate}}' +\n\t\t\t'\x3c/a\x3e' +\n\t\t\t'\x3c/article\x3e';\n            this.element.innerHTML \x3d $p('render', template, data);\n        };\n\n        // Initialise MidArticleUnit widget\n        var mauElements \x3d document.querySelectorAll(MidArticleUnit.selector.ROOT);\n        var mauArray \x3d Array.prototype.slice.call(mauElements);\n        mauArray.forEach(function (element) {\n            var widget \x3d new MidArticleUnit(element);\n            widget.init();\n        });\n\n\n\t\t// Fetch has been moved to the botton because it needs to be called once\n\t\t// all widget are registered (multiple widgets case) otherwise\n\t\t// only the first one will be rendered.\n\t\t$p('fetch');\n    })();\n\x3c/script\x3e";
a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","name":"COMMERCIAL: Subscriptions_qubit:[v1.0]","disabled":false,"locationObject":"BODY"});var t="aemproduction.tags.commercialsubscriptionsqubitv10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="\x3c!-- Qubit script --\x3e\n\x3cscript src\x3d'//dd6zx4ibq538k.cloudfront.net/smartserve-4833.js' async defer\x3e\x3c/script\x3e";a.addClientFiltersList(["aemproduction.filters.Subscriptions","aemproduction.filters.Confirmation",
"aemproduction.filters.Premiun","aemproduction.filters.SecurePayment","aemproduction.filters.Rewards","aemproduction.filters.SecureRegistration"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","name":"ANALYTICS: Chartbeat [v1.2]","description":"Code to initialise Chartbeat - analytics tool for Editorial","disabled":true});var t="aemproduction.tags.analyticschartbeatv12.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="\x3cscript type\x3d'text/javascript'\x3e\n\tvar chartbeatStart \x3d window.performance ? window.performance.mark(\"chartbeat_start\") : new Date().getTime();\n\tvar _sf_async_config \x3d _sf_async_config || {};\n\n\tvar metaAuthor \x3d document.querySelector('meta[name\x3d\"DCSext.author\"]');\n\tvar metaAuthorContent \x3d metaAuthor \x26\x26 metaAuthor.getAttribute(\"content\");\n\tvar metaSegment \x3d document.querySelector('meta[name\x3d\"DCSext.Channel\"]');\n\tvar metaSegmentContent \x3d metaSegment \x26\x26 metaSegment.getAttribute(\"content\");    \n\n\t/** CONFIGURATION START **/\n\t_sf_async_config.uid \x3d 65595;\n\t_sf_async_config.domain \x3d 'telegraph.co.uk';\n\t_sf_async_config.useCanonical \x3d true;\n\t_sf_async_config.sections \x3d metaSegmentContent;\n\t_sf_async_config.authors \x3d metaAuthorContent;\n\t_sf_async_config.videoType \x3d 'ooyala';\n\t_sf_async_config.autoDetect \x3d false;    \n\t/** CONFIGURATION END **/\n\n\t/** Push appropriate ['key', 'value'] pair for given user type to _cbq array **/\n\tvar _cbq \x3d window._cbq \x3d (window._cbq || []);\n\t_cbq.push(['_acct', 'paid']);\n\n\t(function () {\n\t\t\n\t\tfunction loadChartbeat() {\n\t\t\twindow._sf_endpt \x3d (new Date()).getTime();\n\t\t\tvar e \x3d document.createElement('script');\n\t\t\te.setAttribute('language', 'javascript');\n\t\t\te.setAttribute('type', 'text/javascript');\n\t\t\te.setAttribute('src', '//static.chartbeat.com/js/chartbeat_video.js');\n\t\t\tdocument.body.appendChild(e);\n\t\t}\n\n\t\tvar oldonload \x3d window.onload;\n\t\twindow.onload \x3d (typeof window.onload !\x3d 'function') ? loadChartbeat : function() {\n\t\t\tconsole.log('window.onload -\x3e loadCharbeat');\n\t\t\toldonload();\n\t\t\tloadChartbeat();\n\t\t};\n\t})();\n\n\tvar chartbeatEnd \x3d window.performance ? window.performance.mark(\"chartbeat_end\") : new Date().getTime();\n\tif (!window.performance \x26\x26 console){\n\t\tconsole.log(\"Affiliate Tracking load time is:\"+ (chartbeatEnd - chartbeatStart))\n\t} else if (window.performance) {\n\t\twindow.performance.measure(\"js_chartbeat_track\", \"chartbeat_start\", \"chartbeat_end\" )\n\t\twindow.performance.clearMarks(\"chartbeat_start\");\n\t\twindow.performance.clearMarks(\"chartbeat_end\");\n\t}\n\x3c/script\x3e";
a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"name":"COMMERCIAL: LinkedIn Pixel [v1.0]","description":"LinkedIn's pixel on the Business and Money sections so that we can retarget our users on LinkedIn"});var t="aemproduction.tags.commerciallinkedinpixelv10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="";a.addClientFiltersList(["aemproduction.filters.BusinessOnly","aemproduction.filters.MoneyOnly"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);
a.pre=function(){};a.script=function(){_linkedin_data_partner_id="104656";(function(){var K=document.getElementsByTagName("script")[0];var D=document.createElement("script");D.type="text/javascript";D.async=true;D.src="https://snap.licdn.com/li.lms-analytics/insight.min.js";K.parentNode.insertBefore(D,K)})()};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"name":"ADTECH: Lotame [v1.0]","description":"2018-03-29:SD: Updated to add tmp.live var to flag if this is live or not."});var t="aemproduction.tags.adtechlotamev10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="";a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){function K(p){doTimer=function(){var Q=!1;return Q=void 0!==
window.RUM&&void 0!==window.RUM.now?window.RUM.now():void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),parseFloat(Q.toFixed(3))};p.title=p.name+"-"+p.version;p.performance={init:doTimer(),requested:-1,received:-1,latency:-1,preload:-1,callback:-1};p.performance[p.status]=doTimer();if(typeof p.callback=="function"){p.preload();p.performance.preload=doTimer()}var H=document.createElement("script");H.id=p.id;H.type="text/javascript";H.async=true;H.onload=
function(){p.status="received";p.performance[p.status]=doTimer();p.performance.latency=parseFloat((p.performance.received-p.performance.init).toFixed(3));tmgAds.performance[p.name]=p.performance;if(typeof p.callback=="function"){p.callback();p.performance.callback=doTimer()}};p.status="requested";p.performance[p.status]=doTimer();H.src=p.url;var M=document.getElementsByTagName("script")[0];M.parentNode.insertBefore(H,M)}if(typeof window.tmgAdsLog!="function"){window.tmgAds=window.tmgAds||{};window.tmgAds.log=
window.tmgAds.log||[];window.tmgAds.metrics=window.tmgAds.metrics||{ads:{}};window.tmgAds.performance=window.tmgAds.performance||{ads:{}}}var D={name:"lotame",live:true,version:"1.0",date:"2018-03-01",id:"LOTCC_12639",url:"https://tags.crwdcntrl.net/c/12639/cc.js?ns\x3d_cc12639",status:"init",type:"text/javascript",preload:function(){console.log("LOTAME: preload -\x3e null")},callback:function(){_cc12639.bcp()}};if(window.location.search.indexOf("lotametest")>0||D.live)K(D);else console.log("LOTAME: Not running..")};
a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"locationPlaceHolder":"END","name":"ANALYTICS: Outbrain [v1.1]","description":"RFC-9682"});var t="aemproduction.tags.analyticsoutbrainv10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="";a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){if(window.location.href.indexOf("telegraph.co.uk/financial-services/")===-1){var K=
document.createElement("img");K.src="https://amplifypixel.outbrain.com/pixel?mid\x3d00eaf20a66cd025f190318edba18d8089b";K.style.display="none"}};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"async":true,"usesDocumentWrite":false,"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"name":"ANALYTICS: Facebook-paywall [v1.0]","active":true,"disabled":false,"locked":false,"locationObject":"BODY","url":"","timeout":5E3});var t="aemproduction.tags.analyticsfacebookpaywallv10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent='\x3c!-- Facebook Pixel Code --\x3e\n\x3cscript\x3e\n(function(){\n  if (typeof fbq \x3d\x3d\x3d "function"){\n    var meter_count \x3d document.querySelector("html.logged-in--false") ? 0 : 1;\n    fbq(\'trackCustom\', "ViewPaywall", {\n  \t\tmeter_count: meter_count\n  \t}); \n  }\n})();\n\x3c/script\x3e\n\x3c!-- End Facebook Pixel Code --\x3e';
a.addClientFiltersList(["aemproduction.filters.PaywallPage"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"name":"TRAVEL: TT-1151","description":"Fix for booking com link underneath gallery to add back affiliate link"});var t="aemproduction.tags.traveltt1151.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent="";a.addClientFiltersList(["aemproduction.filters.TravelOnly"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){var K=document.querySelector('.hotelRenderer [data-js\x3d"grid-gallery"] .link');
if(K){var D=document.querySelectorAll(".hotelRenderer .product-book-now__provider .travel-cta__link")[0].getAttribute("href");K.href=D}};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"COMMERCIAL: Confirmation_google:[v1.0]","disabled":false,"id":56175087,"locked":false,"locationObject":"BODY"});var t="aemproduction.tags.commercialconfirmation_googlev10.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent='\x3c!-- Google Code for PX - Website Conversion UK Conversion Page --\x3e \n\x3cscript type\x3d"text/javascript"\x3e /* \x3c![CDATA[ */ var google_conversion_id \x3d 971994445; var google_conversion_language \x3d "en"; var google_conversion_format \x3d "3"; var google_conversion_color \x3d "ffffff"; var google_conversion_label \x3d "pBciCOHUmFsQzeq9zwM"; var google_conversion_value \x3d order.price; var google_conversion_currency \x3d "GBP"; var google_remarketing_only \x3d false; /* ]]\x3e */ \x3c/script\x3e \x3cscript type\x3d"text/javascript" src\x3d"//www.googleadservices.com/pagead/conversion.js"\x3e \x3c/script\x3e \x3cnoscript\x3e \x3cdiv style\x3d"display:inline;"\x3e \x3cimg height\x3d"1" width\x3d"1" style\x3d"border-style:none;" alt\x3d"" src\x3d"//www.googleadservices.com/pagead/conversion/971994445/?value\x3d1.00\x26amp;currency_code\x3dGBP\x26amp;label\x3dpBciCOHUmFsQzeq9zwM\x26amp;guid\x3dON\x26amp;script\x3d0"/\x3e \x3c/div\x3e \x3c/noscript\x3e';
a.addClientFiltersList(["aemproduction.filters.DefaultFilterMatchAll2","aemproduction.filters.IncludeSecurePaymentConfirmation"]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();
(function(){var u=qubit.opentag.CustomTag;var a=new u({"name":"WEBTEAM: Registration Wall Styling"});var t="aemproduction.tags.webteamregistrationwallstyling.Tag";qubit.Define.clientNamespace(t,a);a.htmlContent='\x3cstyle\x3e\n.registration-wall {\n\tmargin-bottom: 32px;\n\tborder-top: 0;\n}\n.registration-wall .btn {\n\tfont-family: "Telesans Text Regular", Arial, sans-serif;\n\tfont-size: 1.4rem;\n\tline-height: 1.8rem;\n\tbackground-color: #FFF;\n\tborder-radius: 0;\n\tborder: 1px solid #03908b;\n\tbox-sizing: border-box;\n\tcolor: #03908b;\n\tpadding: 1rem 2rem;\n\ttext-align: center;\n\ttransition: color 200ms, background-color 200ms, border-color 200ms;\n\tmargin-left: 16px;\n}\n.registration-wall .btn:hover,\n.registration-wall .btn:focus {\n\tbackground-color: rgba(#03908b, .1);\n\tborder-color: darken(#03908b, 5%);\n\tcolor: darken(#03908b, 5%);\n}\n.registration-wall .btn--solid {\n\tborder-color: #03908b;\n\tbackground-color: #03908b;\n\tcolor: #FFF;\n\tpadding-left: 4rem;\n\tpadding-right: 4rem;\n\tmargin-left: 0;\n}\n.registration-wall .btn--solid:hover,\n.registration-wall .btn--solid:focus {\n\tbackground-color: #027773;\n\tborder-color: #027773;\n\tcolor: #fff;\n}\n.registration-wall .btn--solid:hover,\n.registration-wall .btn--solid:focus {\n\tbackground-color: darken(#03908b, 5%);\n\tborder-color: darken(#03908b, 5%);\n\tcolor: #FFF;\n}\n\n.registration-wall__headline {\n\tfont-size: 2.0rem;\n\tline-height: 2.2rem;\n\tfont-family: "Austin News Deck Medium", Georgia, Times, serif;\n\tcolor: #03908b;\n\tmargin-bottom: 0;\n\tmargin-top: 0;\n\tpadding-top: 16px;\n\tpadding-bottom: 16px;\n\tborder-bottom: 0;\n}\n@media only screen and (min-width: 1008px) {\n\t.registration-wall__headline {\n\t\tfont-size: 2.4rem;\n\t\tline-height: 2.6rem;\n\t}\n}\n\n.registration-wall__body {\n\tfont-size: 1.7rem;\n\tline-height: 2.1rem;\n\tfont-family: "Austin News Text Roman", Georgia, Times, serif;\n\tpadding-bottom: 16px;\n}\n\n.registration-wall__body ul {\n\tmargin-top: 0;\n\tmargin-bottom: 8px;\n\tpadding-left: 0;\n}\n\n.registration-wall__body ul li {\n\tline-height: 2.4rem;\n\tlist-style-image: url(\'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxM3B4IiBoZWlnaHQ9IjEzcHgiIHZpZXdCb3g9IjAgMCAxNzkyIDE3OTIiIGZpbGw9IiMwMzkwOGIiPjxnPjxwb2x5Z29uIHBvaW50cz0iMTc5Miw5NTIgOTUyLDk1MiA5NTIsMTc5MiA4NDAsMTc5MiA4NDAsOTUyIDAsOTUyIDAsODQwIDg0MCw4NDAgODQwLDAgOTUyLDAgOTUyLDg0MCAxNzkyLDg0MCI+PC9wb2x5Z29uPjwvZz48L3N2Zz4\x3d\');\n\tlist-style-position: inside;\n\tmargin-bottom: 16px;\n\tposition: relative;\n\tpadding-left: 0;\n}\n\n.registration-wall__body ul li:before {\n\tdisplay: none;\n}\n\n.registration-wall__footer {\n\tfont-size: 1.7rem;\n\tline-height: 2.1rem;\n\tfont-family: "Austin News Text Roman", Georgia, Times, serif;\n\talign-items: flex-start;\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: start;\n}\n\n.registration-wall__footer .btn {\n\tmargin-bottom: 16px;\n}\n\n.registration-wall__footer .login-default-icon {\n\tfill: #03908b;\n\theight: 13px;\n\tmargin-right: 8px;\n\twidth: 13px;\n}\n\n@media only screen and (min-width: 480px) {\n\t.registration-wall__footer .btn {\n\t\twidth: auto;\n\t}\n}\n\x3c/style\x3e';
a.addClientFiltersList([]);a.addClientVariablesMap({});a.addParameters([]);a.genericDependencies=[];a.addClientDependenciesList([]);a.pre=function(){};a.script=function(){};a.post=function(){}})();(function(){try{qubit.opentag.Main.run()}catch(u){try{console.error("Errors during opentag main runtime.",u)}catch(a){}}})();